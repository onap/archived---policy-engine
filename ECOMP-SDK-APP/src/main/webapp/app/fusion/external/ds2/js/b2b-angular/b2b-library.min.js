/*B2B-Angular v0.5.3*/
/*Integrated 9/16/2016*/
angular.module("b2b.att.tpls", ['template/boardstrip/b2bAddBoard.html', 'template/boardstrip/b2bBoard.html', 'template/boardstrip/b2bBoardstrip.html', 'template/coachmark/coachmark.html', 'template/directoryListing/directoryListing.html', 'template/fileUpload/fileUpload.html', 'template/flyout/flyout.html', 'template/flyout/flyoutContent.html', 'template/footer/footer_column_switch_tpl.html', 'template/hourPicker/b2bHourpicker.html', 'template/hourPicker/b2bHourpickerPanel.html', 'template/hourPicker/b2bHourpickerValue.html', 'template/paneSelector/paneSelector.html', 'template/paneSelector/paneSelectorPane.html', 'template/profileBlocks/profileBlocks.html', 'template/profileCard/profileCard-addUser.html', 'template/profileCard/profileCard.html', 'template/seekBar/seekBar.html', 'template/slider/slider.html', 'template/statusTracker/statusTracker.html', 'template/tableMessages/tableMessage.html', 'template/tableScrollbar/tableScrollbar.html', 'template/treeNav/groupedTree.html', 'template/treeNav/treeMember.html', 'template/treeNav/ungroupedTree.html', 'template/widget/b2bWidgetContainer.html', 'template/widget/b2bWidgetContent.html', 'template/widget/b2bWidgetHeader.html']);angular.module("b2b.att", ["b2b.att.tpls", 'b2b.att.boardstrip','b2b.att.coachmark','b2b.att.configurationSection','b2b.att.directoryListing','b2b.att.directoryListingTemplate','b2b.att.fileUpload','b2b.att.flyout','b2b.att.footer','b2b.att.header','b2b.att.hourPicker','b2b.att.multiLevelNavigation','b2b.att.multipurposeExpander','b2b.att.paneSelector','b2b.att.phoneNumberInput','b2b.att.profileBlocks','b2b.att.profileCard','b2b.att.seekBar','b2b.att.slider','b2b.att.statusTracker','b2b.att.tableMessages','b2b.att.tableScrollbar','b2b.att.tagBadges','b2b.att.treeNav','b2b.att.widget']);angular.module('b2b.att.utilities', ['ngSanitize'])
.constant('b2bUtilitiesConfig', {
    prev: '37,38',
    next: '39,40'
})
.constant('b2bWhenScrollEndsConstants', {
    'threshold': 100,
    'width': 0,
    'height': 0
})
.filter('groupBy', function ($timeout) {
    return function (data, key) {
        if (!key) return data;
        var outputPropertyName = '__groupBy__' + key;
        if(!data[outputPropertyName]){
            var result = {};  
            for (var i=0;i<data.length;i++) {
                if (!result[data[i][key]])
                    result[data[i][key]]=[];
                result[data[i][key]].push(data[i]);
            }
            Object.defineProperty(result, 'length', {enumerable: false, value: Object.keys(result).length});
            Object.defineProperty(data, outputPropertyName, {enumerable:false, configurable:true, writable: false, value:result});
            $timeout(function(){delete data[outputPropertyName];},0,false);
        }
        return data[outputPropertyName];
    };
})
.directive('b2bWhenScrollEnds', function(b2bWhenScrollEndsConstants, $log) {
    return {
        restrict: 'A',
        link: function (scope, element, attrs) {
            /**
            * Exposed Attributes:
            *       threshold - integer - number of pixels before scrollbar hits end that callback is called
            *       width - integer - override for element's width (px)
            *       height - integer - override for element's height (px)
            *       axis - string - x/y for scroll bar axis
            */
            var threshold = parseInt(attrs.threshold, 10) || b2bWhenScrollEndsConstants.threshold;

            if (!attrs.axis || attrs.axis === '') {
                $log.warn('axis attribute must be defined for b2bWhenScrollEnds.');
                return;
            }

            if (attrs.axis === 'x') {
                visibleWidth = parseInt(attrs.width, 10) || b2bWhenScrollEndsConstants.width;
                if (element.css('width')) {
                    visibleWidth = element.css('width').split('px')[0];  
                }

                element[0].addEventListener('scroll', function() {
                    var scrollableWidth = element.prop('scrollWidth');
                    if (scrollableWidth === undefined) {
                        scrollableWidth = 1;
                    }
                    var hiddenContentWidth = scrollableWidth - visibleWidth;

                    if (hiddenContentWidth - element[0].scrollLeft <= threshold) {
                        /* Scroll almost at bottom, load more rows */
                        scope.$apply(attrs.b2bWhenScrollEnds);
                    }
                });
            } else if (attrs.axis === 'y') {
                visibleHeight = parseInt(attrs.height, 10) || b2bWhenScrollEndsConstants.height;
                if (element.css('width')) {
                    visibleHeight = element.css('height').split('px')[0]; 
                }

                element[0].addEventListener('scroll', function() {
                    var scrollableHeight = element.prop('scrollHeight');
                    if (scrollableHeight === undefined) {
                        scrollableHeight = 1;
                    }
                    var hiddenContentHeight = scrollableHeight - visibleHeight;

                    if (hiddenContentHeight - element[0].scrollTop <= threshold) {
                        /* Scroll almost at bottom, load more rows */
                        scope.$apply(attrs.b2bWhenScrollEnds);
                    }
                });
            }
        }
    };
})

.factory('$windowBind', ['$window', '$timeout', function($window, $timeout) {
    var win = angular.element($window);
    var _scroll = function (flag, callbackFunc, scope) {
        scope.$watch(flag, function (val) {
            $timeout(function () {
                if (val) {
                    win.bind('scroll', callbackFunc);
                } else {
                    win.unbind('scroll', callbackFunc);
                }
            });
        });
    };

    var _click = function (flag, callbackFunc, scope) {
        scope.$watch(flag, function (val) {
            $timeout(function () {
                if (val) {
                    win.bind('click', callbackFunc);
                } else {
                    win.unbind('click', callbackFunc);
                }
            });
        });
    };

    var _event = function (event, flag, callbackFunc, scope, timeoutFlag, timeoutValue) {
        if (timeoutFlag) {
            if (!(timeoutValue)) {
                timeoutValue = 0;
            }
            scope.$watch(flag, function (newVal, oldVal) {
                if (newVal !== oldVal) {
                    $timeout(function () {
                        if (newVal) {
                            win.bind(event, callbackFunc);
                        } else {
                            win.unbind(event, callbackFunc);
                        }
                    }, timeoutValue);
                }
            });
        } else {
            scope.$watch(flag, function (newVal, oldVal) {
                if (newVal !== oldVal) {
                    if (newVal) {
                        win.bind(event, callbackFunc);
                    } else {
                        win.unbind(event, callbackFunc);
                    }
                }
            });
        }
    };

    return {
        click: _click,
        scroll: _scroll,
        event: _event
    };
}])

.factory('$documentBind', ['$document', '$timeout', function ($document, $timeout) {
    var _click = function (flag, callbackFunc, scope) {
        scope.$watch(flag, function (val) {
            $timeout(function () {
                if (val) {
                    $document.bind('click', callbackFunc);
                } else {
                    $document.unbind('click', callbackFunc);
                }
            });
        });
    };

    var _scroll = function (flag, callbackFunc, scope) {
        scope.$watch(flag, function (val) {
            $timeout(function () {
                if (val) {
                    $document.bind('scroll', callbackFunc);
                } else {
                    $document.unbind('scroll', callbackFunc);
                }
            });
        });
    };

    var _event = function (event, flag, callbackFunc, scope, timeoutFlag, timeoutValue) {
        if (timeoutFlag) {
            if (!(timeoutValue)) {
                timeoutValue = 0;
            }
            scope.$watch(flag, function (newVal, oldVal) {
                if (newVal !== oldVal) {
                    $timeout(function () {
                        if (newVal) {
                            $document.bind(event, callbackFunc);
                        } else {
                            $document.unbind(event, callbackFunc);
                        }
                    }, timeoutValue);
                }
            });
        } else {
            scope.$watch(flag, function (newVal, oldVal) {
                if (newVal !== oldVal) {
                    if (newVal) {
                        $document.bind(event, callbackFunc);
                    } else {
                        $document.unbind(event, callbackFunc);
                    }
                }
            });
        }
    };

    return {
        click: _click,
        scroll: _scroll,
        event: _event
    };
}])

.factory('DOMHelper', function() {

    var _isTabable = function(node) {
        var element = angular.element(node);
        var tagName = element[0].tagName.toUpperCase();

        if (isHidden(element)) {
            return false;
        }
        if (element.attr('tabindex') !== undefined) {
            return (parseInt(element.attr('tabindex'), 10) >= 0);
        }
        if (tagName === 'A' || tagName === 'AREA' || tagName === 'BUTTON' || tagName === 'INPUT' || tagName === 'TEXTAREA' || tagName === 'SELECT') {
            if (tagName === 'A' || tagName === 'AREA') {
                // anchors/areas without href are not focusable
                return (element[0].href !== '');
            }
            return !(element[0].disabled || element[0].readOnly);
        }
        return false;
    };

    function isValidChild(child) {
        return child.nodeType == 1 && child.nodeName != 'SCRIPT' && child.nodeName != 'STYLE';
    }
    
    function isHidden(obj) {
        var elem = angular.element(obj);
        return elem.hasClass('ng-hide') || elem.css('display') === 'none';
    }

    function traverse(obj, fromTop) {
        var obj = obj || document.getElementsByTagName('body')[0];
        if (isValidChild(obj) && _isTabable(obj)) {
            return obj;
        }
        // If object is hidden, skip it's children
        if (isValidChild(obj) && isHidden(obj)) {
            return undefined;
        } 
        // If object is hidden, skip it's children
        if (angular.element(obj).hasClass('ng-hide')) {
            return undefined;
        }  
        if (obj.hasChildNodes()) {
            var child;
            if (fromTop) {
                child = obj.firstChild;
            } else {
                child = obj.lastChild;
            }
            while(child) {
                var res =  traverse(child, fromTop);
                if(res){
                    return res;
                }
                else{
                    if (fromTop) {
                        child = child.nextSibling;
                    } else {
                        child = child.previousSibling;
                    }
                }
            }
        }
        else{
            return undefined;
        }
    }

    var _lastTabableElement = function(el) {
        /* This will return the first tabable element from the parent el */
        var elem = el;
        if (el.hasOwnProperty('length')) {
            elem = el[0];
        }

        return traverse(elem, false);
    };

    var _firstTabableElement = function(el) {
        /* This will return the first tabable element from the parent el */
        var elem = el;
        if (el.hasOwnProperty('length')) {
            elem = el[0];
        }

        return traverse(elem, true);
    };

    return {
        firstTabableElement: _firstTabableElement,
        lastTabableElement: _lastTabableElement
    };
})

.directive('b2bTrapFocusInsideElement', ['$timeout', 'DOMHelper', 'keymap', 'events', function ($timeout, DOMHelper, keymap, events) {
    return {
        restrict: 'A',
        transclude: false,
        link: function (scope, elem, attr) {

            /* Before opening modal, find the focused element */
            var firstTabableElement = undefined,
                lastTabableElement = undefined;

            var firstTabableElementKeyhandler = function(e) {
                if (!e.keyCode) {
                    e.keyCode = e.which;
                }
                if (e.keyCode === keymap.KEY.TAB && e.shiftKey) {
                    if (attr.trapFocusInsideElement === 'true') {
                        var temp = DOMHelper.lastTabableElement(elem);
                        if (lastTabableElement !== temp) {
                            // Unbind keydown handler on lastTabableElement
                            angular.element(lastTabableElement).unbind('keydown', lastTabableElementKeyhandler);
                            lastTabableElement = temp;
                            angular.element(lastTabableElement).bind('keydown', lastTabableElementKeyhandler);
                        }
                    }
                    lastTabableElement.focus();
                    events.preventDefault(e);
                    events.stopPropagation(e);
                }
            };

            var lastTabableElementKeyhandler = function(e) {
                if (!e.keyCode) {
                    e.keyCode = e.which;
                }
                if (e.keyCode === keymap.KEY.TAB && !e.shiftKey) {
                    if (attr.trapFocusInsideElement === 'true') {
                        var temp = DOMHelper.firstTabableElement(elem);
                        if (firstTabableElement !== temp) {
                            // Unbind keydown handler on firstTabableElement
                            angular.element(firstTabableElement).unbind('keydown', firstTabableElementKeyhandler);
                            firstTabableElement = temp;
                            angular.element(firstTabableElement).bind('keydown', firstTabableElementKeyhandler);
                        }
                    }
                    firstTabableElement.focus();
                    events.preventDefault(e);
                    events.stopPropagation(e);
                }
            };

            $timeout(function () {
                firstTabableElement = DOMHelper.firstTabableElement(elem);
                lastTabableElement = DOMHelper.lastTabableElement(elem);
                angular.element(firstTabableElement).bind('keydown', firstTabableElementKeyhandler);
                angular.element(lastTabableElement).bind('keydown', lastTabableElementKeyhandler);
            });
        }
    };
}])

.directive('b2bSetNextFocusOn', ['DOMHelper', '$timeout', function(DOMHelper, $timeout) {
    return {
        restrict: 'A',
        scope: true,
        link: function (scope, elem, attr) {
            elem.bind('click', function(){
                var firstFocusableElement = undefined; 
                var containerElem = undefined; 
                var containerArray = [];
                var timeout = parseInt(attr.setNextFocusTimeout, 0) | 100;
                var index = parseInt(attr.b2bSetNextFocusIndex, 0) | 0;

                if (attr.b2bSetNextFocusOn === '') {
                    return;
                } else {
                    containerArray = attr.b2bSetNextFocusOn.split(' ');
                }
                $timeout(function(){
                    var i = 0;
                    do { // cycles thru containerArray until finds a match in DOM to set focus to
                        containerElem = document.querySelector(containerArray[i])[index]; 
                        i++;
                    } while ( (!containerElem) && (i < containerArray.length) );
                    if(containerElem){
                        if (!angular.isDefined(firstFocusableElement)) { 
                            firstFocusableElement = DOMHelper.firstTabableElement(containerElem); 
                        }
                        firstFocusableElement.focus(); 
                    }
                }, timeout, false)
            });
        }

    };
}])

.directive('b2bInputAllow', [function() {
    return {
        restrict: 'A',
        require: 'ngModel',
        link: function (scope, elem, attr, ctrl) {
            var regexExpression = null;
            attr.$observe('b2bInputAllow', function (value) {
                if (value) {
                    regexExpression = new RegExp(value);
                }
            });
            var isValid = function(str) {
                if (regexExpression !== null) {
                    return regexExpression.test(str);
                }
                return false;
            };
            elem.bind('keypress', function($event) {
                var charcode = String.fromCharCode($event.which || $event.keyCode);
                if (!isValid(charcode)) {
                    $event.preventDefault();
                    $event.stopPropagation();
                }
            });
            elem.bind('input', function (evt) {
                var inputString = ctrl.$viewValue;
                if (isValid(inputString)) {
                    ctrl.$setViewValue(inputString);
                    ctrl.$render();
                    scope.$apply();
                }
            });
        }
    };
}])

.directive('b2bInputDeny', [function() {
    return {
        restrict: 'A',
        require: 'ngModel',
        link: function (scope, elem, attr, ctrl) {
            var regexExpression = null;
            attr.$observe('b2bInputDeny', function (value) {
                if (value) {
                    regexExpression = new RegExp(value, 'g');
                }
            });
            elem.bind('input', function () {
                var inputString = ctrl.$viewValue && ctrl.$viewValue.replace(regexExpression, '');
                if (inputString !== ctrl.$viewValue) {
                    ctrl.$setViewValue(inputString);
                    ctrl.$render();
                    scope.$apply();
                }
            });
        }
    };
}])

.directive('b2bKey', ['b2bUtilitiesConfig', '$timeout', function (b2bUtilitiesConfig, $timeout) {
    return {
        restrict: 'A',
        controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {
            var selfCtrl = this;

            this.childElementsList = [];

            this.b2bKeyID = "";

            if (angular.isDefined($attrs.b2bKey)) {
                this.b2bKeyID = $attrs.b2bKey;
            }

            this.calculateChildElementsList = function () {
                return $element[0].querySelectorAll("[b2b-key-item='" + this.b2bKeyID + "']:not([disabled])");
            };

            this.resetChildElementsList = function () {
                return $timeout(function () {
                    selfCtrl.childElementsList = selfCtrl.calculateChildElementsList();
                });
            };

            this.resetChildElementsList();

            $scope.$on('b2b-key-reset-child-elements-list', function () {
                selfCtrl.resetChildElementsList();
            });

            this.moveNext = function (indexOfCurrentElem) {
                var indexOfNextElemToFocus = (indexOfCurrentElem + 1) < this.childElementsList.length ? indexOfCurrentElem + 1 : this.childElementsList.length - 1;
                this.moveFocus(indexOfNextElemToFocus);
            };
            this.movePrev = function (indexOfCurrentElem) {
                var indexOfNextElemToFocus = (indexOfCurrentElem - 1) > -1 ? indexOfCurrentElem - 1 : 0;
                this.moveFocus(indexOfNextElemToFocus);
            };
            this.moveFocus = function (indexOfNextElemToFocus) {
                this.childElementsList[indexOfNextElemToFocus].focus();
            };

            this.keyDownEventHandler = function (ev, elem) {
                if (!selfCtrl.childElementsList || selfCtrl.childElementsList.length === 0) {
                    return;
                }

                var indexOfCurrentElem = -1;
                if (angular.isDefined(elem)) {
                    indexOfCurrentElem = Array.prototype.indexOf.call(selfCtrl.childElementsList, elem[0]);
                }


                if (!ev.keyCode) {
                    if (ev.which) {
                        ev.keyCode = ev.which;
                    } else if (ev.charCode) {
                        ev.keyCode = ev.charCode;
                    }
                }

                if (ev.keyCode) {
                    if (selfCtrl.b2bKeyPrev.indexOf(ev.keyCode.toString()) > -1) {
                        selfCtrl.movePrev(indexOfCurrentElem);
                    } else if (selfCtrl.b2bKeyNext.indexOf(ev.keyCode.toString()) > -1) {
                        selfCtrl.moveNext(indexOfCurrentElem);
                    }
                }
            };

            this.keyDownHandler = function (ev, elem) {

                if (this.b2bKeyPrev.indexOf(ev.keyCode.toString()) > -1 || this.b2bKeyNext.indexOf(ev.keyCode.toString()) > -1) {
                    ev.preventDefault();
                    ev.stopPropagation();
                } else {
                    return;
                }

                if (this.b2bKeyLiveWatch) {
                    this.resetChildElementsList()
                        .then(function () {
                            selfCtrl.keyDownEventHandler(ev, elem);
                        });
                } else {
                    this.keyDownEventHandler(ev, elem);
                }
            };
        }],
        link: function (scope, elem, attr, ctrl) {
            $timeout(function () {
                ctrl.b2bKeyPrev = attr.b2bKeyPrev ? attr.b2bKeyPrev.split(',') : b2bUtilitiesConfig.prev.split(',');
                ctrl.b2bKeyNext = attr.b2bKeyNext ? attr.b2bKeyNext.split(',') : b2bUtilitiesConfig.next.split(',');
                ctrl.b2bKeyLiveWatch = angular.isDefined(attr.b2bKeyLiveWatch);
            });

            elem.bind('keydown', function (ev) {
                ctrl.keyDownHandler(ev);
            });
        }
    };
}])

.directive('b2bKeyItem', [function () {
    return {
        restrict: 'A',
        require: '^^b2bKey',
        link: function (scope, elem, attr, parentCtrl) {
            if (angular.isDefined(parentCtrl)) {
                elem.bind('keydown', function (ev) {
                    parentCtrl.keyDownHandler(ev, elem);
                });
            }
        }
    };
}])

.directive('b2bKeyItemRefreshInNgRepeat', [function () {
    return {
        restrict: 'EA',
        require: '^^b2bKey',
        link: function (scope, elem, attr, parentCtrl) {
            if (angular.isDefined(parentCtrl)) {

                var attrToObserve = 'attrToObserve';

                if (attr.b2bKeyItemRefreshInNgRepeat) {
                    attrToObserve = 'b2bKeyItemRefreshInNgRepeat';
                }

                attr.$observe(attrToObserve, function (newVal, oldVal) {
                    if (newVal && newVal !== oldVal) {
                        parentCtrl.resetChildElementsList();
                    }
                });
            }
        }
    };
}]);
/**
 * @ngdoc directive
 * @name Misc.att:boardstrip
 *
 * @description
 *  <file src="src/boardstrip/docs/readme.md" />
 *
 * @usage
 * See demo section
 * @example
    <section id="code">
        <b>HTML + AngularJS</b>
        <example module="b2b.att">
            <file src="src/boardstrip/docs/demo.html" />
            <file src="src/boardstrip/docs/demo.js" />
        </example>
    </section>
 */
angular.module('b2b.att.boardstrip', ['b2b.att.utilities', 'ddh.att.utilities'])
	.constant('BoardStripConfig', {
		'maxVisibleBoards': 4,
		'boardsToScroll': 1,
		/* These parameters are non-configurable and remain unaltered, until there is a change in corresponding CSS */
		'boardLength': 140,
		'boardMargin': 15
	})
	.directive('b2bBoard', [function () {
		return {
			restrict: 'AE',
			replace: true,
			transclude: true,
			require: '^b2bBoardStrip',
			scope: {
				boardIndex: '=',
				boardLabel: '='
			},
			templateUrl: 'template/boardstrip/b2bBoard.html',
			link: function (scope, element, attrs, ctrls) {

				var parentCtrl = ctrls;

				scope.getCurrentIndex = function () {
					return parentCtrl.getCurrentIndex();
				};
				scope.selectBoard = function (boardIndex) {
					if (!isNaN(boardIndex)) {
						parentCtrl.setCurrentIndex(boardIndex);
					}
				};
			}
		};
	}])
	.directive('b2bBoardStrip', ['BoardStripConfig', '$timeout', function (BoardStripConfig, $timeout) {
		return {
			restrict: 'AE',
			replace: true,
			transclude: true,
			require: ['?ngModel', 'b2bBoardStrip'],
			scope: {
				boardsMasterArray: '=',
				onAddBoard: '&?'
			},
			templateUrl: 'template/boardstrip/b2bBoardstrip.html',
			controller: function ($scope) {
				if (!angular.isDefined($scope.boardsMasterArray)) {
					$scope.boardsMasterArray = [];
				}

				this.rectifyMaxVisibleBoards = function () {
					if (this.maxVisibleIndex >= $scope.boardsMasterArray.length) {
						this.maxVisibleIndex = $scope.boardsMasterArray.length - 1;
					}

					if (this.maxVisibleIndex < 0) {
						this.maxVisibleIndex = 0;
					}
				};

				this.resetBoardStrip = function () {
					$scope.currentIndex = 0;

					this.maxVisibleIndex = BoardStripConfig.maxVisibleBoards - 1;
					this.minVisibleIndex = 0;

					this.rectifyMaxVisibleBoards();
				};

				this.getCurrentIndex = function () {
					return $scope.currentIndex;
				};
				this.setCurrentIndex = function (indx) {
					$scope.currentIndex = indx;
				};

				this.getBoardsMasterArrayLength = function () {
					return $scope.boardsMasterArray.length;
				};

				$scope.addBoardPressedFlag = false;
				this.getAddBoardPressedFlag = function () {
					return $scope.addBoardPressedFlag;
				};
				this.setAddBoardPressedFlag = function (booleanValue) {
					$scope.addBoardPressedFlag = booleanValue;
				};

			},
			link: function (scope, element, attrs, ctrls) {

				var ngModelCtrl = ctrls[0];
				var ctrl = ctrls[1];

				var oldTimeout;
				var animationTimeout = 1000;

				var getBoardViewportWidth = function (numberOfVisibleBoards) {
					return numberOfVisibleBoards * (BoardStripConfig.boardLength + BoardStripConfig.boardMargin);
				};
				if (element[0].querySelector(".board-viewport")) {
					angular.element(element[0].querySelector(".board-viewport")).css({
						"width": getBoardViewportWidth(BoardStripConfig.maxVisibleBoards) + "px"
					});
				}

				var getBoardstripContainerWidth = function (totalNumberOfBoards) {
					return totalNumberOfBoards * (BoardStripConfig.boardLength + BoardStripConfig.boardMargin);
				};
				if (element[0].querySelector(".boardstrip-container")) {
					angular.element(element[0].querySelector(".boardstrip-container")).css({
						"width": getBoardstripContainerWidth(ctrl.getBoardsMasterArrayLength()) + "px"
					});
					angular.element(element[0].querySelector(".boardstrip-container")).css({
						"left": "0px"
					});
				}

				var calculateAndGetBoardstripContainerAdjustment = function () {

					var calculatedAdjustmentValue;

					if (ctrl.getBoardsMasterArrayLength() <= BoardStripConfig.maxVisibleBoards) {
						calculatedAdjustmentValue = 0;
					} else {
						calculatedAdjustmentValue = (ctrl.minVisibleIndex * (BoardStripConfig.boardLength + BoardStripConfig.boardMargin)) * -1;
					}

					return calculatedAdjustmentValue;
				};

				var animateBoardstripContainerAdjustment = function (elementToFocusAfterAnimation) {
					var oldContainerAdjustment = angular.element(element[0].querySelector(".boardstrip-container"))[0].style.left;
					var containerAdjustment = calculateAndGetBoardstripContainerAdjustment();
					if (oldContainerAdjustment !== containerAdjustment + 'px') {
						angular.element(element[0].querySelector(".boardstrip-container")).css({
							"left": containerAdjustment + "px"
						});

						$timeout.cancel(oldTimeout);
						oldTimeout = $timeout(function () {
							elementToFocusAfterAnimation.focus();
						}, animationTimeout);
					} else {
						elementToFocusAfterAnimation.focus();
					}
				};

				var updateBoardsTabIndex = function (boardArray, minViewIndex, maxViewIndex) {
					for (var i = 0; i < boardArray.length; i++) {
						angular.element(boardArray[i]).attr('tabindex', '-1');
					}
					for (var j = minViewIndex; j <= maxViewIndex; j++) {
						angular.element(boardArray[j]).attr('tabindex', '0');
					}
				};

				$timeout(function () {
					var currentBoardArray = element[0].querySelectorAll('[b2b-board]');
					updateBoardsTabIndex(currentBoardArray, ctrl.minVisibleIndex, ctrl.maxVisibleIndex);
				});

				scope.$watchCollection('boardsMasterArray', function (newVal, oldVal) {
					if (newVal !== oldVal) {
						/* When a board is removed */
						if (newVal.length < oldVal.length) {
							ctrl.resetBoardStrip();
							$timeout(function () {

								var currentBoardArray = element[0].querySelectorAll('[b2b-board]');
								if (currentBoardArray.length !== 0) {
									animateBoardstripContainerAdjustment(currentBoardArray[0]);
								} else {
									element[0].querySelector('div.boardstrip-item--add').focus();
								}

								angular.element(element[0].querySelector(".boardstrip-container")).css({
									"width": getBoardstripContainerWidth(ctrl.getBoardsMasterArrayLength()) + "px"
								});
								/* Update tabindecies to ensure keyboard navigation behaves correctly */
								updateBoardsTabIndex(currentBoardArray, ctrl.minVisibleIndex, ctrl.maxVisibleIndex);
							});
						}
						/* When a board is added */
						else {
							if (ctrl.getAddBoardPressedFlag()) {
								ctrl.maxVisibleIndex = ctrl.getBoardsMasterArrayLength() - 1;
								ctrl.minVisibleIndex = Math.max(ctrl.maxVisibleIndex - BoardStripConfig.maxVisibleBoards + 1, 0);

								ctrl.setCurrentIndex(ctrl.maxVisibleIndex);

								$timeout(function () {
									angular.element(element[0].querySelector(".boardstrip-container")).css({
										"width": getBoardstripContainerWidth(ctrl.getBoardsMasterArrayLength()) + "px"
									});

									var currentBoardArray = element[0].querySelectorAll('[b2b-board]');
									animateBoardstripContainerAdjustment(currentBoardArray[currentBoardArray.length - 1]);
									/* Update tabindecies to ensure keyboard navigation behaves correctly */
									updateBoardsTabIndex(currentBoardArray, ctrl.minVisibleIndex, ctrl.maxVisibleIndex);
								});
							} else {
								if (ctrl.minVisibleIndex === 0 && ctrl.getBoardsMasterArrayLength() < BoardStripConfig.maxVisibleBoards + 1) {
									ctrl.maxVisibleIndex = ctrl.getBoardsMasterArrayLength() - 1;
									ctrl.rectifyMaxVisibleBoards();
								}

								$timeout(function () {
									angular.element(element[0].querySelector(".boardstrip-container")).css({
										"width": getBoardstripContainerWidth(ctrl.getBoardsMasterArrayLength()) + "px"
									});

									var currentBoardArray = element[0].querySelectorAll('[b2b-board]');
									/* Update tabindecies to ensure keyboard navigation behaves correctly */
									updateBoardsTabIndex(currentBoardArray, ctrl.minVisibleIndex, ctrl.maxVisibleIndex);
								});
							}

							ctrl.setAddBoardPressedFlag(false);
						}
					}
				});

				scope.nextBoard = function () {
					ctrl.maxVisibleIndex += BoardStripConfig.boardsToScroll;
					ctrl.rectifyMaxVisibleBoards();
					ctrl.minVisibleIndex = ctrl.maxVisibleIndex - (BoardStripConfig.maxVisibleBoards - 1);

					$timeout.cancel(oldTimeout);
					angular.element(element[0].querySelector(".boardstrip-container")).css({
						"left": calculateAndGetBoardstripContainerAdjustment() + "px"
					});

					$timeout(function () {
						var currentBoardArray = element[0].querySelectorAll('[b2b-board]');

						/* Remove tabindex from non-visible boards */
						updateBoardsTabIndex(currentBoardArray, ctrl.minVisibleIndex, ctrl.maxVisibleIndex);

						if (!(scope.isNextBoard())) {
							try {
								currentBoardArray[currentBoardArray.length - 1].focus();
							} catch (e) { /* IE8 may throw exception */ }
						}
					}, animationTimeout);
				};
				scope.prevBoard = function () {

					ctrl.minVisibleIndex -= BoardStripConfig.boardsToScroll;
					if (ctrl.minVisibleIndex < 0) {
						ctrl.minVisibleIndex = 0;
					}

					ctrl.maxVisibleIndex = ctrl.minVisibleIndex + BoardStripConfig.maxVisibleBoards - 1;
					ctrl.rectifyMaxVisibleBoards();

					$timeout.cancel(oldTimeout);
					angular.element(element[0].querySelector(".boardstrip-container")).css({
						"left": calculateAndGetBoardstripContainerAdjustment() + "px"
					});

					$timeout(function () {
						var currentBoardArray = element[0].querySelectorAll('[b2b-board]');

						/* Remove tabindex from non-visible boards */
						updateBoardsTabIndex(currentBoardArray, ctrl.minVisibleIndex, ctrl.maxVisibleIndex);

						if (ctrl.minVisibleIndex === 0) {
							try {
								element[0].querySelector('div.boardstrip-item--add').focus();
							} catch (e) { /* IE8 may throw exception */ }
						}
					});
				};

				scope.isPrevBoard = function () {
					return (ctrl.minVisibleIndex > 0);
				};
				scope.isNextBoard = function () {
					return (ctrl.getBoardsMasterArrayLength() - 1 > ctrl.maxVisibleIndex);
				};

				ngModelCtrl.$render = function () {
					if (ngModelCtrl.$viewValue || ngModelCtrl.$viewValue === 0) {
						var newCurrentIndex = ngModelCtrl.$viewValue;

						if (!(newCurrentIndex = parseInt(newCurrentIndex, 10))) {
							newCurrentIndex = 0;
						}

						if (newCurrentIndex <= 0) {
							ctrl.resetBoardStrip();
							newCurrentIndex = 0;

							var currentBoardArray = element[0].querySelectorAll('[b2b-board]');
							if (currentBoardArray.length !== 0) {
								animateBoardstripContainerAdjustment(currentBoardArray[0]);
							} else {
								element[0].querySelector('div.boardstrip-item--add').focus();
							}
							/* Update tabindecies to ensure keyboard navigation behaves correctly */
							updateBoardsTabIndex(currentBoardArray, ctrl.minVisibleIndex, ctrl.maxVisibleIndex);
						} else if (newCurrentIndex >= ctrl.getBoardsMasterArrayLength()) {
							ctrl.maxVisibleIndex = ctrl.getBoardsMasterArrayLength() - 1;
							ctrl.rectifyMaxVisibleBoards();
							ctrl.minVisibleIndex = Math.max(ctrl.maxVisibleIndex - BoardStripConfig.maxVisibleBoards + 1, 0);

							newCurrentIndex = ctrl.maxVisibleIndex;

							$timeout(function () {
								var currentBoardArray = element[0].querySelectorAll('[b2b-board]');
								animateBoardstripContainerAdjustment(currentBoardArray[newCurrentIndex]);
								/* Update tabindecies to ensure keyboard navigation behaves correctly */
								updateBoardsTabIndex(currentBoardArray, ctrl.minVisibleIndex, ctrl.maxVisibleIndex);
							});
						} else {

							if (!(newCurrentIndex >= ctrl.minVisibleIndex && newCurrentIndex <= ctrl.maxVisibleIndex)) {
								ctrl.minVisibleIndex = newCurrentIndex;
								ctrl.maxVisibleIndex = ctrl.minVisibleIndex + BoardStripConfig.maxVisibleBoards - 1;
								ctrl.rectifyMaxVisibleBoards();

								if (ctrl.getBoardsMasterArrayLength() < BoardStripConfig.maxVisibleBoards) {
									ctrl.minVisibleIndex = 0;
								} else {
									ctrl.minVisibleIndex = Math.max(ctrl.maxVisibleIndex - BoardStripConfig.maxVisibleBoards + 1, 0);
								}

								$timeout(function () {
									var currentBoardArray = element[0].querySelectorAll('[b2b-board]');
									animateBoardstripContainerAdjustment(currentBoardArray[newCurrentIndex]);
									/* Update tabindecies to ensure keyboard navigation behaves correctly */
									updateBoardsTabIndex(currentBoardArray, ctrl.minVisibleIndex, ctrl.maxVisibleIndex);
								});
							}
						}
						scope.currentIndex = newCurrentIndex;
						ngModelCtrl.$setViewValue(newCurrentIndex);
					} else {
						ctrl.resetBoardStrip();
						ngModelCtrl.$setViewValue(0);
					}
				};

				scope.$watch('currentIndex', function (newVal, oldVal) {
					if (newVal !== oldVal && ngModelCtrl && ngModelCtrl.$viewValue !== newVal) {
						ngModelCtrl.$setViewValue(newVal);
					}
				});
			}
		};
	}])
	.directive('b2bAddBoard', ['BoardStripConfig', '$parse', function (BoardStripConfig, $parse) {
		return {
			restrict: 'AE',
			replace: true,
			require: '^b2bBoardStrip',
			scope: {
				onAddBoard: '&?'
			},
			templateUrl: 'template/boardstrip/b2bAddBoard.html',
			link: function (scope, element, attrs, ctrl) {
				scope.addBoard = function () {
					if (attrs['onAddBoard']) {
						scope.onAddBoard = $parse(scope.onAddBoard);
						scope.onAddBoard();
						ctrl.setAddBoardPressedFlag(true);
					}
				};
			}
		};
	}])
	.directive('b2bBoardNavigation', ['keymap', 'events', function (keymap, events) {
		return {
			restrict: 'AE',
			link: function (scope, elem) {

				var prevElem = keymap.KEY.LEFT;
				var nextElem = keymap.KEY.RIGHT;

				elem.bind('keydown', function (ev) {

					if (!(ev.keyCode)) {
						ev.keyCode = ev.which;
					}

					switch (ev.keyCode) {
					case nextElem:
						events.preventDefault(ev);
						events.stopPropagation(ev);

						if (elem[0].nextElementSibling && parseInt(angular.element(elem[0].nextElementSibling).attr('tabindex')) >= 0) {
							angular.element(elem[0])[0].nextElementSibling.focus();
						} else {
							/* IE8 fix */
							var el = angular.element(elem[0])[0];
							do {
								if (el.nextSibling) {
									el = el.nextSibling;
								} else {
									break;
								}
							} while (el && el.tagName !== 'LI');

							if (el.tagName && el.tagName === 'LI' && parseInt(angular.element(el).attr('tabindex')) >= 0) {
								el.focus();
							}
						}

						break;
					case prevElem:
						events.preventDefault(ev);
						events.stopPropagation(ev);

						if (elem[0].previousElementSibling && parseInt(angular.element(elem[0].previousElementSibling).attr('tabindex')) >= 0) {
							angular.element(elem[0])[0].previousElementSibling.focus();
						} else {
							/* IE8 fix */
							var el1 = angular.element(elem[0])[0];
							do {
								if (el1.previousSibling) {
									el1 = el1.previousSibling;
								} else {
									break;
								}
							} while (el1 && el1.tagName !== 'LI');

							if (el1.tagName && el1.tagName === 'LI' && parseInt(angular.element(el1).attr('tabindex')) >= 0) {
								el1.focus();
							}
						}
						break;
					default:
						break;
					}
				});
			}
		};
	}]);
/**
 * @ngdoc directive
 * @name Misc.att:coachmark
 *
 * @description
 * <file src="src/coachmark/docs/readme.md" />
 *
 * @usage
 *
<button b2b-coachmark start-coachmark-callback="startCoachmark()" end-coachmark-callback="endCoachmark()" action-coachmark-callback="actionCoachmark(action)" coachmark-index="coachmarkIndex" coachmarks="coachmarkElements" id="coachmark0" class="btn btn-alt">Initiate tour</button>

 * @example
    <section id="code">   
        <b>HTML + AngularJS</b>
        <example module="b2b.att">
            <file src="src/coachmark/docs/demo.html" />
            <file src="src/coachmark/docs/demo.js" />
        </example>
    </section>
 */

angular.module('b2b.att.coachmark', ['ddh.att.utilities','ddh.att.position'])
    	
	.directive('b2bCoachmark', ['$document', '$compile', '$position', '$timeout', function($document, $compile, $position, $timeout) {
        return {
            restrict: 'A',
			 scope: {
				coachmarks: '=',
				coachmarkIndex: '=',
				startCoachmarkCallback: '&',
				endCoachmarkCallback: '&',
				actionCoachmarkCallback: '&'
			},
            link: function (scope, element, attrs, ctrl) {
				var coachmarkItems = scope.coachmarks;
				var body = $document.find('body').eq(0);
				var coackmarkJqContainer;
				var coackmarkContainer;
				var coachMarkElement;
				var backdropjqLiteEl;
				var coachmarkHighlight;
				var initaitedCoachmark = false;
				scope.coackmarkElPos ={
					'top':'',
					'left':''
				};
				
				scope.currentCoachmark = {};
				
				
                var coachmarkBackdrop = function(){
					backdropjqLiteEl = angular.element('<div class="modal-backdrop fade in hidden-by-modal"></div>');
					body.append(backdropjqLiteEl);
				};
				
				
				scope.closeButtonFocus = function(){
					if(document.getElementsByClassName('b2b-coachmark-header').length >0){
						document.getElementsByClassName('b2b-coachmark-header')[0].scrollLeft = 0;
						document.getElementsByClassName('b2b-coachmark-header')[0].scrollTop = 0;
					}
				}

				scope.actionCoachmark = function(action){
					scope.actionCoachmarkCallback({
						'action':action
					})
				};
				
				scope.closeCoachmark = function(){
					initaitedCoachmark = false;
					backdropjqLiteEl.remove();	
					coackmarkContainer.remove();
					coachmarkHighlight.remove();
					if(coachMarkElement !== undefined && coachMarkElement !==""){
						coachMarkElement.removeClass('b2b-coachmark-label')
					}
					if (angular.isFunction(scope.endCoachmarkCallback)){
						scope.endCoachmarkCallback();	
					}
					element[0].focus();
				}
				
				function showCoachmark(targetElement) {
					scope.currentCoachmark = targetElement;
					if(coachMarkElement !== undefined && coachMarkElement !==""){
						coachMarkElement.removeClass('b2b-coachmark-label')
						coackmarkContainer.remove();
						coachmarkHighlight.remove();
					}
					coachMarkElement = angular.element(document.querySelector(targetElement.elementId));
					coachMarkElement.addClass('b2b-coachmark-label');
					var	elementPosition = $position.offset(coachMarkElement);
					
					coachmarkHighlight = angular.element('<div class="b2b-coachmark-highlight"></div>');
					coachmarkHighlight.css({
						'width': (elementPosition.width + 20) +'px',
						'top': (elementPosition.top -10) + 'px',
						'left': (elementPosition.left - 10) + 'px',
						'height': (elementPosition.height + 20) +'px'
					});	
					body.append(coachmarkHighlight);
					
					scope.coackmarkElPos.top = (elementPosition.top + elementPosition.height+32) + 'px';
					scope.coackmarkElPos.left = (elementPosition.left - 158 + elementPosition.width / 2 ) + 'px';
					coackmarkJqContainer = angular.element('<div b2b-coachmark-container b2b-trap-focus-inside-element="true"></div>');
					coackmarkContainer = $compile(coackmarkJqContainer)(scope);
					body.append(coackmarkContainer);
					$timeout(function () {
						/* At index zero, there will be close button, focus the next button */
						if(coackmarkContainer.find('button').length > 1){
							coackmarkContainer.find('button')[coackmarkContainer.find('button').length-1].focus();
						} else{
							coackmarkContainer[0].focus();
						}
					}, 200);

					// We need a slight offset to show the lightboxed item
					TweenLite.to(window, 2, {scrollTo:{x: (scope.coackmarkElPos.left.split('px')[0]-100), y: scope.coackmarkElPos.top.split('px')[0]-100}});
				}
				
				element.bind('click', function (e) {
					initaitedCoachmark = true;
					if(scope.coachmarkIndex === -1 || scope.coachmarkIndex >= coachmarkItems.length ){
						scope.coachmarkIndex = 0;
					}
					scope.$watch('coachmarkIndex', function () {
						if(initaitedCoachmark === true){
							if(scope.coachmarkIndex === -1 || scope.coachmarkIndex >= coachmarkItems.length ){
								scope.closeCoachmark();
							}else{
								showCoachmark(coachmarkItems[scope.coachmarkIndex]);
							}
						}
					});
					coachmarkBackdrop();
					showCoachmark(coachmarkItems[scope.coachmarkIndex]);
					if (angular.isFunction(scope.startCoachmarkCallback)){
						scope.startCoachmarkCallback();	
					}
					$document.bind('keydown', function (evt) {
						if (evt.which === 27 && initaitedCoachmark) {
							scope.closeCoachmark();	
						}
					});
				});

            }
        };
    }])
	.directive('b2bCoachmarkContainer', ['$document', '$position', function($document, $position) {
		return {
			restrict: 'A',
			transclude: true,
            replace: true,
			templateUrl: 'template/coachmark/coachmark.html',
			link: function (scope, element, attrs, ctrl) {
							
			}
		};	
	}]);
	
/** 
 * @ngdoc directive 
 * @name Template.att:Configuration Section 
 * 
 * @description 
 *  <file src="src/configurationSection/docs/readme.md" /> 
 * 
 * @example 
 *  <section id="code"> 
        <b>HTML + AngularJS</b> 
        <example module="b2b.att"> 
            <file src="src/configurationSection/docs/demo.html" /> 
            <file src="src/configurationSection/docs/demo.js" /> 
       </example> 
    </section>    
 * 
 */
angular.module('b2b.att.configurationSection', [])
  
/**
 * @ngdoc directive
 * @name Buttons, links & UI controls.att:Directory Listing
 *
 * @description
 *  <file src="src/directoryListing/docs/readme.md" />
 *
 * @usage
 * <div b2b-directory-listing data1="listDataSource" data2="listDataDestination"></div>
 * @example
    <section id="code">
        <b>HTML + AngularJS</b>
        <example module="b2b.att">
            <file src="src/directoryListing/docs/demo.html" />
            <file src="src/directoryListing/docs/demo.js" />
        </example>
    </section>
 */
angular.module('b2b.att.directoryListing', ['ddh.att.utilities'])
    .directive('b2bDirectoryListing', function ($log) {
        return {
            restrict: 'A',
            replace: true,
            transclude: true,
            scope: {
                data1: '=data1',
                data2: '=data2',
                leftLabel: '@',
                rightLabel: '@', 
                leftHeading: '@',
                rightHeading: '@'

            },
            templateUrl: 'template/directoryListing/directoryListing.html',
            link: function (scope, elm, attrs) {
                $log.warn("This directive will be deprecated from the v0.6.0");
                scope.$watch('results1', function(val){
                    if((angular.isDefined(val)) && (val.length > 0)){
                        scope.hideAddall = false;
                    } 
                    else{
                        scope.hideAddall = true;
                    }
                });
                scope.$watch('results2', function(val){
                    if((angular.isDefined(val)) && (val.length > 0) ){
                        scope.hideRemoveall = false;
                        }
                    else{
                        scope.hideRemoveall = true;
                    }
                });
                scope.$watch('data1', function(val){
                    if((angular.isDefined(val)) && (val.length > 0)){
                        scope.hideLeftSearch = false;
                    }
                    else{
                        scope.hideLeftSearch = true;
                    }
                });
                scope.$watch('data2', function(val){
                    if((angular.isDefined(val)) && (val.length > 0)){
                        scope.hideRightSearch = false;
                    }
                    else{
                        scope.hideRightSearch = true;
                    }
                });        
                scope.$watch('multipleSelect1', function(val){
                    if((angular.isDefined(val)) && (val.length > 0)){
                        if(val.length===1 && val!== "No results found...")
                            scope.hideAdd = false;
                    }
                    else{
                        scope.hideAdd = true;
                    }
                });
                scope.$watch('multipleSelect2', function(val){
                    if((angular.isDefined(val)) && (val.length > 0)){
                        if(val.length===1 && val!== "No results found...")
                            scope.hideRemove = false;
                    }
                    else{
                        scope.hideRemove = true;
                    }
                });
                scope.moveAll = function (direction) {
                    if (direction === 'right') {
                        moveTo(scope,scope.data1,scope.results1,"rightAll");
                    } else if (direction === 'left') {
                        moveTo(scope,scope.data2,scope.results2,"leftAll");
                    }
                    scope.searchStringLeft = '';
                    scope.searchStringRight = '';
                };
                scope.moveSelected = function (direction) {
                    scope.hideAdd = true;
                    scope.hideRemove = true;
                    if (direction === 'right') {
                        moveTo(scope,scope.data1,scope.multipleSelect1,"right");
                    } else if (direction === 'left') {
                        moveTo(scope,scope.data2,scope.multipleSelect2,"left");
                    }
                    scope.searchStringLeft = '';
                    scope.searchStringRight = '';
                };
                scope.$watch('searchStringLeft', function(val){
                    if((angular.isDefined(val)) && (val.length > 0)){
                        scope.searchLeftVal = val.toString().replace(/[- )(]/g,'');
                        
                    }
                    else{
                        scope.searchLeftVal = '';
                    }
                });
                scope.$watch('searchStringRight', function(val){
                    if((angular.isDefined(val)) && (val.length > 0)){
                        scope.searchRightVal = val.toString().replace(/[- )(]/g,'');
                        
                    }
                    else{
                        scope.searchRightVal = '';
                    }
                });
                scope.formatPhoneNumber = function(inputNumber) {
                     var numbers = inputNumber.toString().replace(/\D/g, ''),
                     char = { 3: '-', 6: '-' };
                     var outputNumber= '';
                     for (var i = 0; i < numbers.length; i++) {
                        outputNumber += (char[i] || '') + numbers[i];
                     }
                     return outputNumber;
                };

                scope.leftLabel     = (attrs.leftLabel !== undefined || attrs.leftLabel === '') ?  attrs.leftLabel : "Search by telephone number" ;
                scope.rightLabel    = (attrs.rightLabel !== undefined || attrs.rightLabel === '') ? attrs.rightLabel : "Search by telephone number" ; 
                scope.leftHeading   = (attrs.leftHeading !== undefined || attrs.leftHeading === '') ?  attrs.leftHeading : "Search by telephone number" ;
                scope.rightHeading  = (attrs.rightHeading !== undefined || attrs.rightHeading === '') ?  attrs.rightHeading : "Search by telephone number" ;

            }
        };
    });
/* Function formatJson creates key - value pair in the json format being used by scope data
 * Parameter    :   Takes an array of telephone no.s
 * Returns      :   JSON content in string format
 */
function formatJson(str) {
    var jsonstr = '[';
    var counter = 0;
    angular.forEach(str, function (key, value) {
        counter++;

        if (counter === str.length)
            jsonstr = jsonstr + '{"title":"' + key + '","selected":' + false + '}';
        else if (str.length > 1)
            jsonstr = jsonstr + '{"title":"' + key + '","selected":' + false + '},';
        else
            jsonstr = '{"title":"' + key + '","selected":' + false + '}';
    });
    jsonstr = jsonstr + ']';
    return jsonstr;
}
function moveTo(scope,data,data2,mode ){
    /* retrieves an array of telephone no.s from left */
        var arr = data.map(function (el) {
            return el.title;
        });
        
        var mainArray = data;
        jsonString = formatJson(data2);
        
    

        var arr2 = data2;
        if(mode==="rightAll" || mode==="leftAll")
            arr2 = data2.map(function (el) {
            return el.title;
        }); 

        var resultArray = [];
        /* Subtract the selected entries from the array left side */
        resultArray = data.filter(function (el) {
            return arr2.indexOf(el.title) < 0;
        });
        
        var resultArray2 = [];
        /* Subtract the selected entries from the array left side */
        resultArray2 = data.filter(function (el) {
            return arr2.indexOf(el.title) >= 0;
        });

        if(mode==="right"){ 
            
            scope.data1 = resultArray;
            scope.data2 = scope.data2.concat(resultArray2);
        }
        if(mode==="left"){
             scope.data1 = scope.data1.concat(resultArray2);
             scope.data2 = resultArray;
        }
        if(mode==="rightAll"){
            scope.hideAdd = true;
            scope.data1 = resultArray;
            angular.forEach(resultArray2, function(value, key) {
                if(value.disabledField !== true){
                    scope.data2 = scope.data2.concat(value);
                } else {
                     scope.data1 =  scope.data1.concat(value)
                }
                        
            });
            
        }
        if(mode==="leftAll"){
            scope.hideRemove = true;
            scope.data2 = resultArray;
            scope.data1 = scope.data1.concat(resultArray2);
        }
        scope.multipleSelect1 = '';
        scope.multipleSelect2 = '';
        scope.searchLeftVal = '';
        scope.searchRightVal = '';
}
/** 
 * @ngdoc directive 
 * @name Template.att:Directory Listing 
 * 
 * @description 
 *  <file src="src/directoryListingTemplate/docs/readme.md" /> 
 * 
 * @example 
 *  <section id="code"> 
        <b>HTML + AngularJS</b> 
        <example module="b2b.att"> 
            <file src="src/directoryListingTemplate/docs/demo.html" /> 
            <file src="src/directoryListingTemplate/docs/demo.js" /> 
       </example> 
    </section>    
 * 
 */
angular.module('b2b.att.directoryListingTemplate', [])
  
/**
 * @ngdoc directive
 * @name Forms.att:File Upload
 *
 * @description
 *  <file src="src/fileUpload/docs/readme.md" />
 *
 * @usage
 * 
<form id="dragDropFile">		
    <div b2b-file-drop file-model="fileModel" on-drop="triggerFileUpload()"  align="center">
        <p>
            <br>To upload a file, drag & drop it here or 
			<span b2b-file-link file-model="fileModel" on-file-select="triggerFileUpload()" >
				click here to select from your computer.
			</span><br>
        </p>
    </div>
</form>
 *
 * @example
 *  <section id="code">
        <example module="b2b.att">
            <file src="src/fileUpload/docs/demo.html" />
            <file src="src/fileUpload/docs/demo.js" />
       </example>
    </section>
 *
 */
angular.module('b2b.att.fileUpload', ['ddh.att.utilities'])
    .directive('b2bFileDrop', [function() {
            return {
                restrict: 'EA',
                scope: {
                    fileModel: '=',
                    onDrop: '&'
                },
				controller: ['$scope', '$attrs', function($scope, $attrs) {
                    this.onDrop = $scope.onDrop;
                }],
                link: function(scope, element) {
                    element.addClass('b2b-dragdrop');
                    element.bind(
                        'dragover',
                        function(e) {
                            if (e.originalEvent) {
                                e.dataTransfer = e.originalEvent.dataTransfer;
                            }
                            e.dataTransfer.dropEffect = 'move';
                            // allows us to drop
                            if (e.preventDefault) {
                                e.preventDefault();
                            }
                            element.addClass('b2b-dragdrop-over');
                            return false;
                        }
                    );
                    element.bind(
                        'dragenter',
                        function(e) {
                            // allows us to drop
                            if (e.preventDefault) {
                                e.preventDefault();
                            }
                            element.addClass('b2b-dragdrop-over');
                            return false;
                        }
                    );
                    element.bind(
                        'dragleave',
                        function() {
                            element.removeClass('b2b-dragdrop-over');
                            return false;
                        }
                    );
                    element.bind(
                        'drop',
                        function(e) {
                            // Stops some browsers from redirecting.
                            if (e.preventDefault) {
                                e.preventDefault();
                            }
                            if (e.stopPropagation) {
                                e.stopPropagation();
                            }
                            if (e.originalEvent) {
                                e.dataTransfer = e.originalEvent.dataTransfer;
                            }
                            element.removeClass('b2b-dragdrop-over');
                            if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {
                                scope.fileModel = e.dataTransfer.files[0];
                                scope.$apply();
                                if (angular.isFunction(scope.onDrop)) {
                                    scope.onDrop();
                                }
                            }
                            return false;
                        }
                    );
                }
            };
        }])
        .directive('b2bFileLink', [function() {
            return {
                restrict: 'EA',
                require: '^?b2bFileDrop',
                replace: true,
                transclude: true,
                templateUrl: 'template/fileUpload/fileUpload.html',
                scope: {
                    fileModel: '=?',
                    onFileSelect: '&'
                },
                controller: ['$scope', function($scope) {
                    this.setFileModel = function(fileModel) {
                        if ($scope.takeFileModelFromParent) {
                            $scope.$parent.fileModel = fileModel;
                            $scope.$parent.$apply();
                        } else {
                            $scope.fileModel = fileModel;
                            $scope.$apply();
                        }
                    };
                    this.callbackFunction = function() {
                        if (angular.isFunction($scope.onFileSelect)) {
                            $scope.onFileSelect();
                        }
                    };
		
                }],
                link: function(scope, element, attr, b2bFileDropCtrl) {
                    scope.takeFileModelFromParent = false;
                    if (!(attr.fileModel) && b2bFileDropCtrl) {
                        scope.takeFileModelFromParent = true;
                    }
                    if (!(attr.onFileSelect) && b2bFileDropCtrl) {
                        scope.onFileSelect = b2bFileDropCtrl.onDrop;
                    }
                }
            };
        }])
        .directive('b2bFileChange', ['$log', '$rootScope', function($log, $rootScope) {
            return {
                restrict: 'A',
                require: '^b2bFileLink',
                link: function(scope, element, attr, b2bFileLinkCtrl) {
                    element.bind('change', changeFileModel);

                    function changeFileModel(e) {
                        if (e.target.files && e.target.files.length > 0) {
                            b2bFileLinkCtrl.setFileModel(e.target.files[0]);
                            b2bFileLinkCtrl.callbackFunction();
                        } else {
                            var strFileName = e.target.value;
                            try {
                                var objFSO = new ActiveXObject("Scripting.FileSystemObject");
                                b2bFileLinkCtrl.setFileModel(objFSO.getFile(strFileName));
                                b2bFileLinkCtrl.callbackFunction();
                            } catch (e) {
                                var errMsg = "There was an issue uploading " + strFileName + ". Please try again.";
                                $log.error(errMsg);
                                $rootScope.$broadcast('b2b-file-link-failure', errMsg);
                            }
                        }
                    }
                }
            };
        }]);
/**
 * @ngdoc directive
 * @name Messages, modals & alerts.att:flyout
 *
 * @description
 *  <file src="src/flyout/docs/readme.md" />
 *
 * @usage
 * 
<b2b-flyout>
    <img b2b-flyout-toggler class="b2b-flyout-icon" src="style/images/icon-primary-flyout.png" ddh-accessibility-click="13,32" tabindex="0" role="button" />
    <b2b-flyout-content horizontal-placement="left" vertical-placement="below">
        <!-- Flyout content -->
    </b2b-flyout-content>
</b2b-flyout>

-- OR --

<b2b-flyout>
    <button b2b-flyout-toggler class="b2b-flyout-icon" ddh-accessibility-click="13,32" tabindex="0" role="button">click to open flyout</button>
    <b2b-flyout-content horizontal-placement="center" vertical-placement="below" flyout-style="width:400px;">
        <!-- Flyout content -->
    </b2b-flyout-content>
</b2b-flyout>
 *
 * @example
 *  <section id="code">
        <example module="b2b.att">
            <file src="src/flyout/docs/demo.html" />
            <file src="src/flyout/docs/demo.js" />
       </example>
    </section>
 *
 */
angular.module('b2b.att.flyout', ['ddh.att.utilities', 'ddh.att.position'])
    .directive('b2bFlyout', [function () {
        return {
            restrict: 'EA',
            transclude: true,
            templateUrl: 'template/flyout/flyout.html',
            controller: ['$scope', '$element', '$attrs', function (scope, elem, attr) {
                scope.flyoutOpened = false;
                var contentScope = '';
                var togglerScope = '';
                this.registerContentScope = function (scp) {
                    contentScope = scp;
                };
                this.registerTogglerScope = function (scp) {
                    togglerScope = scp;
                };

                this.toggleFlyoutState = function () {
                    if (contentScope) {
                        contentScope.toggleFlyout();
                    }
                };
                this.getTogglerDimensions = function () {
                    return togglerScope.getTogglerDimensions();
                }
                this.setTogglerFocus = function () {
                    return togglerScope.setTogglerFocus();
                }

                this.closeFlyout = function (e) {
                    contentScope.closeFromChild(e);
                };
                this.gotFocus = function () {
                    contentScope.gotFocus();
                };

                this.updateAriaModel = function (val) {
                    scope.flyoutOpened = val;
                };
            }],
            link: function (scope, element, attrs, ctrl) {

            }
        };
    }])
    .directive('b2bFlyoutToggler', [function () {
        return {
            restrict: 'A',
            require: '^b2bFlyout',
            link: function (scope, element, attrs, ctrl) {
                element.bind('click', function (e) {
                    ctrl.toggleFlyoutState();
                });

                scope.getTogglerDimensions = function () {
                    return element[0].getBoundingClientRect();
                }

                scope.setTogglerFocus = function () {
                    element[0].focus();
                }

                ctrl.registerTogglerScope(scope);
            }
        };
    }])
    .directive('b2bFlyoutContent', ['$position', '$timeout', '$documentBind', '$isElement', '$document', function ($position, $timeout, $documentBind, $isElement, $document) {
        return {
            restrict: 'EA',
            transclude: true,
            replace: true,
            require: '^b2bFlyout',
            scope: {
                horizontalPlacement: '@',
                verticalPlacement: '@',
                flyoutStyle: '@',
                flyoutTitle: '@'
            },
            templateUrl: 'template/flyout/flyoutContent.html',
            link: function (scope, element, attrs, ctrl) {
                var flyoutStyleArray, eachCssProperty, cssPropertyKey, cssPropertyVal, temp;
                scope.openFlyout = false;
                if (!scope.horizontalPlacement) {
                    scope.horizontalPlacement = 'center';
                }
                if (!scope.verticalPlacement) {
                    scope.verticalPlacement = 'below';
                }

                scope.toggleFlyout = function () {

                    scope.openFlyout = !scope.openFlyout;

                    if (scope.openFlyout) {

                        if (angular.isDefined(scope.flyoutStyle) && scope.flyoutStyle != "") {
                            flyoutStyleArray = scope.flyoutStyle.split(";");
                            for (i = 0; i < flyoutStyleArray.length; i++) {
                                eachCssProperty = flyoutStyleArray[i].split(":");
                                if (eachCssProperty.length == 2) {
                                    cssPropertyKey = eachCssProperty[0].trim();
                                    cssPropertyVal = eachCssProperty[1].trim();
                                    angular.element(element[0])[0].style[cssPropertyKey] = cssPropertyVal;
                                }
                            }
                        }

                        angular.element(element[0]).css({
                            'opacity': 0,
                            'display': 'block'
                        });

                        var flyoutIcons = angular.element(document.querySelectorAll(".b2b-flyout-icon"));
                        angular.forEach(flyoutIcons, function (elm) {
                            angular.element(elm)[0].blur();
                        });

                        $timeout(function () {
                            ctrl.setTogglerFocus();

                            var togglerDimensions = ctrl.getTogglerDimensions();
                            var flyoutDimensions = element[0].getBoundingClientRect();

                            switch (scope.horizontalPlacement) {
                            case "left":
                                angular.element(element[0]).css({
                                    'left': ((togglerDimensions.width / 2) - 26) + 'px'
                                });
                                break;
                            case "right":
                                angular.element(element[0]).css({
                                    'right': ((togglerDimensions.width / 2) - 23) + 'px'
                                });
                                break;
                            default:
                                var marginLeft = (togglerDimensions.width / 2) - (flyoutDimensions.width / 2) - 8;
                                angular.element(element[0]).css({
                                    'margin-left': marginLeft + 'px'
                                });
                            }

                            switch (scope.verticalPlacement) {
                            case "above":
                                angular.element(element[0]).css({
                                    'top': -(flyoutDimensions.height + 13) + 'px'
                                });
                                break;
                            default:
                                angular.element(element[0]).css({
                                    'top': (togglerDimensions.height + 13) + 'px'
                                });
                            }

                            angular.element(element[0]).css({
                                'opacity': 1
                            });
                        }, 100);
                    } else {
                        scope.hideFlyout();
                    }
                };

                scope.gotFocus = function () {
                    scope.openFlyout = false;
                    scope.hideFlyout();
                    ctrl.setTogglerFocus();
                    scope.$apply();
                };

                scope.closeFromChild = function (e) {
                    scope.openFlyout = false;
                    scope.hideFlyout();
                    ctrl.setTogglerFocus();
                    scope.$apply();
                };

                scope.hideFlyout = function () {
                    angular.element(element[0]).css({
                        'opacity': 0,
                        'display': 'none'
                    });
                };

                scope.closeFlyout = function (e) {
                    var isElement = $isElement(angular.element(e.target), element, $document);
                    if ((e.type === "keydown" && e.which === 27) || (e.type === "click" && !isElement)) {
                        scope.openFlyout = false;
                        scope.hideFlyout();
                        ctrl.setTogglerFocus();
                        scope.$apply();
                    }
                };

                scope.$watch('openFlyout', function () {
                    ctrl.updateAriaModel(scope.openFlyout);
                });

                $documentBind.click('openFlyout', scope.closeFlyout, scope);
                $documentBind.event('keydown', 'openFlyout', scope.closeFlyout, scope);
                ctrl.registerContentScope(scope);
            }
        };
    }])
    .directive('b2bCloseFlyout', [function () {
        return {
            restrict: 'A',
            require: '^b2bFlyout',
            scope: {
                closeFlyout: '&'
            },
            link: function (scope, element, attrs, ctrl) {
                element.bind('click', function (e) {
                    scope.closeFlyout(e);
                    ctrl.closeFlyout(e);
                });
            }
        };
    }])
    .directive('b2bFlyoutTrapFocusInside', ['$timeout', 'DOMHelper', 'keymap', 'events', function ($timeout, DOMHelper, keymap, events) {
        return {
            restrict: 'A',
            transclude: false,
            require: '^b2bFlyout',
            link: function (scope, elem, attr, ctrl) {

                /* Before opening modal, find the focused element */
                var firstTabableElement = undefined,
                    lastTabableElement = undefined;

                var firstTabableElementKeyhandler = function (e) {
                    if (!e.keyCode) {
                        e.keyCode = e.which;
                    }
                    if (e.keyCode === keymap.KEY.TAB && e.shiftKey && scope.flyoutOpened) { 
                        ctrl.gotFocus();
                        events.preventDefault(e);
                        events.stopPropagation(e);
                    }
                };

                var lastTabableElementKeyhandler = function (e) {
                    if (!e.keyCode) {
                        e.keyCode = e.which;
                    }
                    if (e.keyCode === keymap.KEY.TAB && !e.shiftKey) {
                        ctrl.gotFocus();
                        events.preventDefault(e);
                        events.stopPropagation(e);
                    }
                };

                $timeout(function () {
                    var element = elem[0].getElementsByClassName('b2b-flyout-container')[0];
                    firstTabableElement = DOMHelper.firstTabableElement(element);
                    lastTabableElement = DOMHelper.lastTabableElement(element);
                    angular.element(firstTabableElement).bind('keydown', firstTabableElementKeyhandler);
                    angular.element(lastTabableElement).bind('keydown', lastTabableElementKeyhandler);
                });
            }
        };
    }]);
/**
 * @ngdoc directive
 * @name Layouts.att:footer
 *
 * @description
 *  <file src="src/footer/docs/readme.md" />
 *
 * @usage
 * 
 <footer class="b2b-footer-wrapper" role="contentinfo" aria-label="footer">
        <div class="b2b-footer-container" b2b-column-switch-footer footer-link-items='footerItems'>
            <hr>
            <div class="divider-bottom-footer">
                <div class="span2 dispalyInline">&nbsp;</div>
                <div class="span6 dispalyInline">
                    <ul class="footer-nav-content">
                        <li><a href="Terms_of_use.html" title="Terms of use" id="foot0">Terms of use</a>|</li>
                        <li><a href="Privacy_policy.html" title="Privacy policy" id="foot1" class="active">Privacy policy</a>|</li>
                        <li><a href="Tollfree_directory_assistance.html" title="Tollfree directory assistance" id="foot2">Tollfree directory assistance</a>|</li>
                        <li><a href="compliance.html" title="Accessibility" id="foot3">Accessibility</a></li>

                    </ul>
                    <p><a href="//www.att.com/gen/privacy-policy?pid=2587" target="_blank"> <span class="copyright">2016</span> AT&amp;T Intellectual Property</a>. All rights reserved. AT&amp;T,the AT&amp;T Globe logo and all other AT&amp;T marks contained herein are tardemarks of AT&amp;T intellectual property and/or AT&amp;T affiliated companines.

                    </p>
                </div>
                <div class="span3 footerLogo dispalyInline">
                    <a href="index.html" class="footer-logo">
                        <i class="icon-primary-att-globe"><span class="hidden-spoken">A T &amp; T</span></i>
                        <h2 class="logo-title">AT&amp;T</h2>
                    </a>
                </div>
            </div>

        </div>  
    </footer>

 * @example
 *  <section id="code">   
 <b>HTML + AngularJS</b>
 <example module="b2b.att">
 <file src="src/footer/docs/demo.html" />
 <file src="src/footer/docs/demo.js" />
 </example>
 </section>
 *
 */
angular.module('b2b.att.footer', ['ddh.att.utilities']).
        directive('b2bColumnSwitchFooter', [function() {
                return {
                    restrict: 'A',
                    transclude: true,
                    scope: {
                        footerLinkItems: "="
                    },
                    templateUrl: 'template/footer/footer_column_switch_tpl.html',
                    link: function(scope) {
						var tempFooterColumns = scope.footerLinkItems.length;
						scope.footerColumns = 3;
                        if ( (tempFooterColumns === 5) || (tempFooterColumns === 4) ) {
							scope.footerColumns = tempFooterColumns;
                        }
                    }

                };

            }]);
     

/**
 * @ngdoc directive
 * @name Layouts.att:header
 *
 * @description
 *  <file src="src/header/docs/readme.md" />
 *
 * @usage
 *  <li b2b-header-menu class="header__item b2b-headermenu" ng-repeat="item in tabItems" role="presentation">
        <a href="#" class="menu__item" tabindex="0" role="menuitem">{{item.title}}</a>
        <div class="header-secondary-wrapper">
            <ul class="header-secondary" role="menu">
                <li class="header-subitem" b2b-header-submenu ng-repeat="i in item.subitems" role="presentation">
                    <a href="#" class="menu__item" aria-haspopup="true" tabindex="0" role="menuitem">{{i.value}}</a>
                    <div class="header-tertiary-wrapper" ng-if="i.links">
                        <ul class="header-tertiary" role="menu">
                            <li b2b-header-tertiarymenu ng-repeat="link in i.links" role="presentation">
                                <label>{{link.title}}</label>
                                <a href="{{link.href}}" class="header-tertiaryitem" ng-repeat="title in link.value" aria-haspopup="true" role="menuitem" tabindex="0"><span class="b2b-labelhide">{{link.title}}</span>{{title.title}}</a>
                            </li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>
    </li> 
 *
 * @example
 *  <section id="code">
 <example module="b2b.att.header">
 <file src="src/header/docs/demo.html" />
 <file src="src/header/docs/demo.js" />
 </example>
 </section>
 *
 */
angular.module('b2b.att.header', ['ddh.att'])
	.directive('b2bHeaderMenu', ['keymap', '$documentBind', '$timeout', '$isElement', '$document', function (keymap, $documentBind, $timeout, $isElement, $document) {
        return {
            restrict: 'A',
            controller:['$scope',function($scope){
                this.nextSiblingFocus = function (elObj,flag) {
                        if (elObj.nextElementSibling) {
                            if(flag){
                                var nextmenuItem = this.getFirstElement(elObj.nextElementSibling,'a');
                                nextmenuItem.focus();
                            }else{
                                elObj.nextElementSibling.focus();
                            }
                        }
                };
                
                this.previousSiblingFocus = function (elObj,flag) {
                        if (elObj.previousElementSibling) {
                            if(flag){
                                var prevmenuItem = this.getFirstElement(elObj.previousElementSibling,'a');
                                prevmenuItem.focus();
                            }else{
                                elObj.previousElementSibling.focus();
                            }
                        }
                };
                    
                this.getFirstElement = function(elmObj,selector){
                        return elmObj.querySelector(selector);                        
                    };
            }],
            link: function (scope, elem,attr,ctrl) {
                scope.showMenu = false;
                var activeElm, subMenu, tertiaryMenu, el= angular.element(elem)[0], 
                        menuItem = angular.element(elem[0].children[0]);
                menuItem.bind('click', function () {
                    elem.parent().children().removeClass('active');
                    elem.addClass('active');
                    var elems= this.parentElement.parentElement.querySelectorAll('li[b2b-header-menu]>a');
                    for (var i=0; i<elems.length; i++) {
                        elems[i].setAttribute("aria-expanded",false);
                    }
                    scope.showMenu = true;
                    var elmTofocus = ctrl.getFirstElement(this.parentElement,'li[b2b-header-submenu]');
                    elmTofocus.firstElementChild.focus();
                    this.setAttribute('aria-expanded',true);
                    scope.$apply();
                });
               
                elem.bind('keydown', function (evt) {
                    activeElm = document.activeElement;
                    subMenu = ctrl.getFirstElement(activeElm.parentElement,'li[b2b-header-submenu]');
                    tertiaryMenu = ctrl.getFirstElement(activeElm.parentElement,'li[b2b-header-tertiarymenu]');
                    switch (evt.keyCode) {
                        case keymap.KEY.ENTER:
                        case keymap.KEY.SPACE:
                            elem[0].click();
                            break;
                        case keymap.KEY.UP:
                            evt.stopPropagation();
                            evt.preventDefault();
                            if (activeElm.parentElement.hasAttribute('b2b-header-submenu')) {
                                menuItem[0].focus();
                            }
                            break;
                        case keymap.KEY.DOWN:
                            evt.stopPropagation();
                            evt.preventDefault();
                            if (subMenu) {
                                subMenu.firstElementChild.focus();
                            } else if (tertiaryMenu) {
                                var firstSubitem = ctrl.getFirstElement(tertiaryMenu,'a.header-tertiaryitem');
                                firstSubitem.focus();
                            }
                            break;
                        case keymap.KEY.RIGHT:
                            evt.stopPropagation();
                            evt.preventDefault();
                            if (activeElm.parentElement.hasAttribute('b2b-header-submenu')) {
                                var elm = angular.element(activeElm.parentElement)[0];
                                ctrl.nextSiblingFocus(elm,true);
                            } else if (activeElm.parentElement.parentElement.hasAttribute('b2b-header-tertiarymenu')) {
                                var tertiaryLI = angular.element(activeElm.parentElement.parentElement)[0];
                                if (tertiaryLI.nextElementSibling) {
                                    var nextElm = ctrl.getFirstElement(tertiaryLI.nextElementSibling,"a.header-tertiaryitem");
                                    nextElm.focus();
                                }
                            }
                            else if(activeElm.parentElement.hasAttribute('b2b-header-menu')){
                                ctrl.nextSiblingFocus(el,true);
                            }
                            break;
                        case keymap.KEY.LEFT:
                            evt.stopPropagation();
                            evt.preventDefault();
                            if (activeElm.parentElement.hasAttribute('b2b-header-submenu')) {
                                var previousElm = angular.element(activeElm.parentElement)[0];
                                ctrl.previousSiblingFocus(previousElm,true);
                            } else if (activeElm.parentElement.parentElement.hasAttribute('b2b-header-tertiarymenu')) {
                                var tertiaryLI = angular.element(activeElm.parentElement.parentElement)[0];
                                if (tertiaryLI.previousElementSibling) {
                                    var prevElm = ctrl.getFirstElement(tertiaryLI.previousElementSibling,"a.header-tertiaryitem");
                                    prevElm.focus();
                                }
                            }
                            else if(activeElm.parentElement.hasAttribute('b2b-header-menu')) {
                                ctrl.previousSiblingFocus(el,true);
                            }
                            break;
                        case keymap.KEY.ESC:
                            evt.stopPropagation();
                            evt.preventDefault();
                            scope.showMenu = false;
                            elem.removeClass('active');
							menuItem.attr('aria-expanded',false);
							$timeout(function(){
								menuItem[0].focus();
							},100);
                            scope.$apply();
                            break;
                        default:
                            break;
                    }
                });
                var outsideClick = function (e) {
                    var isElement = $isElement(angular.element(e.target), elem, $document);
                    if (!isElement) {
                        scope.showMenu = false;
                        elem.removeClass('active');
                        scope.$apply();
                    }
                };
                $documentBind.click('showMenu', outsideClick, scope);
            }
        };
    }]).directive('b2bHeaderSubmenu', ['$timeout',function ($timeout) {
        return{
            restrict: 'A',
            link: function (scope, elem) {
                var caretSign = angular.element("<i class='menuCaret'></i>");
                $timeout(function(){
					var menuItem = angular.element(elem[0].children[0]);
					menuItem.bind('focus mouseenter', function () {
						elem.parent().children().removeClass('active');
						elem.addClass('active');
						menuItem.attr('aria-expanded',true);
						var caretLeft = (elem[0].offsetLeft +  elem[0].offsetWidth/2) - 10;
						caretSign.css({left: caretLeft + 'px'});
						angular.element(caretSign);
						var tertiaryItems = elem[0].querySelectorAll('[b2b-header-tertiarymenu]');
						if(tertiaryItems.length >=1){
							elem.append(caretSign);
						}
					});
					menuItem.bind('blur', function () {
						$timeout(function () {
							var parentElm = document.activeElement.parentElement.parentElement;
							if(parentElm){
								if (!(parentElm.hasAttribute('b2b-header-tertiarymenu'))) {
									elem.removeClass('active');
									menuItem.attr('aria-expanded',false);
									var caret = elem[0].querySelector('.menuCaret');
									if(caret){
										caret.remove();
									}   
								}
							}
						});
					});
                });
            }
        };
    }]).directive('b2bHeaderTertiarymenu', ['$timeout','keymap', function ($timeout,keymap){
        return{
            restrict: 'A',
            require:'^b2bHeaderMenu',
            link: function (scope, elem,attr,ctrl) {
                
                elem.bind('keydown', function (evt) {
                    var activeElm = document.activeElement;
                    var activeParentElm = activeElm.parentElement;
                    var activeParentObj  = angular.element(activeParentElm)[0];
                    
                    if(activeParentElm.hasAttribute('b2b-tertiary-link')){
                        var quarterNav = angular.element(activeParentElm)[0].querySelector('li[b2b-header-quarternarymenu]');
                        if(quarterNav){
                            var links = ctrl.getFirstElement(angular.element(quarterNav)[0],'a');
                        }
                    }
                    var tertiaryMenu = activeElm.parentElement.parentElement.parentElement;
                    var tertiaryMenuFlag = tertiaryMenu.hasAttribute('b2b-tertiary-link');
                    
                    switch (evt.keyCode) {
                        case keymap.KEY.DOWN:
                            evt.stopPropagation();
                            evt.preventDefault();
                            if (activeParentElm.hasAttribute('b2b-tertiary-link')) {
                                if(angular.element(quarterNav).hasClass('active')){
                                    links.focus();
                                }else if(activeParentObj.nextElementSibling){
                                    ctrl.nextSiblingFocus(activeParentObj,true);
                                }
                            }
                            else if(angular.element(activeParentElm).hasClass('active')){
                                ctrl.nextSiblingFocus(activeElm);
                            }
                            break;                        
                        case keymap.KEY.UP:
                            evt.stopPropagation();
                            evt.preventDefault();
                            if(activeParentElm.hasAttribute('b2b-tertiary-link')){
                                if(activeParentObj.previousElementSibling.hasAttribute('b2b-tertiary-link')){
                                    ctrl.previousSiblingFocus(activeParentObj,true);
                                }else{
                                    var elm = angular.element(activeElm.parentElement.parentElement.parentElement.parentElement.parentElement)[0];
                                    ctrl.getFirstElement(elm,"a").focus();
                                }
                            }else if(angular.element(activeParentElm).hasClass('active')){
                                    if (activeElm.previousElementSibling) {
                                        ctrl.previousSiblingFocus(activeElm);
                                    }else if (tertiaryMenuFlag) {
                                        var elm = angular.element(tertiaryMenu)[0];
                                        ctrl.getFirstElement(elm,"a.header-tertiaryitem").focus();
                                    }
                                }
                            break;
                        default:
                            break;
                    }
                });
            }            
        };          
    }]).directive('b2bHeaderTogglemenu', ['$timeout', 'keymap', function ($timeout, keymap) {
        return{
            restrict: 'A',
            require: '^b2bHeaderMenu',
            link: function (scope, elem, attrs, ctrl) {
                var quarterNav;
                $timeout(function () {
                    quarterNav = angular.element(elem.parent())[0].querySelector('li[b2b-header-quarternarymenu]');
                    elem.bind('click', function () {
                        angular.element(quarterNav).toggleClass('active');
                    });
                });
            }
        };
    }]).directive('b2bHeaderResponsive', ['$timeout',function ($timeout) {
        return{
            restrict: 'A',
			controller: function($scope){
				this.applyMediaQueries = function(value){
					document.querySelector('style').textContent += 
						"@media screen and (max-width:950px) { \
							.header__item.profile { right: " + value + "px; } \
						}";
				};
				this.arrangeResponsiveHeader = function(children){
					/* 
					 * clientWidth of 1090 === max-width of 1100px
					 * clientWidth of 920 === max-width of 950px
					 * see b2b-angular.css for rest of responsive header CSS
					 */
				  if (document.documentElement.clientWidth <= 920) { 
						switch(children){
							case 1:
								this.applyMediaQueries(200);					
								break;
							case 2:
								this.applyMediaQueries(200);							
								break;
							default: // anthing above 3, however, should not have more than 3 to date
								this.applyMediaQueries(200);																			
						}
					}
				}
			},
            link: function (scope, elem, attrs, ctrl) {
				var children;
				var profile;
				
				// onload of page
				$timeout(function(){ 
					profile = document.querySelector('li.header__item.profile');
					children = angular.element(profile).children().length;
					
					ctrl.arrangeResponsiveHeader(children); // shift right-side icon flyovers
				});

				// on screen resize
				window.addEventListener('resize', function(event){ // caret adjustmet
					var activeSubmenu = elem[0].querySelector('[b2b-header-menu] [b2b-header-submenu].active');
					var activeSubmenuEl = angular.element(activeSubmenu);
					if(activeSubmenu){
						var caretSign = activeSubmenu.querySelector('i.menuCaret');
						if(caretSign){
							var caretSignEl = angular.element(caretSign);
							var caretLeft = (activeSubmenu.offsetLeft +  activeSubmenu.offsetWidth/2) - 10;
							caretSignEl.css({left: caretLeft + 'px'});
						}
					}

					ctrl.arrangeResponsiveHeader(children); // shift right-side icon flyovers
				});
            }
        };
	}]);
/**
 * @ngdoc directive
 * @name Forms.att:hourPicker
 *
 * @description
 *  <file src="src/hourPicker/docs/readme.md" />
 *
 * @usage
 * <div b2b-hourpicker ng-model="hourpickerValue.value"></div>
    
 * @example
 *  <section id="code">
        <example module="b2b.att">
            <file src="src/hourPicker/docs/demo.html" />
            <file src="src/hourPicker/docs/demo.js" />
        </example>
    </section>
 *
 */
angular.module('b2b.att.hourPicker', ['ddh.att.utilities'])

.constant('b2bHourpickerConfig', {
    dayOptions: [{
        title: 'sunday',
        caption: 'Sun',
        label: 'S',
        disabled: false
    }, {
        title: 'monday',
        caption: 'Mon',
        label: 'M',
        disabled: false
    }, {
        title: 'tuesday',
        caption: 'Tues',
        label: 'T',
        disabled: false
    }, {
        title: 'wednesday',
        caption: 'Wed',
        label: 'W',
        disabled: false
    }, {
        title: 'thursday',
        caption: 'Thu',
        label: 'T',
        disabled: false
    }, {
        title: 'friday',
        caption: 'Fri',
        label: 'F',
        disabled: false
    }, {
        title: 'saturday',
        caption: 'Sat',
        label: 'S',
        disabled: false
    }],
    startTimeOptions: ['1:00', '2:00', '3:00', '4:00', '5:00', '6:00', '7:00', '8:00', '9:00', '10:00', '11:00', '12:00'],
    startTimeDefaultOptionIndex: -1,
    startTimeDefaultMeridiem: "am",
    endTimeOptions: ['1:00', '2:00', '3:00', '4:00', '5:00', '6:00', '7:00', '8:00', '9:00', '10:00', '11:00', '12:00'],
    endTimeDefaultOptionIndex: -1,
    endTimeDefaultMeridiem: "pm"
})

.factory('b2bNormalizeHourpickerValues', [function () {
    var _normalize = function (hourpickerValues) {
        if (angular.isDefined(hourpickerValues) && hourpickerValues != null) {
            var finalHourpickerValues = [];
            var hourpickerValue = {};
            var days = {};
            for (var i = 0; i < hourpickerValues.length; i++) {
                days = hourpickerValues[i].days ? hourpickerValues[i].days : {};
                hourpickerValue.startTime = hourpickerValues[i].startTime ? hourpickerValues[i].startTime : '';
                hourpickerValue.startMeridiem = hourpickerValues[i].startMeridiem ? hourpickerValues[i].startMeridiem : '';
                hourpickerValue.endTime = hourpickerValues[i].endTime ? hourpickerValues[i].endTime : '';
                hourpickerValue.endMeridiem = hourpickerValues[i].endMeridiem ? hourpickerValues[i].endMeridiem : '';
                hourpickerValue.days = [];

                var retrieveDaysText = function (daysDetails) {
                    var daysTexts = [];
                    var first = -1;
                    var last = -1;
                    var index = -1;
                    for (var i in days) {
                        if (days[i].value) {
                            daysTexts.push(i);
                        }
                    }

                    first = daysTexts[0];
                    last = daysTexts[0];
                    index = 0;
                    hourpickerValue.days[index] = days[first].caption;
                    if (daysTexts.length > 1) {
                        for (var i = 1; i < daysTexts.length; i++) {
                            if (daysTexts[i] - last === 1) {
                                last = daysTexts[i];
                                hourpickerValue.days[index] = days[first].caption + ' - ' + days[last].caption;
                            } else {
                                index++;
                                first = last = daysTexts[i];
                                hourpickerValue.days[index] = days[first].caption;
                            }
                        }
                    }
                };
                retrieveDaysText();

                finalHourpickerValues.push(angular.copy(hourpickerValue));
            }

            return angular.copy(finalHourpickerValues);
        }
    };

    return {
        normalize: _normalize
    };
}])

.directive('b2bHourpicker', ['b2bHourpickerConfig', 'b2bNormalizeHourpickerValues', function (b2bHourpickerConfig, b2bNormalizeHourpickerValues) {
    return {
        restrict: 'EA',
        replace: false,
        scope: true,
        require: 'ngModel',
        templateUrl: 'template/hourPicker/b2bHourpicker.html',
        controller: ['$scope', function (scope) {

        }],
        link: function (scope, elem, attr, ctrl) {
            scope.hourpicker = {};
            scope.hourpicker.dayOptions = attr.dayOptions ? scope.$parent.$eval(attr.dayOptions) : b2bHourpickerConfig.dayOptions;
            scope.hourpicker.startTimeOptions = attr.startTimeOptions ? scope.$parent.$eval(attr.startTimeOptions) : b2bHourpickerConfig.startTimeOptions;
            scope.hourpicker.endTimeOptions = attr.dayOptions ? scope.$parent.$eval(attr.endTimeOptions) : b2bHourpickerConfig.endTimeOptions;
            scope.hourpicker.startTimeDefaultOptionIndex = attr.startTimeDefaultOptionIndex ? scope.$parent.$eval(attr.startTimeDefaultOptionIndex) : b2bHourpickerConfig.startTimeDefaultOptionIndex;
            scope.hourpicker.endTimeDefaultOptionIndex = attr.endTimeDefaultOptionIndex ? scope.$parent.$eval(attr.endTimeDefaultOptionIndex) : b2bHourpickerConfig.endTimeDefaultOptionIndex;
            scope.hourpicker.startTimeDefaultMeridiem = attr.startTimeDefaultMeridiem ? scope.$parent.$eval(attr.startTimeDefaultMeridiem) : b2bHourpickerConfig.startTimeDefaultMeridiem;
            scope.hourpicker.endTimeDefaultMeridiem = attr.endTimeDefaultMeridiem ? scope.$parent.$eval(attr.endTimeDefaultMeridiem) : b2bHourpickerConfig.endTimeDefaultMeridiem;
            scope.hourpicker.editMode = -1;

            scope.hourpickerValues = [];
            scope.finalHourpickerValues = [];
            scope.addHourpickerValue = function (hourpickerPanelValue) {
                if (hourpickerPanelValue) {
                    if (scope.hourpicker.editMode > -1) {
                        scope.hourpickerValues[scope.hourpicker.editMode] = hourpickerPanelValue;
                        scope.hourpicker.editMode = -1;
                    } else {
                        scope.hourpickerValues.push(hourpickerPanelValue);
                    }
                }
                scope.finalHourpickerValues = b2bNormalizeHourpickerValues.normalize(angular.copy(scope.hourpickerValues));
                ctrl.$setViewValue(angular.copy(scope.hourpickerValues));
            };
            ctrl.$render = function () {
                if (angular.isDefined(ctrl.$modelValue)) {
                    scope.hourpickerValues = angular.copy(ctrl.$modelValue);
                    scope.finalHourpickerValues = b2bNormalizeHourpickerValues.normalize(angular.copy(scope.hourpickerValues));
                }
            };
            scope.editHourpickerValue = function (index) {
                scope.hourpickerPanelValue = angular.copy(scope.hourpickerValues[index]);
                scope.hourpicker.editMode = index;
            };
            scope.deleteHourpickerValue = function (index) {
                scope.hourpickerValues.splice(index, 1);
                scope.resetHourpickerPanelValue();
                scope.addHourpickerValue();
            };

            scope.setValidity = function (errorType, errorValue) {
                ctrl.$setValidity(errorType, errorValue);
            }
        }
    }
}])

.directive('b2bHourpickerPanel', [function () {
    return {
        restrict: 'EA',
        replace: false,
        templateUrl: 'template/hourPicker/b2bHourpickerPanel.html',
        controller: ['$scope', function (scope) {

        }],
        link: function (scope, elem, attr, ctrl) {
            var hourpickerPanelValueTemplate = {
                days: {},
                startTime: '',
                startMeridiem: 'am',
                endTime: '',
                endMeridiem: 'pm'
            };
            for (var i = 0; i < scope.hourpicker.dayOptions.length; i++) {
                hourpickerPanelValueTemplate.days[i] = {
                    value: false,
                    title: scope.hourpicker.dayOptions[i].title,
                    caption: scope.hourpicker.dayOptions[i].caption
                };
            }
            scope.hourpickerPanelValue = {};

            scope.resetHourpickerPanelValue = function () {
                scope.hourpickerPanelValue = angular.copy(hourpickerPanelValueTemplate);
                if (scope.hourpicker.startTimeDefaultOptionIndex > -1) {
                    scope.hourpickerPanelValue.startTime = scope.hourpicker.startTimeOptions[scope.hourpicker.startTimeDefaultOptionIndex];
                }
                if (scope.hourpicker.endTimeDefaultOptionIndex > -1) {
                    scope.hourpickerPanelValue.endTime = scope.hourpicker.endTimeOptions[scope.hourpicker.endTimeDefaultOptionIndex];
                }
                scope.hourpickerPanelValue.startMeridiem = scope.hourpicker.startTimeDefaultMeridiem;
                scope.hourpickerPanelValue.endMeridiem = scope.hourpicker.endTimeDefaultMeridiem;
                scope.hourpicker.editMode = -1;
            };
            scope.resetHourpickerPanelValue();
            scope.updateHourpickerValue = function () {
                if (scope.isFormValid() && !scope.isTimeOverlap()) {
                    scope.addHourpickerValue(angular.copy(scope.hourpickerPanelValue));
                    scope.resetHourpickerPanelValue();
                }
            };

            scope.isFormValid = function () {
                var isStartTimeAvailable = scope.hourpickerPanelValue.startTime ? true : false;
                var isStartMeridiemAvailable = scope.hourpickerPanelValue.startMeridiem ? true : false;
                var isEndTimeAvailable = scope.hourpickerPanelValue.endTime ? true : false;
                var isEndMeridiemAvailable = scope.hourpickerPanelValue.endMeridiem ? true : false;
                var currentStartTime = getTime(scope.hourpickerPanelValue.startTime, scope.hourpickerPanelValue.startMeridiem);
                var currentEndTime = getTime(scope.hourpickerPanelValue.endTime, scope.hourpickerPanelValue.endMeridiem);
                var isTimeInProperSequence = currentEndTime > currentStartTime;
                var isDayChecked = false;
                for (var i in scope.hourpickerPanelValue.days) {
                    if (scope.hourpickerPanelValue.days[i].value) {
                        isDayChecked = true;
                        break;
                    }
                }

                if (isStartTimeAvailable && isStartMeridiemAvailable && isEndTimeAvailable && isEndMeridiemAvailable && isTimeInProperSequence && isDayChecked) {
                    scope.setValidity('invalidHourpickerData', true);
                    return true;
                } else {
                    scope.setValidity('invalidHourpickerData', false);
                    return false;
                }
            };
            scope.isTimeOverlap = function () {
                var selectedDays = [];
                for (var i in scope.hourpickerPanelValue.days) {
                    if (scope.hourpickerPanelValue.days[i].value) {
                        selectedDays.push(i);
                    }
                }

                var currentStartTime, currentEndTime, existingStartTime, existingEndTime;
                currentStartTime = getTime(scope.hourpickerPanelValue.startTime, scope.hourpickerPanelValue.startMeridiem);
                currentEndTime = getTime(scope.hourpickerPanelValue.endTime, scope.hourpickerPanelValue.endMeridiem);
                for (var i = 0; i < scope.hourpickerValues.length; i++) {

                    if(i === scope.hourpicker.editMode) {
                        continue;
                    }

                    for (var j = 0; j < selectedDays.length; j++) {
                        existingStartTime = getTime(scope.hourpickerValues[i].startTime, scope.hourpickerValues[i].startMeridiem);
                        existingEndTime = getTime(scope.hourpickerValues[i].endTime, scope.hourpickerValues[i].endMeridiem);
                        if (scope.hourpickerValues[i].days[selectedDays[j]].value) {
                            if ((currentStartTime > existingStartTime && currentStartTime < existingEndTime) || (currentEndTime > existingStartTime && currentEndTime < existingEndTime)) {
                                scope.setValidity('invalidHourpickerTimeRange', false);
                                return true;
                            } else if ((existingStartTime > currentStartTime && existingStartTime < currentEndTime) || (existingEndTime > currentStartTime && existingEndTime < currentEndTime)) {
                                scope.setValidity('invalidHourpickerTimeRange', false);
                                return true;
                            } else if ((currentStartTime === existingStartTime) && (currentEndTime === existingEndTime)) {
                                scope.setValidity('invalidHourpickerTimeRange', false);
                                return true;
                            }
                        }
                    }
                }

                scope.setValidity('invalidHourpickerTimeRange', true);
                return false;
            };
            var getTime = function (timeString, meridiem) {
                var tempDate = new Date();
                if (timeString && meridiem) {
                    var timeSplit = timeString.split(':');
                    var hour = ((meridiem === 'PM' || meridiem === 'pm') && timeSplit[0] !== '12') ? parseInt(timeSplit[0], 10) + 12 : parseInt(timeSplit[0], 10);
                    tempDate.setHours(hour, parseInt(timeSplit[1], 10), 0, 0);
                }

                return tempDate.getTime();
            };
        }
    }
}])

.directive('b2bHourpickerValue', [function () {
    return {
        restrict: 'EA',
        replace: false,
        templateUrl: 'template/hourPicker/b2bHourpickerValue.html',
        controller: ['$scope', function (scope) {

        }],
        link: function (scope, elem, attr, ctrl) {
            scope.hourpickerValue = {};
            scope.hourpickerValue.startTime = attr.startTime ? scope.$eval(attr.startTime) : '';
            scope.hourpickerValue.startMeridiem = attr.startMeridiem ? scope.$eval(attr.startMeridiem) : '';
            scope.hourpickerValue.endTime = attr.endTime ? scope.$eval(attr.endTime) : '';
            scope.hourpickerValue.endMeridiem = attr.endMeridiem ? scope.$eval(attr.endMeridiem) : '';
            scope.hourpickerValue.days = attr.days ? scope.$eval(attr.days).join(', ') : '';
            scope.hourpickerValue.index = attr.b2bHourpickerValue ? scope.$eval(attr.b2bHourpickerValue) : -1;
        }
    }
}]);
/**
 * @ngdoc directive
 * @name Navigation.att:Multi Level Navigation
 *
 * @description
 *  <file src="src/multiLevelNavigation/docs/readme.md" />
 *
 * @usage
 *       <div class="b2b-ml-nav">
 *          <ul role="tree">
 *             <li aria-label="{{child.name}}" tabindex="-1" b2b-ml-nav="{{child.type}}" role="treeitem" ng-repeat="child in treeStructure">
 *                  <a tabindex="-1" href="javascript:void(0);" title="{{child.name}}">{{child.name}}<span><i class="{{child.type=='endNode'?'icon-primary-circle':'icon-primary-collapsed'}}"></i></span></a>
 *                      <!-- Below UL tag is RECURSIVE to generate n-childs -->
 *                      <ul role="group" ng-if="child.child">
 *                          <li aria-label="{{child.name}}" b2b-ml-nav="{{child.type}}" tabindex="-1" role="treeitem" ng-repeat="child in child.child">
 *                          <a tabindex="-1" href="javascript:void(0);" title="{{child.name}}">{{child.name}}<span><i class="{{child.type=='endNode'?'icon-primary-circle':'icon-primary-collapsed'}}"></i></span></a>
 *                               <!-- RECURSIVE UL tag goes here -->
 *                          </li>
 *                      </ul>
 *             </li>
 *           </ul>
 *        </div>
 *
 * @example
 *  <section id="code">
        <example module="b2b.att">
            <file src="src/multiLevelNavigation/docs/demo.html" />
            <file src="src/multiLevelNavigation/docs/demo.js" />
       </example>
    </section>
 *
 */
angular.module('b2b.att.multiLevelNavigation', ['ddh.att.utilities'])
    //directive b2bMlNav Test coverage 100% on 5/13
    .directive('b2bMlNav', ['keymap', function (keymap) {
        return {
            restrict: 'EA',
            link: function (scope, element) {
                var rootE, parentE, upE, downE, lastE, homeE, endE;
                //default root tree element tabindex set zero
                if (element.parent().parent().hasClass('b2b-ml-nav') && (element[0].previousElementSibling === null)) {
                    element.attr('tabindex', 0);
                }
                //check root via class
                var isRoot = function (elem) {
                        if (elem.parent().parent().eq(0).hasClass('b2b-ml-nav')) {
                            return true;
                        } else {
                            return false;
                        }

                    }
                    //for any expandable tree item on click
                var toggleState = function (e) {
                    if (angular.element(e.target).attr("b2b-ml-nav") !== "endNode") {
                        var eLink = element.find('a').eq(0);
                        if (eLink.hasClass('active')) {
                            eLink.removeClass('active');
                            eLink.parent().attr("aria-expanded", "false");
                            eLink.find('i').eq(0).removeClass('icon-primary-expanded');
                            eLink.find('i').eq(0).addClass('icon-primary-collapsed');
                        } else {
                            eLink.addClass('active');
                            eLink.parent().attr("aria-expanded", "true");
                            eLink.find('i').eq(0).removeClass('icon-primary-collapsed');
                            eLink.find('i').eq(0).addClass('icon-primary-expanded');
                        }
                    }
                };
                //function finds the main root-item from particular tree-group
                var findRoot = function (elem) {
                    if (isRoot(elem)) {
                        rootE = elem;
                        return;
                    }
                    if (elem.attr("b2b-ml-nav") === "middleNode" || elem.attr("b2b-ml-nav") === "endNode") {
                        parentE = elem.parent().parent();
                    } else {
                        parentE = elem;
                    }
                    if (parentE.attr("b2b-ml-nav") === "rootNode") {
                        rootE = parentE;
                    } else {
                        findRoot(parentE);
                    }
                };
                //finds the last visible node of the previous tree-group
                var findPreActive = function (elem) {
                    if (!(elem.hasClass("active"))) {
                        return;
                    } else {
                        var childElems = angular.element(elem[0].nextElementSibling.children);
                        lastE = angular.element(childElems[childElems.length - 1]);
                        if (lastE.attr("b2b-ml-nav") === "middleNode" && lastE.find('a').eq(0).hasClass('active')) {
                            findPreActive(lastE.find('a').eq(0));
                        }
                        upE = lastE;
                    }
                };
                //find above visible link
                var findUp = function (elem) {
                    if (elem[0].previousElementSibling !== null) {
                        upE = angular.element(elem[0].previousElementSibling);
                    } else {
                        upE = elem.parent().parent();
                    }
                    if (isRoot(elem)) {
                        findPreActive(upE.find('a').eq(0));
                    }
                };
                //find below visible link
                var findDown = function (elem) {
                    if (elem.hasClass('active')) {
                        downE = elem.next().find('li').eq(0);
                    } else {
                        if (elem.parent().next().length !== 0) {
                            downE = elem.parent().next().eq(0);
                        } else {
                            if (elem.parent().parent().parent().next().length !== 0) {
                                downE = elem.parent().parent().parent().next().eq(0);
                                return;
                            }
                            downE = elem.parent().eq(0);
                        }
                    }
                };
                //finds last root-group element of the tree
                var findEnd = function (elem) {
                    findRoot(elem);
                    endE = angular.element(rootE.parent()[0].children[rootE.parent()[0].children.length - 1]);
                };
                //finds first root element of tree
                var findHome = function (elem) {
                    findRoot(elem);
                    homeE = angular.element(rootE.parent()[0].children[0]);
                };
                element.bind('click', function (e) {
                    if(element.attr("b2b-ml-nav") !== "endNode") { 
                        toggleState(e); 
                    }
                    e.stopPropagation();
                });
                element.bind('focus', function (e) {
                    if(element.attr("b2b-ml-nav") !== "endNode") {
                        if(element.find('a').eq(0).hasClass('active')) {
                            element.attr("aria-expanded", true);
                        }
                        else {
                            element.attr("aria-expanded", false);
                        }
                        
                    }
                })
                //Keyboard functionality approach:
                //find keycode
                //set set tabindex -1 on the current focus element
                //find the next element to be focussed, set tabindex 0 and throw focus
                element.bind('keydown', function (evt) {
                    switch (evt.keyCode) {
                    case keymap.KEY.ENTER:
                    case keymap.KEY.SPACE:
                        element.triggerHandler('click');
                        evt.stopPropagation();
                        evt.preventDefault();
                        break;
                    case keymap.KEY.END:
                        evt.preventDefault();
                        element.attr('tabindex', -1);
                        findEnd(element);
                        endE.eq(0).attr('tabindex', 0);
                        endE[0].focus();
                        evt.stopPropagation();
                        break;
                    case keymap.KEY.HOME:
                        evt.preventDefault();
                        element.attr('tabindex', -1);
                        findHome(element);
                        homeE.eq(0).attr('tabindex', 0);
                        homeE[0].focus();
                        evt.stopPropagation();
                        break;
                    case keymap.KEY.LEFT:
                        evt.preventDefault();
                        if (!isRoot(element)) {
                            element.attr('tabindex', -1);
                            parentE = element.parent().parent();
                            parentE.eq(0).attr('tabindex', 0);
                            parentE[0].focus();
                            parentE.eq(0).triggerHandler('click');
                        } else {
                            if (element.find('a').eq(0).hasClass('active')) {
                                element.triggerHandler('click');
                            }
                        }
                        evt.stopPropagation();
                        break;
                    case keymap.KEY.UP:
                        evt.preventDefault();
                        if (!(isRoot(element) && element[0].previousElementSibling === null)) {
                            element.attr('tabindex', -1);
                            findUp(element);
                            upE.eq(0).attr('tabindex', 0);
                            upE[0].focus();
                        }
                        evt.stopPropagation();
                        break;
                    case keymap.KEY.RIGHT:
                        evt.preventDefault();
                        if (element.attr("b2b-ml-nav") !== "endNode") {
                            if (!element.find('a').eq(0).hasClass('active')) {
                                element.triggerHandler('click');
                            }
                            element.attr('tabindex', -1);
                            findDown(element.find('a').eq(0));
                            downE.eq(0).attr('tabindex', 0);
                            downE[0].focus();
                        }
                        evt.stopPropagation();
                        break;
                    case keymap.KEY.DOWN:
                        evt.preventDefault();
                        element.attr('tabindex', -1);
                        if (!(element.attr("b2b-ml-nav") === "middleNode" && element.find('a').eq(0).hasClass('active')) && (element.next().length === 0)) {
                            findRoot(element);
                            if (!(rootE.next().length === 0)) {
                                rootE.next().eq(0).attr('tabindex', 0);
                                rootE.next()[0].focus();
                            } else {
                                rootE.eq(0).attr('tabindex', 0);
                                rootE[0].focus();
                            }
                            evt.stopPropagation();
                            break;
                        }
                        findDown(element.find('a').eq(0));
                        downE.eq(0).attr('tabindex', 0);
                        downE[0].focus();
                        evt.stopPropagation();
                        break;
                    default:
                        break;
                    }
                });
            }
        };
    }]);
/**
 * @ngdoc directive
 * @name Tabs, tables & accordions.att:multipurposeExpander
 *
 * @description
 *  <file src="src/multipurposeExpander/docs/readme.md" />
 *
 * @usage
 * <!--With Close Other -->
 * <b2b-expander-group close-others="true">
 *  <b2b-expanders class="mpc-expanders" is-open="testmpc">            
 *      <b2b-expander-heading ng-class=" { 'b2b-toggle-header-active': !testmpc, 'b2b-toggle-header-inactive': testmpc } ">Heading content goes here</b2b-expander-heading>               
 *      <b2b-expander-body>
            <p>body content goes here</p>
        </b2b-expander-body>
 *  </b2b-expanders>
 *  </b2b-expander-group>
 *  
 * <!-- Without Close Other -->
 *  <b2b-expanders class="mpc-expanders" is-open="testmpc2">            
 *      <b2b-expander-heading ng-class=" { 'b2b-toggle-header-active': !testmpc2, 'b2b-toggle-header-inactive': testmpc2 } ">Heading content goes here</b2b-expander-heading>               
 *      <b2b-expander-body>
            <p>body content goes here</p>
        </b2b-expander-body>
 *  </b2b-expanders>
 *  
 * @example
 *  <section id="code">
        <example module="b2b.att.multipurposeExpander">
            <file src="src/multipurposeExpander/docs/demo.html" />
            <file src="src/multipurposeExpander/docs/demo.js" />
        </example>
    </section>
 *
 */

angular.module('b2b.att.multipurposeExpander', ['ddh.att'])
.directive('b2bExpanderGroup', function () {
    return {
        restrict: 'EA',
        transclude: true,
        template: "<ng-transclude></ng-transclude>",
        controller:['$scope','$attrs', function($scope,$attrs){
            this.groups = [];
            this.index = -1;            
            this.scope = $scope;
            
            this.addGroup = function (groupScope) {
                var that = this;
                groupScope.index = this.groups.length;
                this.groups.push(groupScope);
                if(this.groups.length > 0){
                    this.index = 0;
                }
                groupScope.$on('$destroy', function () {
                that.removeGroup(groupScope);
            });
            };

            this.closeOthers = function (openGroup) {
                var closeOthers = angular.isDefined($attrs.closeOthers);
                if (closeOthers && !$scope.forceExpand) {
                    angular.forEach(this.groups, function (group) {
                        if (group !== openGroup) {
                            group.isOpen = false;
                        }
                    });
                }
                if (this.groups.indexOf(openGroup) === (this.groups.length - 1) && $scope.forceExpand) {
                    $scope.forceExpand = false;
                }
            };
            this.removeGroup = function (group) {
            var index = this.groups.indexOf(group);
            if (index !== -1) {
                this.groups.splice(this.groups.indexOf(group), 1);
            }
        };
        }]
       
    };
    
})
.directive('b2bExpanders', function () {
    return{
        restrict: 'EA',
        replace: true,
        require:['b2bExpanders','?^b2bExpanderGroup'],
        transclude: true,
        scope:{isOpen:'=?'},
        template: "<div ng-transclude></div>",
        controller: ['$scope', function ($scope){
                var bodyScope = null;
                var expanderScope = null;
                this.isOpened = function(){                
                    if($scope.isOpen)
                    {
                        return  true;
                    }else
                    {
                        return false;
                    }
                };                
                this.setScope = function (scope) {
                    bodyScope = scope; 
                    bodyScope.isOpen = $scope.isOpen;                   
                };                
                this.setExpanderScope = function (scope) {
                    expanderScope = scope;                                   
                };
                this.toggle = function () {
                    $scope.isOpen = bodyScope.isOpen = !bodyScope.isOpen;                    
                    return bodyScope.isOpen;
                    
                };
                this.watchToggle = function(io){ 
                    bodyScope.isOpen = io;
                    expanderScope.updateIcons(io);
                };  
            }],
        link: function (scope, elem, attr, myCtrl)
        {
            //scope.isOpen = false; 
            if(myCtrl[1]){
                myCtrl[1].addGroup(scope);
            }
            scope.$watch('isOpen', function(val){                               
                myCtrl[0].watchToggle(scope.isOpen);
                if(val && myCtrl[1]){
                    myCtrl[1].closeOthers(scope);
                }
            });            
        }
    };
})

.directive('b2bExpanderHeading', function () {
    return{
        require: "^b2bExpanders",
        restrict: 'EA',
        replace: true,
        transclude: true,
        scope: true,
        template: "<div style='padding:10px 10px 10px 0 !important' ng-transclude></div>"
    };
})

.directive('b2bExpanderBody', function () {
    return{
        restrict: 'EA',
        require: "^b2bExpanders",
        replace: true,
        transclude: true,
        scope: {},
        template: "<div collapse='!isOpen' ><div ng-transclude></div></div>",
        link: function (scope, elem, attr, myCtrl) {
            scope.isOpen = false;
            myCtrl.setScope(scope);
        }
    };
})

.directive('b2bExpanderToggle', function () {
    return{
        restrict: 'EA',
        require: "^b2bExpanders",
        scope: {
            expandIcon: '@',
            collapseIcon: '@'
        },
        
        link: function (scope, element, attr, myCtrl)
        {
            myCtrl.setExpanderScope(scope);
            var isOpen = myCtrl.isOpened();   

            scope.setIcon = function () {
                element.attr('role', 'button');

                if (scope.expandIcon && scope.collapseIcon)
                {
                    if (isOpen) {
                        element.removeClass(scope.expandIcon);
                        element.addClass(scope.collapseIcon);

                        element.attr("aria-expanded", "true");
                    }
                    else {
                        element.removeClass(scope.collapseIcon);
                        element.addClass(scope.expandIcon);

                        element.attr("aria-expanded", "false");
                    }
                }								
            };
            element.bind("keydown", function (e) {
                if (e.keyCode === 13)
                {
                    scope.toggleit();
                }
            });
            
            element.bind('click', function (){
                scope.toggleit();
            });
            scope.updateIcons = function(nStat){
                isOpen = nStat;
                scope.setIcon();                
            };
            scope.toggleit = function (){
                isOpen = myCtrl.toggle();
                scope.setIcon();
                scope.$apply();
            };                    
            scope.setIcon();
        }
    };
});
/**
 * @ngdoc directive
 * @name Navigation.att:paneSelector
 *
 * @description
 *  <file src="src/paneSelector/docs/readme.md" />
 *
 * @usage
 *  Please refer demo.html tab in Example section below.
 *
 * @example
    <section id="code">
        <b>HTML + AngularJS</b>
        <example module="b2b.att">
            <file src="src/paneSelector/docs/demo.html" />
            <file src="src/paneSelector/docs/demo.js" />
        </example>
    </section>
 */

angular.module('b2b.att.paneSelector', ['ddh.att', 'b2b.att.utilities'])

.filter('paneSelectorSelectedItemsFilter', [function () {
    return function (listOfItemsArray) {

        if (!listOfItemsArray) {
            listOfItemsArray = [];
        }

        var returnArray = [];

        for (var i = 0; i < listOfItemsArray.length; i++) {
            if (listOfItemsArray[i].isSelected) {
                returnArray.push(listOfItemsArray[i]);
            }
        }

        return returnArray;
    };
}])

.filter('paneSelectorFetchChildItemsFilter', [function () {
    return function (listOfItemsArray) {

        if (!listOfItemsArray) {
            listOfItemsArray = [];
        }

        var returnArray = [];

        for (var i = 0; i < listOfItemsArray.length; i++) {
            for (var j = 0; j < listOfItemsArray[i].childItems.length; j++) {
                returnArray.push(listOfItemsArray[i].childItems[j]);
            }
        }

        return returnArray;
    };
}])

.directive('b2bPaneSelector', [function () {
    return {
        restrict: 'AE',
        replace: true,
        templateUrl: 'template/paneSelector/paneSelector.html',
        transclude: true,
        scope: {}
    };
}])

.directive('b2bPaneSelectorPane', [ function () {
    return {
        restrict: 'AE',
        replace: true,
        templateUrl: 'template/paneSelector/paneSelectorPane.html',
        transclude: true,
        scope: {}
    };
}])

.directive('b2bTabVertical', ['$timeout', 'keymap', function ($timeout, keymap) {
    return {
        restrict: 'A',
        require: 'ddhTab',
        link: function (scope, element, attr, ddhTabCtrl) {

            if (!ddhTabCtrl) {
                return;
            }

            // retreive the isolateScope
            var iScope = angular.element(element).isolateScope();

            $timeout(function () {
                angular.element(element[0].querySelector('a')).unbind('keydown');
                angular.element(element[0].querySelector('a')).bind('keydown', function (evt) {

                    if (!(evt.keyCode)) {
                        evt.keyCode = evt.which;
                    }

                    switch (evt.keyCode) {
                        case keymap.KEY.DOWN:
                            evt.preventDefault();
                            iScope.nextKey();
                            break;

                        case keymap.KEY.UP:
                            evt.preventDefault();
                            iScope.previousKey();
                            break;

                        default:;
                    }
                });
            });
        }
    };
}]);
/**
 * @ngdoc directive
 * @name Forms.att:phoneNumberInput
 *
 * @description
 *  <file src="src/phoneNumberInput/docs/readme.md" />
 *
 * @usage
<form name="userForm1">
    <div class="form-row" ng-class="{'error':!userForm1.text.$valid && userForm1.text.$dirty}">
        <label>Phone Mask<span style="color:red">*</span>: (npa) nxx-line &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Model Value: {{mask.text}}</label>
        <div>
            <input b2b-phone-mask="phoneMask" name="text" ng-model="mask.text" type="text" placeholder="e.g. (123) 456-7890" title="Phone Number" class="b2b-phone-mask-input" required />
            <div ng-messages="userForm1.text.$error" class="error-msg" aria-live="polite" aria-atomic="true">
                <span ng-message="required" role="alert">This field is mandatory!</span>
                <span ng-message="invalidPhoneNumber" role="alert">Please enter valid phone number!</span>
                <span ng-message="mask" role="alert">Please enter valid phone number!</span>
            </div>
        </div>
    </div>
</form>
 *
 * @example
 *  <section id="code">
        <example module="b2b.att">
            <file src="src/phoneNumberInput/docs/demo.html" />
            <file src="src/phoneNumberInput/docs/demo.js" />
       </example>
    </section>
 *
 */
angular.module('b2b.att.phoneNumberInput', ['ngMessages', 'ddh.att.utilities'])
    .constant("CoreFormsUiConfig", {
        phoneMask: '(___) ___-____',
        phoneMaskDot: '___.___.____',
        phoneMaskHyphen: '___-___-____'
    })
    .directive('b2bPhoneMask', ['$parse', 'CoreFormsUiConfig', 'keymap', function ($parse, CoreFormsUiConfig, keymap) {
        return {
            require: 'ngModel',
            scope: {
                ngModel: '='
            },
            link: function (scope, iElement, iAttrs, ctrl) {
                var navigatorAgent = navigator.userAgent.toLowerCase(),
                    isAndroid = navigatorAgent.indexOf("android") > -1,
                    oldIE = navigatorAgent.indexOf('msie 8.0') !== -1;
                var mask = '';
                var validPhoneNumber = false;
                var currentKey = '';
                if (isAndroid) {
                    mask = "__________";
                } else {
                    switch (iAttrs.b2bPhoneMask) {
                    case "phoneMask":
                        mask = CoreFormsUiConfig.phoneMask;
                        break;
                    case "phoneMaskDot":
                        mask = CoreFormsUiConfig.phoneMaskDot;
                        break;
                    case "phoneMaskHyphen":
                        mask = CoreFormsUiConfig.phoneMaskHyphen;
                        break;
                    default:
                        mask = CoreFormsUiConfig.phoneMask;
                    }
                }
                iElement.attr("maxlength", mask.length);
                var checkValidity = function (unmaskedValue, rawValue) {
                    var valid = false;
                    if (angular.isUndefined(rawValue) || rawValue === '') {
                        valid = true;
                    } else if (unmaskedValue) {
                        valid = (unmaskedValue.length === 10);
                    }
                    ctrl.$setValidity('invalidPhoneNumber', validPhoneNumber);
                    ctrl.$setValidity('mask', valid);
                    return valid;
                };
                var handleKeyup = function (evt) {

                    if (evt && evt.keyCode === keymap.KEY.SHIFT) {
                        return;
                    }

                    var index, formattedNumber;
                    if (ctrl.$modelValue) {
                        formattedNumber = ctrl.$modelValue;
                        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > 0) {
                            formattedNumber = iElement.val();
                        }
                    } else {
                        formattedNumber = iElement.val();
                    }
                    if (!formattedNumber.length && currentKey === '') {
                        return;
                    }
                    var maskLength, inputNumbers, maskArray, tempArray, maskArrayLength;
                    tempArray = [];
                    maskArray = mask.split("");
                    maskArrayLength = maskArray.length;
                    maskLength = formattedNumber.substring(0, mask.length);
                    inputNumbers = formattedNumber.replace(/[^0-9]/g, "").split("");
                    for (index = 0; index < maskArrayLength; index++) {
                        tempArray.push(maskArray[index] === "_" ? inputNumbers.shift() : maskArray[index]);
                        if (inputNumbers.length === 0) {
                            break;
                        }
                    }
                    formattedNumber = tempArray.join("");
                    if (formattedNumber === '(') {
                        formattedNumber = '';
                    }

                    if ( (angular.isDefined(evt) && evt.which) && currentKey !== '') {
                        if (maskArray[0] === currentKey && formattedNumber === '') {
                            formattedNumber = '(';
                        } else if (evt.which === keymap.KEY.SPACE && currentKey === ' ') {
                            formattedNumber = formattedNumber + ') ';
                        } else if (maskArray[0] === currentKey && formattedNumber === '') {
                            formattedNumber = formattedNumber + currentKey;
                        } else if (maskArray[formattedNumber.length] === currentKey) {
                            formattedNumber = formattedNumber + currentKey;
                        }
                        currentKey = '';
                    }

                    ctrl.$setViewValue(formattedNumber);
                    ctrl.$render();
                    return formattedNumber;
                };


                // since we are only allowing 0-9, why even let the keypress go forward?
                // also added in delete... in case they want to delete :)
                var handlePress = function (e) {
                    if (e.which) {
                        if ((e.which < 48 || e.which > 57) && (e.which < 96 || e.which > 105)) {
                            if (e.which !== keymap.KEY.BACKSPACE && e.which !== keymap.KEY.TAB && e.which !== keymap.KEY.DELETE && e.which !== keymap.KEY.ENTER && e.which !== keymap.KEY.LEFT && e.which !== keymap.KEY.RIGHT &&
                                // Allow: Ctrl+V/v
                                (!(e.ctrlKey) && (e.which !== '118' || e.which !== '86')) &&
                                // Allow: Ctrl+C/c
                                (!(e.ctrlKey) && (e.which !== '99' || e.which !== '67')) &&
                                // Allow: Ctrl+X/x
                                (!(e.ctrlKey) && (e.which !== '120' || e.which !== '88'))) {
                                e.preventDefault ? e.preventDefault() : e.returnValue = false;
                                iElement.attr("aria-label", "Only numbers are allowed");
                                validPhoneNumber = false;
                            }
                        } else {
                            iElement.removeAttr("aria-label");
                            validPhoneNumber = true;
                        }

                        setCurrentKey(e);
                    }
                    scope.$apply();
                };
                // i moved this out because i thought i might need focus as well..
                // to handle setting the model as the view changes
                var parser = function (fromViewValue) {
                    var letters = /^[A-Za-z]+$/;
                    var numbers = /^[0-9]+$/;
                    if (angular.isUndefined(fromViewValue) || fromViewValue === '') {
                        validPhoneNumber = true;
                    } else {
                        if (fromViewValue.match(letters)) {
                            validPhoneNumber = false;
                        }
                        if (fromViewValue.match(numbers)) {
                            validPhoneNumber = true;
                        }
                    }
                    var clean = "";
                    if (fromViewValue && fromViewValue.length > 0) {
                        clean = fromViewValue.replace(/[^0-9]/g, '');
                    }
                    checkValidity(clean, fromViewValue);
                    return clean;
                };

                //to handle reading the model and formatting it
                var formatter = function (fromModelView) {
                    var input = '';
                    checkValidity(fromModelView);
                    if (fromModelView) {
                        input = handleKeyup();
                    }
                    return input;
                };

                var setCurrentKey = function (e) {
                    switch (e.which) {
                    case 189:
                    case 109:
                        currentKey = '-';
                        break;
                    case 190:
                    case 110:
                        currentKey = '.';
                        break;
                    case 57:
                        if (e.shiftKey === true) {
                            currentKey = '(';
                        }
                        break;
                    case 48:
                        if (e.shiftKey === true) {
                            currentKey = ')';
                        }
                        break;
                    case 32:
                        currentKey = ' ';
                        break;
                    }
                };

                if (angular.isDefined(scope.ngModel)) {
                    parser(scope.ngModel);
                }

                ctrl.$parsers.push(parser);
                ctrl.$formatters.push(formatter);
                iElement.bind('keyup', handleKeyup);
                iElement.bind('keydown', handlePress);
                iElement.bind('input', function (e) {
                    handleKeyup(e);
                    handlePress(e);
                });
            }
        };
}]);
/** 
 * @ngdoc directive 
 * @name Layouts.att:Profile Blocks 
 * 
 * @description 
 *  <file src="src/profileBlocks/docs/readme.md" /> 
 * 
 * @usage
 *<!-- For more details on how to use this please refer the example section -->
 *<b2b-profile-block-set link-callback="callLinkFunction(profile)" make-default-profile="changeDefaultProfile(profile)" un-link-callback="callUnLinkFunction(profile)" profile-block-name="B2B">
 *<b2b-profile-block profile="bdProfile" radio-label="Make default profile" ng-model="defaultBDProfile" index="$index" ng-repeat="bdProfile in businessDirect">
 *    <p>  
 *        <label>BD Profile Name</label> 
 *        <label ng-if="bdProfile.linkedProfile" class="b2b-approval-icon"> Linked<i class="icon-primary-approval"></i></label> 
 *        <br/> 
 *        <span>{{bdProfile.userName}}</span> 
 *    </p> 
 *    <p>
 *        <label >Company Name</label> <br/>
 *        <span>{{bdProfile.companyName}}</span>
 *    </p>  
 *    <p>
 *        <label>Real Name</label>  <br/> 
 *        <span>{{bdProfile.name}}</span>
 *    </p>
 *</b2b-profile-block>
 *</b2b-profile-block-set> 
 * @example 
 *  <section id="code"> 
        <b>HTML + AngularJS</b> 
        <example module="b2b.att"> 
            <file src="src/profileBlocks/docs/demo.html" /> 
            <file src="src/profileBlocks/docs/demo.js" /> 
       </example> 
    </section> 
 * 
 */

angular.module('b2b.att.profileBlocks', [])
    .directive('b2bProfileBlockSet', [function() {
        return {
            restrict: 'EA',
            transclude: true,
            replace: false,
            scope: {
                linkCallback: '&',
                unLinkCallback: '&',
                makeDefaultProfile: '&',
                profileBlockName: '='

            },
            template: '<div ng-transclude></div>',
            controller: ['$scope', '$element', '$attrs', function(scope, elem, attr) {
                scope.profileBlockName = attr.profileBlockName;
                this.link = function(profile) {
                    if (angular.isFunction(scope.linkCallback)) {
                        scope.linkCallback({
                            'profile': profile
                        });
                    }
                };
                this.unLink = function(profile) {
                    if (angular.isFunction(scope.unLinkCallback)) {
                        scope.unLinkCallback({
                            'profile': profile
                        });
                    }
                };
                this.makeDefault = function(profile) {
                    if (angular.isFunction(scope.makeDefaultProfile)) {
                        scope.makeDefaultProfile({
                            'profile': profile
                        });
                    }
                };
                this.getProifleBlockName = function() {
                    return scope.profileBlockName;
                };
                this.getProfileBlockSetScope = function() {
                    return scope;
                };

            }],
            link: function(scope) {}
        };
    }])
    .directive('b2bProfileBlock', [function() {
        return {
            restrict: 'EA',
            replace: true,
            transclude:true,
            require: ['^b2bProfileBlockSet'],
            templateUrl: 'template/profileBlocks/profileBlocks.html',
            scope: {
                profile: '=',
                index: '=',
                radioLabel: '@',
                ngModel: '='
            },
            controller: ['$scope', '$element', '$attrs', function(scope, elem, attr) {
                 this.profileObject = function() {
                    return scope.profile;
                };
             }],
            link: function(scope, elem, attr, blockSetCtrl) {
                scope.profileBlockSetScope = blockSetCtrl[0].getProfileBlockSetScope();
                scope.profileBlockName = blockSetCtrl[0].getProifleBlockName();
                scope.profileBlockSetScope.profileRadio = scope.ngModel;
                //scope.radioModel = scope.ngModel;
                if (attr.radioLabel) { 
                    scope.radioLabel = attr.radioLabel;
                }else {
                    scope.radioLabel = "Make Default Profile";
                }
                scope.defaultProfile = function(profile) {
                    blockSetCtrl[0].makeDefault(profile);
                };
            }
        };
    }])
    
    .directive('b2bProfileBlockClick', [function() {
        return {
            restrict: 'EA',
            scope: {
                profileObject: '='
            },
            require: ['^b2bProfileBlock','^b2bProfileBlockSet'],
            link: function (scope, element, attr, blockSetCtrl){
                
                scope.profileObject = blockSetCtrl[0].profileObject();
                element.bind('click', function (){ 
                    if (attr.b2bLinkType === 'link') {
                        blockSetCtrl[1].link(scope.profileObject);
                    } else {
                        blockSetCtrl[1].unLink(scope.profileObject);
                    }
                });
            }
        }
    }]);
    
    
    

/**
 * @ngdoc directive
 * @name Layouts.att:profileCard
 *
 * @description
 *  <file src="src/profileCard/docs/readme.md" />
 *
 * @usage
 *  <b2b-profile-card></b2b-profile-card>
 *
 * @example
    <section id="code">   
        <b>HTML + AngularJS</b>
        <example module="b2b.att">
            <file src="src/profileCard/docs/demo.html" />
            <file src="src/profileCard/docs/demo.js" />
        </example>
    </section>
 */

angular.module('b2b.att.profileCard', ['ddh.att'])
.constant('profileStatus',{
    status: {
        ACTIVE: {
            status: "Active",
            color: "green"
        },
        DEACTIVATED: {
            status: "Deactivated",
            color: "red"
        },
        LOCKED: {
            status: "Locked",
            color: "red"
        },
        IDLE: {
            status: "Idle",
            color: "yellow"
        },
        PENDING: {
            status: "Pending",
            color: "blue"
        }
    },
    role: "COMPANY ADMINISTRATOR"

})
.directive('b2bProfileCard',['$http','$q','profileStatus', function($http,$q,profileStatus) {
   return {
        restrict: 'EA',
        replace: 'true',
        templateUrl: function(element, attrs){
            if(!attrs.addUser){
                return 'template/profileCard/profileCard.html';
            }
            else{
                return 'template/profileCard/profileCard-addUser.html';
            }
        },
        scope: {
            profile:'=',
            characterLimit: '@'
        },
        link: function(scope, elem, attr){
        	scope.characterLimit = parseInt(attr.characterLimit, 10) || 25;
        	scope.shouldClip = function(str) {
        		return str.length > scope.characterLimit;
        	};

        	scope.showEmailTooltip = false;

            scope.image=true;
            function isImage(src) {
                var deferred = $q.defer();
                var image = new Image();
                image.onerror = function() {
                    deferred.reject(false);
                };
                image.onload = function() {
                    deferred.resolve(true);
                };
                if(src !== undefined && src.length>0 ){
                    image.src = src;
                } else {
                     deferred.reject(false);
                }
                return deferred.promise;
            }
            if(!attr.addUser){
            scope.image=false;
            isImage(scope.profile.img).then(function(img) {
                scope.image=img;
            });
            var splitName=(scope.profile.name).split(' ');
            scope.initials='';
            for(var i=0;i<splitName.length;i++){
                scope.initials += splitName[i][0];
            }
            if(scope.profile.role.toUpperCase() === profileStatus.role){
                scope.badge=true;
            }
            var profileState=profileStatus.status[scope.profile.state.toUpperCase()];
            if(profileState) {
                scope.profile.state=profileStatus.status[scope.profile.state.toUpperCase()].status;
                scope.colorIcon=profileStatus.status[scope.profile.state.toUpperCase()].color;
                if(scope.profile.state.toUpperCase()===profileStatus.status.PENDING.status.toUpperCase()||scope.profile.state.toUpperCase()===profileStatus.status.LOCKED.status.toUpperCase()){
                        scope.profile.lastLogin=scope.profile.state;
                }
            }
            var today=new Date().getTime();
            var lastlogin=new Date(scope.profile.lastLogin).getTime();
            var diff=(today-lastlogin)/(1000*60*60*24);
            if(diff<=1){
                scope.profile.lastLogin="Today";
            }
            else if(diff<=2){
                scope.profile.lastLogin="Yesterday";
            }
        }
    }
};
}]);
/**
 * @ngdoc directive
 * @name Buttons, links & UI controls.att:Seek bar
 *
 * @description
 *  <file src="src/seekBar/docs/readme.md" />
 *
 * @usage
 *  Horizontal Seek Bar
 *	<b2b-seek-bar min="0" max="400" step="1" skip-interval="1" data-ng-model="horizontalSeekBarVal" style="width:180px; margin: auto;" on-drag-end="onDragEnd()" on-drag-init="onDragStart()"></b2b-seek-bar>

 *	Vertical Seek Bar
 *	<b2b-seek-bar min="0" max="1" step="0.01" skip-interval="0.1" vertical data-ng-model="verticalSeekBarVal" style=" width: 6px; height: 180px; margin: auto;"></b2b-seek-bar>
 *
 * @example
    <section id="code">   
        <b>HTML + AngularJS</b>
        <example module="b2b.att">
            <file src="src/seekBar/docs/demo.html" />
            <file src="src/seekBar/docs/demo.js" />
        </example>
    </section>
 */

angular.module('b2b.att.seekBar', ['ddh.att.utilities','ddh.att.position'])
        .constant('b2bSeekBarConfig', {
            'min': 0,
            'max': 100,
            'step': 1,
            'skipInterval': 1
        })
        .directive('b2bSeekBar', ['$documentBind', 'events', 'b2bSeekBarConfig', 'keymap', '$compile', function($documentBind, events, b2bSeekBarConfig, keymap, $compile) {
                return {
                    restrict: 'AE',
                    replace: true,
                    require: 'ngModel',
                    templateUrl: 'template/seekBar/seekBar.html',
                    scope: {
                        onDragEnd: '&?',
                        onDragInit: '&?'
                    },
                    link: function(scope, elm, attr, ngModelCtrl) {
                        scope.isDragging = false;
                        scope.verticalSeekBar = false;
                        var min;
                        var max;
                        var step = b2bSeekBarConfig.step;
                        var skipInterval = b2bSeekBarConfig.skipInterval;
                        var knob = angular.element(elm[0].querySelector('.b2b-seek-bar-knob-container'));
                        var seekBarKnob = angular.element(knob[0].querySelector('.b2b-seek-bar-knob'));
                        var trackContainer = angular.element(elm[0].querySelector('.b2b-seek-bar-track-container'));
                        var trackFill = angular.element(elm[0].querySelector('.b2b-seek-bar-track-fill'));
                        var trackContainerRect = {};
                        var axisPosition;
                        var trackFillOrderPositioning;

                        if (angular.isDefined(attr.vertical)) {
                            scope.verticalSeekBar = true;
                            axisPosition = "clientY";
                        }
                        else {
                            scope.verticalSeekBar = false;
                            axisPosition = "clientX";
                        }
                        var getValidStep = function(val) {
                            val = parseFloat(val);
                            // in case $modelValue came in string number
                            if (angular.isNumber(val)) {
                                val = Math.round((val - min) / step) * step + min;
                                return Math.round(val * 1000) / 1000;
                            }
                        };

                        var getPositionToPercent = function(x) {
                            if (scope.verticalSeekBar) {
                                return Math.max(0, Math.min(1, (trackContainerRect.bottom - x) / (trackFillOrderPositioning)));
                            }
                            else {
                                return Math.max(0, Math.min(1, (x - trackContainerRect.left) / (trackFillOrderPositioning)));
                            }
                        };

                        var getPercentToValue = function(percent) {
                            return (min + percent * (max - min));
                        };

                        var getValueToPercent = function(val) {
                            return (val - min) / (max - min);
                        };

                        var getValidMinMax = function(val) {
                            return Math.max(min, Math.min(max, val));
                        };

                        var updateTrackContainerRect = function() {
                            trackContainerRect = trackContainer[0].getBoundingClientRect();
                            if (scope.verticalSeekBar) {
                                if (!trackContainerRect.height) {
                                    trackFillOrderPositioning = trackContainer[0].scrollHeight;
                                } else {
                                    trackFillOrderPositioning = trackContainerRect.height;
                                }
                            }
                            else {
                                if (!trackContainerRect.width) {
                                    trackFillOrderPositioning = trackContainer[0].scrollWidth;
                                } else {
                                    trackFillOrderPositioning = trackContainerRect.width;
                                }

                            }

                        };

                        var updateKnobPosition = function(percent) {
                            var percentStr = (percent * 100) + '%';
                            if (scope.verticalSeekBar) {
                                knob.css('bottom', percentStr);
                                trackFill.css('height', percentStr);
                            }
                            else {
                                knob.css('left', percentStr);
                                trackFill.css('width', percentStr);
                            }
                        };

                        var modelRenderer = function() {
                            if (isNaN(ngModelCtrl.$viewValue)) {
                                ngModelCtrl.$viewValue = ngModelCtrl.$modelValue || min;
                            }

                            var viewVal = ngModelCtrl.$viewValue;
                            scope.currentModelValue = viewVal;

                            //wait for min, max and step to be set then only update UI to avoid NaN on percent calculation
                            if ((min || min === 0) && max && step) {
                                updateKnobPosition(getValueToPercent(viewVal));
                            }
                        };

                        var setModelValue = function(val) {
                            scope.currentModelValue = getValidMinMax(getValidStep(val));
                            ngModelCtrl.$setViewValue(scope.currentModelValue);
                        };

                        var updateMin = function(val) {
                            min = parseFloat(val);
                            if(isNaN(min)){
                               min = b2bSeekBarConfig.min; 
                            }
                            modelRenderer();
                        };

                        var updateMax = function(val) {
                            max = parseFloat(val);
                            if(isNaN(max)){
                               max = b2bSeekBarConfig.max; 
                            }
                            modelRenderer();
                        };

                        var updateStep = function(val) {
                            step = parseFloat(val);
                            if (!attr['skipInterval']) {
                                skipInterval = step;
                            }
                        };

                        var updateSkipInterval = function(val) {
                            skipInterval = step * Math.ceil(val / (step!==0?step:1));
                        };

                        angular.isDefined(attr.min) ? attr.$observe('min', updateMin) : updateMin(b2bSeekBarConfig.min);
                        angular.isDefined(attr.max) ? attr.$observe('max', updateMax) : updateMax(b2bSeekBarConfig.max);
                        if (angular.isDefined(attr.step)) {
                            attr.$observe('step', updateStep);
                        }
                        if (angular.isDefined(attr.skipInterval)) {
                            attr.$observe('skipInterval', updateSkipInterval);
                        }
                        scope.currentModelValue = getValidMinMax(getValidStep(min));
                        var onMouseDown = function(e) {
                            switch (e.which) {
                                case 1:
                                    // left mouse button
                                    break;
                                case 2:
                                case 3:
                                    // right or middle mouse button
                                    return;
                            }
                            ;

                            scope.isDragging = true;
                            seekBarKnob[0].focus();
                            updateTrackContainerRect();
                            if (attr['onDragInit']) {
                                scope.onDragInit();
                            }
                            events.stopPropagation(e);
                            events.preventDefault(e);
                             scope.$apply(function() {
                                setModelValue(getPercentToValue(getPositionToPercent(e[axisPosition])));
                            });
                        };

                        var onMouseUp = function() {

                            if (attr['onDragEnd']) {
                                scope.onDragEnd();
                            }
                            scope.isDragging = false;
                            scope.$digest();
                        };

                        var onMouseMove = function(e) {
                            if (scope.isDragging) {
                                events.stopPropagation(e);
                                events.preventDefault(e);

                                scope.$apply(function() {
                                    setModelValue(getPercentToValue(getPositionToPercent(e[axisPosition])));
                                });
                            }
                        };

                        function onKeyDown(e) {
                            if (!(e.keyCode)) {
                                e.keyCode = e.which;
                            }
                            var updateStep;
                            switch (e.keyCode) {
                                case keymap.KEY.LEFT:
                                    if (!scope.verticalSeekBar) {
                                        updateStep = -skipInterval;
                                    }
                                    break;
                                case keymap.KEY.RIGHT:
                                    if (!scope.verticalSeekBar) {
                                        updateStep = skipInterval;
                                    }
                                    break;
                                case keymap.KEY.UP:
                                    if (scope.verticalSeekBar) {
                                        updateStep = skipInterval;
                                    }
                                    break;
                                case keymap.KEY.DOWN:
                                    if (scope.verticalSeekBar) {
                                        updateStep = -skipInterval;
                                    }
                                    break;
                                default:
                                    return;
                            }

                            if (updateStep) {
                                events.stopPropagation(e);
                                events.preventDefault(e);
                                scope.$apply(function() {
                                    setModelValue(ngModelCtrl.$viewValue + updateStep);
                                });
                                if (attr['onDragEnd']) {
                                scope.onDragEnd();
                            }
                            }
                        }

                        elm.on('keydown', onKeyDown);
                        elm.on('mousedown', onMouseDown);

                        $documentBind.event('mousemove', 'isDragging', onMouseMove, scope, true, 0);
                        $documentBind.event('mouseup', 'isDragging', onMouseUp, scope, true, 0);

                        ngModelCtrl.$render = function() {
                            if (!scope.isDragging) {
                                modelRenderer();
                            }
                        };
                        ngModelCtrl.$viewChangeListeners.push(modelRenderer);
                        ngModelCtrl.$formatters.push(getValidMinMax);
                        ngModelCtrl.$formatters.push(getValidStep);
                    }
                };
            }]);
/**
 * @ngdoc directive
 * @name Buttons, links & UI controls.att:slider
 *
 * @description
 *  <file src="src/slider/docs/readme.md" />
 *
 * @usage
 *  <b2b-slider min="0" max="400" step="1" no-aria-label skip-interval="1" ng-model="horizontalSliderVal" style="width:180px; margin: auto;" on-drag-end="onDragEnd()" on-drag-init="onDragStart()" label-id="slider-label" post-aria-label="postAriaLabel"></b2b-slider>
 *
 * @example
    <section id="code">   
        <b>HTML + AngularJS</b>
        <example module="b2b.att">
            <file src="src/slider/docs/demo.html" />
            <file src="src/slider/docs/demo.js" />
        </example>
    </section>
 */

angular.module('b2b.att.slider', ['ddh.att.utilities'])
        .constant('SliderConfig', {
            'min': 0,
            'max': 100,
            'step': 1,
            'skipInterval': 1
        })
        .directive('b2bSlider', ['$documentBind', 'SliderConfig', 'keymap', '$compile', '$log', function($documentBind, SliderConfig, keymap, $compile, $log) {
                return {
                    restrict: 'AE',
                    replace: true,
                    require: 'ngModel',
                    templateUrl: 'template/slider/slider.html',
                    scope: {
                        onDragEnd: '&?',
                        onDragInit: '&?',
                        trackFillColor: '=?',
                        preAriaLabel: '=?',
                        postAriaLabel: '=?',
                        onRenderEnd: '&?',
                        sliderSnapPoints: '=?',
                        customAriaLabel: '=?',
                        labelId: '@?'
                    },
                    link: function(scope, elm, attr, ngModelCtrl) {
                        scope.isDragging = false;
                        scope.verticalSlider = false;
                        var min;
                        var max;
                        var step = SliderConfig.step;
                        var skipInterval = SliderConfig.skipInterval;
                        var knob = angular.element(elm[0].querySelector('.slider-knob-container'));
                        var sliderKnob = angular.element(knob[0].querySelector('.slider-knob'));
                        var trackContainer = angular.element(elm[0].querySelector('.slider-track-container'));
                        var trackFill = angular.element(elm[0].querySelector('.slider-track-fill'));
                        var trackContainerRect = {};
                        var axisPosition = "clientX";
                        var trackFillOrderPositioning;

                        //Forcefully disabling the vertical Slider code.
                        if (angular.isDefined(attr.vertical)) {
                            scope.verticalSlider = true;
                            axisPosition = "clientY";
                        }

                        if (angular.isDefined(scope.noAriaLabel) && scope.noAriaLabel !== '') {
                            $log.warn('no-aria-label has been deprecated. This will be removed in v0.6.0.');
                        }
                        if (angular.isDefined(scope.preAriaLabel) && scope.preAriaLabel !== '') {
                            $log.warn('pre-aria-label has been deprecated. Please use label-id instead. This will be removed in v0.6.0.');
                        }
                        if (angular.isDefined(scope.customAriaLabel) && scope.customAriaLabel !== '') {
                            $log.warn('custom-aria-label has been deprecated. Please use label-id and post-aria-label instead. This will be removed in v0.6.0.');
                        }

                        var binarySearchNearest = function (num, arr) {
                            var mid;
                            var lo = 0;
                            var hi = arr.length - 1;
                            
                            while (hi - lo > 1) {
                                mid = Math.floor((lo + hi) / 2);
                                if (arr[mid] < num) {
                                    lo = mid;
                                } else {
                                    hi = mid;
                                }
                            }
                            if (num - arr[lo] < arr[hi] - num) {
                                return arr[lo];
                            }
                            return arr[hi];
                        };
                        
                        var getValidStep = function(val) {
                            val = parseFloat(val);
                            // in case $modelValue came in string number
                            if (!isNaN(val)) {
                                
                                if(attr['sliderSnapPoints'] && scope.sliderSnapPoints.length > 0) {
                                    val = binarySearchNearest(val, scope.sliderSnapPoints);
                                }
                                else {
                                    val = Math.round((val - min) / step) * step + min;
                                }
                                
                                return Math.round(val * 1000) / 1000;
                            }
                        };

                        var getPositionToPercent = function(x) {
                            if (scope.verticalSlider) {
                                return Math.max(0, Math.min(1, (trackContainerRect.bottom - x) / (trackFillOrderPositioning)));
                            }
                            else {
                                return Math.max(0, Math.min(1, (x - trackContainerRect.left) / (trackFillOrderPositioning)));
                            }
                        };

                        var getPercentToValue = function(percent) {
                            return (min + percent * (max - min));
                        };

                        var getValueToPercent = function(val) {
                            return (val - min) / (max - min);
                        };

                        var getValidMinMax = function(val) {
                            return Math.max(min, Math.min(max, val));
                        };

                        var updateTrackContainerRect = function() {
                            trackContainerRect = trackContainer[0].getBoundingClientRect();
                            if (scope.verticalSlider) {
                                if (!trackContainerRect.height) {
                                    trackFillOrderPositioning = trackContainer[0].scrollHeight;
                                } else {
                                    trackFillOrderPositioning = trackContainerRect.height;
                                }
                            }
                            else {
                                if (!trackContainerRect.width) {
                                    trackFillOrderPositioning = trackContainer[0].scrollWidth;
                                } else {
                                    trackFillOrderPositioning = trackContainerRect.width;
                                }

                            }

                        };

                        var updateKnobPosition = function(percent) {
                            var percentStr = (percent * 100) + '%';
                            if (scope.verticalSlider) {
                                knob.css('bottom', percentStr);
                                trackFill.css('height', percentStr);
                            }
                            else {
                                knob.css('left', percentStr);
                                trackFill.css('width', percentStr);
                            }
                        };

                        var modelRenderer = function() {

                            if(attr['disabled']){
                                return;
                            }

                            if (isNaN(ngModelCtrl.$viewValue)) {
                                ngModelCtrl.$viewValue = ngModelCtrl.$modelValue || min;
                            }

                            var viewVal = ngModelCtrl.$viewValue;
                            scope.currentModelValue = viewVal;

                            //wait for min, max and step to be set then only update UI to avoid NaN on percent calculation
                            if ((min || min === 0) && max && step) {
                                updateKnobPosition(getValueToPercent(viewVal));
                            }
                        };

                        var setModelValue = function(val) {
                            scope.currentModelValue = getValidMinMax(getValidStep(val));
                            ngModelCtrl.$setViewValue(scope.currentModelValue);
                        };

                        var updateMin = function(val) {
                            min = parseFloat(val);
                            if(isNaN(min)){
                               min = SliderConfig.min; 
                            }
                            scope.min = min;
                            modelRenderer();
                        };

                        var updateMax = function(val) {
                            max = parseFloat(val);
                            if(isNaN(max)){
                               max = SliderConfig.max; 
                            }
                            scope.max = max;
                            modelRenderer();
                        };

                        var updateStep = function(val) {
                            step = parseFloat(val);
                            if (!attr['skipInterval']) {
                                skipInterval = step;
                            }
                        };

                        var updateSkipInterval = function(val) {
                            skipInterval = step * Math.ceil(val / (step!==0?step:1));
                        };

                        angular.isDefined(attr.min) ? attr.$observe('min', updateMin) : updateMin(SliderConfig.min);
                        angular.isDefined(attr.max) ? attr.$observe('max', updateMax) : updateMax(SliderConfig.max);
                        if (angular.isDefined(attr.step)) {
                            attr.$observe('step', updateStep);
                        }
                        if (angular.isDefined(attr.skipInterval)) {
                            attr.$observe('skipInterval', updateSkipInterval);
                        }
                        scope.currentModelValue = getValidMinMax(getValidStep(min));
                        var onMouseDown = function(e) {

                            if(attr['disabled']){
                                return;
                            }

                            switch (e.which) {
                                case 1:
                                    // left mouse button
                                    break;
                                case 2:
                                case 3:
                                    // right or middle mouse button
                                    return;
                            }

                            scope.isDragging = true;
                            sliderKnob[0].focus();
                            updateTrackContainerRect();
                            if (attr['onDragInit']) {
                                scope.onDragInit();
                            }
                            e.stopPropagation();
                            e.preventDefault();
                             scope.$apply(function() {
                                setModelValue(getPercentToValue(getPositionToPercent(e[axisPosition])));
                            });
                        };

                        var onMouseUp = function() {

                            if (attr['onDragEnd']) {
                                scope.onDragEnd();
                            }
                            scope.isDragging = false;
                            scope.$digest();
                        };

                        var onMouseMove = function(e) {
                            if (scope.isDragging) {
                                e.stopPropagation();
                                e.preventDefault();

                                scope.$apply(function() {
                                    setModelValue(getPercentToValue(getPositionToPercent(e[axisPosition])));
                                });
                            }
                        };

                        function onKeyDown(e) {
                            if (!(e.keyCode)) {
                                e.keyCode = e.which;
                            }
                            var updateStep;
                            switch (e.keyCode) {
                                case keymap.KEY.DOWN:
                                case keymap.KEY.LEFT:
                                    if(attr['sliderSnapPoints'] && scope.sliderSnapPoints.length > 0) {
                                        var currentIndex = scope.sliderSnapPoints.indexOf(ngModelCtrl.$viewValue);
                                        if (currentIndex > 0) {
                                            currentIndex--;
                                        }
                                        updateStep = scope.sliderSnapPoints[currentIndex];
                                    }
                                    else {
                                        updateStep = ngModelCtrl.$viewValue - skipInterval;
                                    }
                                    break;
                                case keymap.KEY.UP:
                                case keymap.KEY.RIGHT:
                                    if(attr['sliderSnapPoints'] && scope.sliderSnapPoints.length > 0) {
                                        var currentIndex = scope.sliderSnapPoints.indexOf(ngModelCtrl.$viewValue);
                                        if (currentIndex < scope.sliderSnapPoints.length-1) {
                                            currentIndex++;
                                        }
                                        updateStep = scope.sliderSnapPoints[currentIndex];
                                    }
                                    else {
                                        updateStep = ngModelCtrl.$viewValue + skipInterval;
                                    }
                                    break;
                                default:
                                    return;
                            }

                            if (angular.isNumber(updateStep) && !attr['disabled']) {
                                e.stopPropagation();
                                e.preventDefault();
                                scope.$apply(function() {
                                    setModelValue(updateStep);
                                });
                                if (attr['onDragEnd']) {
                                    scope.onDragEnd();
                                }
                            }
                        }

                        elm.on('keydown', onKeyDown);
                        elm.on('mousedown', onMouseDown);

                        $documentBind.event('mousemove', 'isDragging', onMouseMove, scope, true, 0);
                        $documentBind.event('mouseup', 'isDragging', onMouseUp, scope, true, 0);

                        attr.$observe('disabled', function (disabled) {
                            if (disabled) {
                                sliderKnob.removeAttr('tabindex');
                            } else {
                                sliderKnob.attr('tabindex', '0');
                                disabled = false;
                            }

                            elm.toggleClass("slider-disabled", disabled);

                            if (angular.isDefined(attr.hideDisabledKnob)) {
                                scope.hideKnob = disabled;
                            }
                        });

                        ngModelCtrl.$render = function() {
                            if (!scope.isDragging) {
                                modelRenderer();
                                if (attr['onRenderEnd'] && !attr['disabled']) {
                                    scope.onRenderEnd({currentModelValue: scope.currentModelValue});
                                }
                            }
                        };
                        ngModelCtrl.$viewChangeListeners.push(modelRenderer);
                        ngModelCtrl.$formatters.push(getValidMinMax);
                        ngModelCtrl.$formatters.push(getValidStep);
                    }
                };
            }]);
/**
 * @ngdoc directive
 * @name Misc.att:statusTracker
 *
 * @description
 * <file src="src/statusTracker/docs/readme.md" />
 *
 * @usage
 *
<div ng-controller="statusTrackerController">
    <b2b-status-tracker statuses="statusObject">
        
    </b2b-status-tracker>
</div>

 * @example
    <section id="code">   
        <b>HTML + AngularJS</b>
        <example module="b2b.att">
            <file src="src/statusTracker/docs/demo.html" />
            <file src="src/statusTracker/docs/demo.js" />
        </example>
    </section>
 */

angular.module('b2b.att.statusTracker', ['ddh.att.utilities']).
    directive('b2bStatusTracker', [function() {
        return {
            restrict: 'EA',
            transclude: false,
            replace: true,
            scope:{
                statuses: '='
            },
            templateUrl: 'template/statusTracker/statusTracker.html',
            link: function(scope, element, attr) {

            }
        };
    }]);
/**
 * @ngdoc directive
 * @name Messages, modals & alerts.att:tableMessages
 *
 * @description
 *  <file src="src/tableMessages/docs/readme.md" />
 *
 * @usage
    <!-- no matching results -->
    <b2b-table-message msg-type="'noMatchingResults'">
       <p>No Matching Results</p>
    </b2b-table-message>
  
    <!-- info could not load -->
    <b2b-table-message msg-type="'infoCouldNotLoad'" on-refresh-click="refreshClicked()">
    </b2b-table-message>
   
    <!-- magnify search -->
    <b2b-table-message msg-type="'magnifySearch'">
    </b2b-table-message>
   
    <!-- loading data -->
    <b2b-table-message msg-type="'loadingTable'">
          <!-- custom html -->
          <p>The data is currently loading...</p>
    </b2b-table-message>

 * @example
    <section id="code">   
        <b>HTML + AngularJS</b>
        <example module="b2b.att">
            <file src="src/tableMessages/docs/demo.html" />
            <file src="src/tableMessages/docs/demo.js" />
        </example>
    </section>
 */
angular.module('b2b.att.tableMessages', [])
    .directive('b2bTableMessage', [function() {
        return {
            restrict: 'AE',
            replace: true,
            transclude: true,
            scope: {
                msgType: '=',
                onRefreshClick: '&'
            },
            templateUrl: 'template/tableMessages/tableMessage.html',
            link: function(scope) {
                scope.refreshAction = function(evt) {
                    scope.onRefreshClick(evt);
                };
            }
        };
    }]);

/**
 * @ngdoc directive
 * @name Tabs, tables & accordions.att:tableScrollbar
 *
 * @description
 *  <file src="src/tableScrollbar/docs/readme.md" />
 *
 * @usage
 * 
<b2b-table-scrollbar>
    <table>
        <thead type="header">
            <tr>
                <th role="columnheader" scope="col" key="Id" id="col1">Id</th>
                .....
            </tr>
        </thead>
        <tbody type="body">
            <tr>
                <td id="rowheader0" headers="col1">1002</td>
                .....
            </tr>
        </tbody>
    </table>
</b2b-table-scrollbar>
 *
 * @example
 *  <section id="code">
        <example module="b2b.att">
            <file src="src/tableScrollbar/docs/demo.html" />
            <file src="src/tableScrollbar/docs/demo.js" />
       </example>
    </section>
 *
 */
angular.module('b2b.att.tableScrollbar', [])
    .directive('b2bTableScrollbar', ['$timeout', function ($timeout) {
        return {
            restrict: 'E',
            scope: true,
            transclude: true,
            templateUrl: 'template/tableScrollbar/tableScrollbar.html',
            link: function (scope, element, attrs, ctrl) {
                var firstThWidth, firstTdWidth, firstColumnWidth, firstColumnHeight, trHeight = 0;
                var pxToScroll = '';
                var tableElement = element.find('table');
                var thElements = element.find('th');
                var tdElements = element.find('td');
                var innerContainer = angular.element(element[0].querySelector('.b2b-table-inner-container'));
                var outerContainer = angular.element(element[0].querySelector('.b2b-table-scrollbar'));

                scope.disableLeft = true;
                scope.disableRight = false;

                if (angular.isDefined(thElements[0])) {
                    firstThWidth = thElements[0].offsetWidth;
                }
                if (angular.isDefined(tdElements[0])) {
                    firstTdWidth = tdElements[0].offsetWidth;
                }
                firstColumnWidth = (firstThWidth > firstTdWidth) ? firstThWidth : firstTdWidth;

                innerContainer.css({
                    'padding-left': (firstColumnWidth + 2) + 'px'
                });

                angular.forEach(element.find('tr'), function (eachTr, index) {
                    trObject = angular.element(eachTr);
                    firstColumn = angular.element(trObject.children()[0]);

                    angular.element(firstColumn).css({
                        'margin-left': -(firstColumnWidth + 2) + 'px',
                        'width': (firstColumnWidth + 2) + 'px',
                        'position': 'absolute'
                    });

                    trHeight = trObject[0].offsetHeight;
                    firstColumnHeight = firstColumn[0].offsetHeight;
                    if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1) {
                        firstColumnHeight += 1;
                    }

                    if (trHeight !== firstColumnHeight - 1) {
                        if (trHeight > firstColumnHeight) {
                            if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1) {
                                trHeight -= 1;
                            }
                            angular.element(firstColumn).css({
                                'height': (trHeight + 1) + 'px'
                            });
                        } else {
                            angular.element(trObject).css({
                                'height': (firstColumnHeight - 1) + 'px'
                            });
                        }
                    }

                });

                pxToScroll = outerContainer[0].offsetWidth - firstColumnWidth;

                scope.scrollLeft = function () {
                    innerContainer[0].scrollLeft = innerContainer[0].scrollLeft + 20 - pxToScroll;
                };

                scope.scrollRight = function () {
                    innerContainer[0].scrollLeft = innerContainer[0].scrollLeft + pxToScroll - 20;
                };

                scope.checkScrollArrows = function () {
                    if (innerContainer[0].scrollLeft == 0) {
                        scope.disableLeft = true;
                    } else {
                        scope.disableLeft = false;
                    }

                    if (((innerContainer[0].offsetWidth - firstColumnWidth) + innerContainer[0].scrollLeft) >= tableElement[0].offsetWidth) {
                        scope.disableRight = true;
                    } else {
                        scope.disableRight = false;
                    }
                };

                innerContainer.bind('scroll', function () {
                    $timeout(function () {
                        scope.checkScrollArrows();
                    }, 1);
                });

            }
        };
    }]);
/**
 * @ngdoc directive
 * @name Messages, modals & alerts.att:tagBadges
 *
 * @description
 *  <file src="src/tagBadges/docs/readme.md" />
 *
 * @usage
    <div b2b-tag-badge>
        <span class="tags__item" role="button" tabindex="0" ddh-accessibility-click="13,32" aria-label="Remove Texas">
                Texas
                <i class="icon-primary-close"></i>
        </span>
    </div>
    Or 
    <b2b-tag-badge>
        <span class="tags__item" role="button" tabindex="0" ddh-accessibility-click="13,32" aria-label="Remove Utah">
            Utah
            <i class="icon-primary-close"></i>
        </span>
    </b2b-tag-badge>
 * @example
 *  <section id="code">
        <example module="b2b.att">
            <file src="src/tagBadges/docs/demo.html" />
            <file src="src/tagBadges/docs/demo.js" />
        </example>
    </section>
 *
 */
angular.module('b2b.att.tagBadges', ['ddh.att.utilities'])
        .directive('b2bTagBadge',['$timeout',function($timeout){
            return{
                restrict: 'EA',
                link: function(scope,elem,attr,ctrl){
                    elem.addClass('b2b-tags');
                    if(angular.element(elem[0].querySelector('.icon-primary-close')).length>0) {
                        var item = angular.element(elem[0].querySelector('.icon-primary-close'));
                        item.bind('click',function(){
                        elem.css({'height':'0','width':'0','padding':'0','border':'0'});
                        elem.attr('tabindex','0');
                        elem[0].focus();
                        item.parent().remove();
                        elem[0].bind('blur',function(){
                            elem[0].remove();
                        });
                    });  
                    }
                  



                }
            };   
}]);
/**
 * @ngdoc directive
 * @name Navigation.att:Tree Navigation
 *
 * @description
 *  <file src="src/treeNav/docs/readme.md" />
 *
 * @usage
 *      <div class="b2b-tree">
 *                <b2b-tree-nav collection="treeStructure" divide-in="10" set-role="tree" group-it="false"></b2b-tree-nav>
 *            </div>
 * @example
 *  <section id="code">
        <example module="b2b.att">
            <file src="src/treeNav/docs/demo.html" />
            <file src="src/treeNav/docs/demo.js" />
       </example>
    </section>
 *
 */
angular.module('b2b.att.treeNav', ['ddh.att.utilities'])
    .directive('b2bTreeNav', function () {
        return {
            restrict: "E",
            replace: true,
            scope: {
                collection: '=',
                divideIn: '=',
                groupIt: '=',
                setRole: '@'
            },
            templateUrl: function (element, attrs) {
                if (attrs.groupIt === 'true') {
                    return "template/treeNav/groupedTree.html";
                } else {
                    return "template/treeNav/ungroupedTree.html";
                }
            },
            link: function (scope) {
                if (!(scope.setRole === 'tree')) {
                    scope.setRole = 'group';
                }
            }
        }
    })
    .directive('b2bMember', ['$compile', '$timeout', function ($compile, $timeout) {
        return {
            restrict: "E",
            replace: true,
            scope: {
                member: '=',
                divideIn: '=',
                groupIt: '='
            },
            templateUrl: 'template/treeNav/treeMember.html',
            link: function (scope, element, attrs) {
                scope.elemArr = [];
                scope.showChild = function (e) {
                    if (!element.hasClass('grouped')) {
                        if (angular.isArray(scope.member.child) && scope.member.child.length > 0 && scope.member.child.length < scope.divideIn) {
                            scope.groupIt = false;
                            element.addClass('grouped');
                            element.append("<b2b-tree-nav collection='member.child' group-it='" + scope.groupIt + "' divide-in='" + scope.divideIn + "'></b2b-tree-nav>");
                            $compile(element.contents())(scope);
                            e.stopPropagation();
                        } else if (scope.member.child && scope.member.child.length > scope.divideIn) {
                            element.addClass('grouped');
                            scope.groupIt = true;
                            // FILTER - GROUPBY - APPROACH 
                            var j = 0;
                            var toSlice = scope.member.child[0].name.search(' ');
                            var groupName = scope.member.child[0].name.slice(0, toSlice);
                            for (i = 0; i < scope.member.child.length; i += scope.divideIn) {
                                j = 0;
                                for (j = j + i; j < (i + scope.divideIn); j++) {
                                    if (j === scope.member.child.length) {
                                        scope.member.child[j - 1].grpChild = groupName + ' ' + (i + 1) + ' - ' + (scope.member.child.length);
                                        break;
                                    }
                                    if (i + scope.divideIn > scope.member.child.length) {
                                        scope.member.child[j].grpChild = groupName + ' ' + (i + 1) + ' - ' + (scope.member.child.length);

                                    } else {
                                        scope.member.child[j].grpChild = groupName + ' ' + (i + 1) + ' - ' + (i + scope.divideIn);
                                    }
                                }
                            }
                            element.append("<b2b-tree-nav collection='member.child' group-it='" + scope.groupIt + "' divide-in='" + scope.divideIn + "'></b2b-tree-nav>");
                            $compile(element.contents())(scope);
                            e.stopPropagation();
                        }
                    }
                };
                element.bind('keydown', function (evt) {
                    if (evt.keyCode == 13 && scope.member.job !== undefined) {
                        scope.member.job();
                    }
                });
            }
        }
}])
    .directive('b2bTreeLink', ['keymap', '$timeout', function (keymap, $timeout) {
        return {
            restrict: 'A',
            link: function (scope, element, attr, ctrl) {
                var rootE, parentE, upE, downE;
                var closeOthersUp = function (elem) {
                    if (elem.find('a').eq(0).hasClass('active')) {
                        activeToggle(elem);
                        return;
                    }
                    if (elem.hasClass('bg')) {
                        elem.removeClass('bg');
                        if (elem.attr('aria-selected')) {
                            elem.attr('aria-selected', 'false');
                        }                        
                    }
                    if (elem[0].previousElementSibling !== null) {
                        closeOthersUp(angular.element(elem[0].previousElementSibling));
                    }
                };
                var closeOthersDown = function (elem) {
                    if (elem.find('a').eq(0).hasClass('active')) {
                        activeToggle(elem);
                        return;
                    }
                    if (elem.hasClass('bg')) {
                        elem.removeClass('bg');
                        if (elem.attr('aria-selected')) {
                            elem.attr('aria-selected', 'false');
                        }                        
                    }
                    if (elem[0].nextElementSibling !== null) {
                        closeOthersDown(angular.element(elem[0].nextElementSibling));
                    }
                };

                var removeBackgroundUp = function (elem) {
                    if (elem.hasClass('b2b-tree')) {
                        return;
                    } else {
                        elem.parent().parent().removeClass('bg');
                        removeBackgroundUp(elem.parent().parent());
                    }
                };

                var removeBackgroundDown = function (elem) {
                    angular.element(elem[0].querySelector('.bg')).removeClass('bg');
                };
                var addParentHeight = function(e, h) {
                    var parentLi = e.parent().parent();
                    var parentUl = e.parent();
                    if(!parentLi.hasClass('b2b-tree')) {
                        var addHeight = parentUl[0].offsetHeight + h;
                        parentLi.find('ul').eq(0).css({
                            height: addHeight+'px'
                        })
                        addParentHeight(parentLi, h);
                    }                    
                };
                var clickDisabled = false;
                var removeParentHeight = function(e, h) {
                    var parentLi = e.parent().parent();
                    var parentUl = e.parent();
                    if(!parentLi.hasClass('b2b-tree')) {
                        var addHeight = parentUl[0].offsetHeight - h;
                        parentLi.find('ul').eq(0).css({
                            height: addHeight+'px'
                        })
                        removeParentHeight(parentLi, h);
                    }
                };

                var activeToggle = function (elem) {
                    var element = elem.find('a').eq(0);
                    if (element.hasClass('active')) {
                        elem.removeClass('bg');
                        if (elem.attr('aria-selected')) {
                            elem.attr('aria-selected', 'false');
                        }
                        if (!element.find('i').eq(0).hasClass('icon-primary-circle')) {
                            element.removeClass('active');
                            elem.attr('aria-expanded', 'false');
                            element.find('i').eq(0).removeClass('icon-primary-expanded');
                            element.find('i').eq(0).addClass('icon-primary-collapsed');
                            
                            var totalHeight = elem.find('ul')[0].scrollHeight;
                            removeParentHeight(elem, totalHeight);
                            elem.find('ul').eq(0).css({
                                height: null
                            });
                        }
                    } else {
                        elem.addClass('bg');
                        elem.attr('aria-selected', 'true');
                        if (!element.find('i').eq(0).hasClass('icon-primary-circle')) {
                            element.addClass('active');
                            elem.attr('aria-expanded', 'true');
                            element.find('i').eq(0).removeClass('icon-primary-collapsed');
                            element.find('i').eq(0).addClass('icon-primary-expanded');
                            var totalHeight = elem.find('ul')[0].scrollHeight;
                            addParentHeight(elem, totalHeight);
                            elem.find('ul').eq(0).css({
                                height: totalHeight+'px'
                            });
                        }
                    }
                };
                element.bind('click', function (evt) {
                    //first we close others and then we open the clicked element
                    $timeout(function () {
                        if (element[0].previousElementSibling) {
                            closeOthersUp(angular.element(element[0].previousElementSibling));
                        }
                        if (element[0].nextElementSibling) {
                            closeOthersDown(angular.element(element[0].nextElementSibling));
                        }
                    }, 500).then(
                        activeToggle(element)
                    );
                    removeBackgroundDown(element);
                    removeBackgroundUp(element);
                    evt.stopPropagation();                    
                });
                //default root tree element tabindex set zero
                if (element.parent().parent().hasClass('b2b-tree') && (element.parent()[0].previousElementSibling === null)) {
                    element.attr('tabindex', 0);
                }
                //check root via class
                var isRoot = function (elem) {
                    if (elem.parent().parent().eq(0).hasClass('b2b-tree')) {
                        return true;
                    } else {
                        return false;
                    }
                };
                var findRoot = function (elem) {
                    if (isRoot(elem)) {
                        rootE = elem;
                        return;
                    }
                    findRoot(elem.parent());
                };

                var findPreActive = function (elem) {

                    if (!(elem.hasClass("active"))) {
                        return;
                    } else {
                        var childElems = angular.element(elem[0].nextElementSibling.children);
                        lastE = angular.element(childElems[childElems.length - 1]);
                        if (lastE.find('a').eq(0).hasClass('active')) {
                            findPreActive(lastE.find('a').eq(0));
                        }
                        upE = lastE;
                    }
                };

                var findUp = function (elem) {
                    if (isRoot(elem)) {
                        upE = elem;
                        return;
                    }
                    if (elem[0].previousElementSibling !== null && !angular.element(elem[0].previousElementSibling).hasClass('tree-hide')) {
                        upE = angular.element(elem[0].previousElementSibling);
                        if (upE.find('a').eq(0).hasClass('active')) {
                            findPreActive(upE.find('a').eq(0));
                        }
                    } else {
                        upE = elem.parent().parent();
                    }
                };

                var downElement = function (elem) {
                    if (elem.next().hasClass('tree-hide')) {
                        downElement(elem.next());
                    } else {
                        downE = elem.next();
                    }
                }
                var isBottomElem = false;
                var downParent = function(liElem){
                    if(liElem.eq(0).parent().parent().eq(0).hasClass('b2b-tree')){
                        isBottomElem = true;
                        return;
                    }
                    if(liElem.next().length !== 0){
                        downE = liElem.next().eq(0);
                        return;
                    }
                    else {
                        downParent(liElem.parent().parent());
                    }
                }
                
                var findDown = function (elem) {
                    if (isRoot(elem.parent()) && !elem.hasClass('active')) {
                        downE = elem.parent();
                        return;
                    }
                    if (elem.hasClass('active')) {
                        downE = elem.next().find('li').eq(0);
                        if (downE.hasClass('tree-hide')) {
                            downElement(downE);
                        }

                    } else {
                        downParent(elem.parent());
                        if(isBottomElem === true){
                            downE = elem.parent();
                            isBottomElem = false;
                        }
                    }
                };
                element.bind('keydown', function (evt) {
                    switch (evt.keyCode) {
                    case keymap.KEY.HOME:
                        evt.preventDefault();
                        evt.stopPropagation();
                        element.attr('tabindex', -1);
                        findRoot(element);
                        rootE.eq(0).attr('tabindex', 0);
                        rootE[0].focus();
                        break;
                    case keymap.KEY.LEFT:
                        evt.preventDefault();
                        evt.stopPropagation();
                        if (!isRoot(element)) {
                            element.attr('tabindex', -1);
                            parentE = element.parent().parent();
                            parentE.attr('tabindex', 0);
                            parentE[0].focus();
                            parentE.triggerHandler('click');
                        } else {
                            if (element.find('a').eq(0).hasClass('active')) {
                                element.triggerHandler('click');
                            }
                        };
                        break;
                    case keymap.KEY.UP:
                        evt.preventDefault();
                        evt.stopPropagation();
                        element.attr('tabindex', -1);
                        findUp(element);
                        upE.eq(0).attr('tabindex', 0);
                        upE[0].focus();
                        break;
                    case keymap.KEY.RIGHT:
                        evt.preventDefault();
                        evt.stopPropagation();
                        if(element.find('i').eq(0).hasClass('icon-primary-circle')){
                            break;
                        }    
                        if (!element.find('a').eq(0).hasClass('active')) {
                            element.triggerHandler('click');
                        }
                        element.attr('tabindex', -1);
                        findDown(element.find('a').eq(0));
                        downE.eq(0).attr('tabindex', 0);
                        downE[0].focus();
                        break;
                    case keymap.KEY.DOWN:
                        evt.preventDefault();
                        element.attr('tabindex', -1);
                        findDown(element.find('a').eq(0));
                        downE.eq(0).attr('tabindex', 0);
                        downE[0].focus();
                        evt.stopPropagation();
                        break;
                    case keymap.KEY.ENTER:
                        var enterFunc = function(element){
                            if (element.hasClass('bg')) {
                                element.removeClass('bg');
                                if (element.attr('aria-selected')) {
                                    element.attr('aria-selected', 'false');
                                }                        
                            }
                            else {
                                element.addClass('bg');
                                element.attr('aria-selected', 'true');                                   
                            }  
                        };                            
                        $timeout(function () {
                            if (element[0].previousElementSibling) {
                                closeOthersUp(angular.element(element[0].previousElementSibling));
                            }
                            if (element[0].nextElementSibling) {
                                closeOthersDown(angular.element(element[0].nextElementSibling));
                            }
                        }, 500).then(enterFunc(element));
                        removeBackgroundDown(element);
                        removeBackgroundUp(element);
                        evt.stopPropagation();                                                      
                        break;
                    default:
                        break;
                    }
                });
            }
        };
    }]);
/**
 * @ngdoc directive
 * @name Layouts.b2b:widget
 *
 * @description
 *  <file src="src/widget/docs/readme.md" />
 * @usage
 *    <b2b-widget-container>
 *        <b2b-widget-header heading="Business Direct">           
 *           <b2b-settings-menu>Add your setting menu options here</b2b-settings-menu>            
 *        </b2b-widget-header>
 *       <b2b-widget-content>Add Your content here</b2b-widget-content>
 *     </b2b-widget-container>     
 * @example
 <section id="code">              
   <b>HTML + AngularJS</b>
   <example module="b2b.att">
     <file src="src/widget/docs/demo.html" />
     <file src="src/widget/docs/demo.js" />
    </example>          
 </section>
 */
angular.module('b2b.att.widget', [])

    .directive('b2bWidgetContainer', function(){        
        return{
            restrict: 'EA',
            replace: true,
            transclude: true,
            scope:{isOpen:'=?'},
            templateUrl: 'template/widget/b2bWidgetContainer.html',
            controller: ['$scope', function ($scope){               
                var bodyScope;    
                $scope.isOpen = true;
                this.setScope = function (scope) {
                    bodyScope = scope; 
                    bodyScope.isOpen = $scope.isOpen;                   
                };                 
                this.toggle = function () {
                    $scope.isOpen = bodyScope.isOpen = !bodyScope.isOpen;
                    return bodyScope.isOpen;
                };                
            }]
        };
    })
    
    .directive('b2bWidgetHeader', function(){        
        return{            
            restrict: 'EA',
            replace: true,
            require:'^b2bWidgetContainer',
            transclude: true,
            scope:{
                heading:"@heading"
            },
            templateUrl: 'template/widget/b2bWidgetHeader.html',
            link: function(scope, elem, attr, ctrl){
                scope.showSettings = false;
                scope.toggleSetting = function()
                {
                    scope.showSettings = !scope.showSettings;
                };
                
                scope.toggleContent = function(){                
                    if (ctrl.toggle() === false){
                        scope.showSettings = false;
                    };
                };
            }
        };
    }) 
    
    .directive('b2bWidgetContent', function(){        
        return{            
            restrict: 'EA',
            replace: true,
            require:'^b2bWidgetContainer',
            transclude: true,
            scope:{},
            templateUrl: 'template/widget/b2bWidgetContent.html',
            link: function (scope, elem, attr, ctrl) {                                
                ctrl.setScope(scope);                                         
            }
        };
    });
angular.module("template/boardstrip/b2bAddBoard.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/boardstrip/b2bAddBoard.html",
    "<div tabindex=\"0\" role=\"menuitem\" ddh-accessibility-click=\"13,32\" ng-click=\"addBoard()\" aria-label=\"Add Board\" class=\"boardstrip-item--add\">\n" +
    "    <i aria-hidden=\"true\" class=\"icon-primary-collapsed centered\"></i>\n" +
    "    <br/>\n" +
    "    <div class=\"centered\">Add board</div>\n" +
    "</div>");
}]);

angular.module("template/boardstrip/b2bBoard.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/boardstrip/b2bBoard.html",
    "<li b2b-board-navigation tabindex=\"-1\" role=\"menuitem\" aria-label=\"{{boardLabel}}\" ddh-accessibility-click=\"13,32\" ng-click=\"selectBoard(boardIndex)\" class=\"board-item\" ng-class=\"{'selected': getCurrentIndex()===boardIndex}\">\n" +
    "    <div ng-transclude></div>\n" +
    "    <div class=\"board-caret\" ng-if=\"getCurrentIndex()===boardIndex\">\n" +
    "        <div class=\"board-caret-indicator\"></div>\n" +
    "        <div class=\"board-caret-arrow-up\"></div>\n" +
    "    </div>\n" +
    "</li>");
}]);

angular.module("template/boardstrip/b2bBoardstrip.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/boardstrip/b2bBoardstrip.html",
    "<div class=\"b2b-boardstrip\">\n" +
    "	<div class=\"boardstrip-reel\">\n" +
    "		<div class=\"prev-items\" ng-if=\"isPrevBoard()\">\n" +
    "			<i tabindex=\"0\" role=\"menuitem\" aria-label=\"See previous boards\" ddh-accessibility-click=\"13,32\" ng-click=\"prevBoard()\" class=\"arrow icoControls-left\"></i>\n" +
    "		</div>\n" +
    "		<div b2b-add-board on-add-board=\"onAddBoard()\"></div>\n" +
    "		<div class=\"board-viewport\"><ul role=\"presentation\" class=\"boardstrip-container\" ng-transclude></ul></div>\n" +
    "		<div class=\"next-items\" ng-if=\"isNextBoard()\">\n" +
    "			<i tabindex=\"0\" role=\"menuitem\" aria-label=\"See next boards\" ddh-accessibility-click=\"13,32\" ng-click=\"nextBoard()\" class=\"arrow icoControls-right\"></i>\n" +
    "		</div>\n" +
    "	</div>\n" +
    "</div>");
}]);

angular.module("template/coachmark/coachmark.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/coachmark/coachmark.html",
    "<div class=\"b2b-coachmark-container\" tabindex=\"-1\" role=\"dialog\" aria-label=\"{{currentCoachmark.contentHeader}} {{currentCoachmark.content}} {{currentCoachmark.offscreenText}}\" ng-style=\"{'top':coackmarkElPos.top,'left':coackmarkElPos.left}\">\n" +
    "	<i class=\"b2b-coachmark-caret\"></i>\n" +
    "	<div class=\"b2b-coachmark-header\">\n" +
    "		<div class=\"b2b-coachmark-countlabel\"><span ng-if=\"coachmarkIndex !== 0\">{{coachmarkIndex}} of {{(coachmarks.length-1)}}<span></div>\n" +
    "		<div class=\"corner-button\">\n" +
    "			<button type=\"button\" ng-focus=\"closeButtonFocus()\" class=\"close\" title=\"close\" aria-label=\"Close\" ng-click=\"closeCoachmark()\"></button>\n" +
    "		</div>\n" +
    "	</div>\n" +
    "	<div class=\"b2b-coachmark-content\">	\n" +
    "		<i class=\"icon-misc-dimmer\"></i>\n" +
    "		<div class=\"b2b-coachmark-content-header\"><span class=\"offscreen-text\">{{currentCoachmark.offscreenText}}</span>{{currentCoachmark.contentHeader}}</div>\n" +
    "		<div class=\"b2b-coachmark-description\">{{currentCoachmark.content}}</div>\n" +
    "		<div class=\"b2b-coachmark-btn-group\">\n" +
    "			<a class=\"b2b-coachmark-link\" href=\"javascript:void(0)\" ng-if=\"currentCoachmark.linkLabel !== '' && currentCoachmark.linkLabel !== undefined\" ng-click=\"actionCoachmark(currentCoachmark.linkLabel)\">{{currentCoachmark.linkLabel}}</a>\n" +
    "			<button class=\"btn btn-alt\" ng-if=\"currentCoachmark.buttonLabel !== '' && currentCoachmark.buttonLabel !== undefined\" ng-click=\"actionCoachmark(currentCoachmark.buttonLabel)\">{{currentCoachmark.buttonLabel}}</button>\n" +
    "		</div>	\n" +
    "	</div>	\n" +
    "</div>");
}]);

angular.module("template/directoryListing/directoryListing.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/directoryListing/directoryListing.html",
    "<div class=\"row b2b-directory-listing\">\n" +
    "<div ng-transclude></div>\n" +
    "    <div class=\"span4\">\n" +
    "        <div>\n" +
    "            <label for=\"leftSearch\">{{leftHeading}}</label>\n" +
    "            <div class=\"field-group\">\n" +
    "                <input type=\"text\" ng-model=\"searchStringLeft\" ng-disabled=\"hideLeftSearch\" placeholder=\"Search\" id=\"leftSearch\" aria-label=\"Search by telephone number\" aria-live=\"assertive\" class=\"span12\">\n" +
    "                <button class=\"btn-search\" aria-label=\"Search\" tabindex=\"-1\"></button>\n" +
    "            </div>\n" +
    "        </div>\n" +
    "        <div>\n" +
    "            <label for=\"multipleSelect1\" class=\"b2b-directory-listing-label-heading\"> {{leftLabel}} </label>\n" +
    "            <select index=\"0\" id=\"multipleSelect1\" class=\"listBox b2b-dl-list-box\" size=\"6\" ng-model=\"multipleSelect1\" multiple>\n" +
    "               \n" +
    "\n" +
    "                <option ng-repeat=\"tel in data1 | filter:searchLeftVal as results1\" value=\"{{tel.title}}\"\n" +
    "                        ng-disabled=\"{{tel.disabledField}}\" ng-class=\"{'b2b-directory-listing-disabled': tel.disabledField == true }\" aria-label=\"{{tel.title}}\">\n" +
    "                        {{formatPhoneNumber(tel.title)}} {{ (tel.subText !== undefined &&tel.subText.length>0) ? \"(\"+tel.subText+\")\" : '' }}\n" +
    "                        </option>\n" +
    "                <option ng-if=\"results1.length == 0\" aria-label=\"No results found\" disabled><strong>No results found...</strong></option>\n" +
    "            </select>\n" +
    "        </div>\n" +
    "    </div>\n" +
    "    <div class=\"span4\" style=\"padding-top:75px\">\n" +
    "        <button class=\"btn btn-alt btn-small btn-right center\" ng-click=\"moveAll('right')\" aria-label=\"Add All\" ng-disabled=\"hideAddall\">Add all</button>\n" +
    "        <button class=\"btn btn-alt btn-small btn-left center btn-remove-all\" ng-click=\"moveAll('left')\" aria-label=\"Remove All\" ng-disabled=\"hideRemoveall\">Remove all</button>\n" +
    "        <button class=\"btn btn-alt btn-small btn-right center\" ng-click=\"moveSelected('right')\" aria-label=\"Add\" ng-disabled=\"hideAdd\">Add</button>\n" +
    "        <button class=\"btn btn-alt btn-small btn-left center\" ng-click=\"moveSelected('left')\" aria-label=\"Remove\" ng-disabled=\"hideRemove\" style=\"margin-right:auto !important\">Remove</button>\n" +
    "    </div>\n" +
    "    <div class=\"span4\">\n" +
    "        <div>\n" +
    "            <label for=\"rightSearch\">{{rightHeading}} </label>\n" +
    "            <div class=\"field-group\">\n" +
    "                <input type=\"text\" ng-model=\"searchStringRight\" ng-disabled=\"hideRightSearch\" id=\"rightSearch\" placeholder=\"Search\" aria-label=\"Search by telephone number\" aria-live=\"assertive\" class=\"span12\">\n" +
    "                <button class=\"btn-search\" aria-label=\"Search\" tabindex=\"-1\"></button>\n" +
    "            </div>\n" +
    "        </div>\n" +
    "        <div>\n" +
    "            <label for=\"multipleSelect2\" class=\"b2b-directory-listing-label-heading\"> {{rightLabel}} </label>\n" +
    "            <select id=\"multipleSelect2\" class=\"listBox b2b-dl-list-box\" size=\"6\" ng-model=\"multipleSelect2\" multiple>\n" +
    "                <option ng-repeat=\"tel in data2 | filter:searchRightVal as results2\" value=\"{{tel.title}}\"\n" +
    "                        ng-disabled=\"{{tel.disabledField}}\" ng-class=\"{'b2b-directory-listing-disabled': tel.disabledField == true }\" aria-label=\"{{tel.title}}\">{{formatPhoneNumber(tel.title)}}\n" +
    "                        {{ (tel.subText !== undefined &&tel.subText.length>0) ? \"(\"+tel.subText+\")\" : '' }}\n" +
    "                        </option>\n" +
    "                <option ng-if=\"results2.length == 0\" aria-label=\"No results found\" disabled><strong>No results found...</strong></option> \n" +
    "            </select>\n" +
    "        </div>\n" +
    "    </div>\n" +
    "</div>\n" +
    "");
}]);

angular.module("template/fileUpload/fileUpload.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/fileUpload/fileUpload.html",
    "<label class=\"b2b-file-container\">\n" +
    "	<span class=\"b2b-upload-link\" ng-transclude></span>\n" +
    "	<input type=\"file\" b2b-file-change>\n" +
    "</label>");
}]);

angular.module("template/flyout/flyout.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/flyout/flyout.html",
    "<span class=\"b2b-flyout\"  b2b-flyout-trap-focus-inside>\n" +
    "    <span ng-transclude></span>\n" +
    "</span>");
}]);

angular.module("template/flyout/flyoutContent.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/flyout/flyoutContent.html",
    "<div class=\"b2b-flyout-container\" aria-live=\"polite\" aria-atomic=\"false\" ng-class=\"{'b2b-flyout-left':horizontalPlacement==='left',\n" +
    "                'b2b-flyout-center':horizontalPlacement==='center', \n" +
    "                'b2b-flyout-right':horizontalPlacement==='right', \n" +
    "                'b2b-flyout-above':verticalPlacement==='above', \n" +
    "                'b2b-flyout-below':verticalPlacement==='below',\n" +
    "                'open-flyout': openFlyout,\n" +
    "                'b2b-close-flyout': !openFlyout}\">\n" +
    "    <i class=\"b2b-flyout-caret\" ng-class=\"{'open-flyout': openFlyout, \n" +
    "                                   'b2b-flyout-caret-above':verticalPlacement==='above',\n" +
    "                                   'b2b-flyout-caret-below':verticalPlacement==='below'}\"></i>\n" +
    "    <span ng-transclude></span>\n" +
    "</div>");
}]);

angular.module("template/footer/footer_column_switch_tpl.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/footer/footer_column_switch_tpl.html",
    "<div class=\"footer-columns \" ng-class=\"{'five-column':footerColumns===5, 'four-column':footerColumns===4, 'three-column':footerColumns===3}\" ng-repeat=\"item in footerLinkItems\">\n" +
    "    <h3 class=\"b2b-footer-header\">{{item.categoryName}}</h3>\n" +
    "    <ul>\n" +
    "        <li ng-repeat=\"i in item.values\">\n" +
    "            <a href=\"{{i.href}}\" title=\"{{item.categoryName}} - {{i.displayLink}}\">{{i.displayLink}}</a>  \n" +
    "        </li>\n" +
    "    </ul>\n" +
    "\n" +
    "</div>\n" +
    "\n" +
    "<div ng-transclude></div>\n" +
    "");
}]);

angular.module("template/hourPicker/b2bHourpicker.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/hourPicker/b2bHourpicker.html",
    "<div class=\"hp-container\">\n" +
    "    <div class=\"hp-selected\">\n" +
    "        <div b2b-hourpicker-value=\"$index\" days=\"value.days\" start-time=\"value.startTime\" start-meridiem=\"value.startMeridiem\" end-time=\"value.endTime\" end-meridiem=\"value.endMeridiem\" ng-repeat=\"value in finalHourpickerValues\"></div>\n" +
    "    </div>\n" +
    "    <div b2b-hourpicker-panel></div>\n" +
    "</div>");
}]);

angular.module("template/hourPicker/b2bHourpickerPanel.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/hourPicker/b2bHourpickerPanel.html",
    "<form name=\"{{'hourpickerForm' + $id}}\">\n" +
    "    <div class=\"hp-checkbox\" role=\"group\">\n" +
    "        <label class=\"checkbox\" for=\"checkbox_{{dayOption.title}}_{{$id}}\" aria-label=\"{{dayOption.title}}\" ng-repeat=\"dayOption in hourpicker.dayOptions\">\n" +
    "            <input type=\"checkbox\" id=\"checkbox_{{dayOption.title}}_{{$id}}\" name=\"{{'hourpickerDays' + $id}}\" ng-model=\"hourpickerPanelValue.days[$index].value\" ng-disabled=\"dayOption.disabled\" /><i class=\"skin\"></i><span>{{dayOption.label}}</span>\n" +
    "        </label>\n" +
    "    </div>\n" +
    "    <div class=\"row hp-dropdowns\">\n" +
    "        <div class=\"span4\">\n" +
    "            <label for=\"{{'hourpickerStartTime' + $id}}\">From</label>\n" +
    "            <select name=\"{{'hourpickerStartTime' + $parent.$id}}\" ddh-dropdown label-text=\"From\" ng-model=\"hourpickerPanelValue.startTime\">\n" +
    "                <option ddh-dropdown-list value=\"\">From</option>\n" +
    "                <option ddh-dropdown-list option-repeat=\"startTimeOption in hourpicker.startTimeOptions\" value=\"{{startTimeOption}}\">{{startTimeOption}}</option>\n" +
    "            </select>\n" +
    "        </div>\n" +
    "        <div class=\"span8 radio-buttons\" role=\"radiogroup\">\n" +
    "            <label class=\"radio\" for=\"hourpickerStartMeridiem_AM_{{$id}}\">\n" +
    "                <input type=\"radio\" id=\"hourpickerStartMeridiem_AM_{{$id}}\" name=\"{{'hourpickerStartMeridiem' + $id}}\" value=\"am\" ng-model=\"hourpickerPanelValue.startMeridiem\" /><i class=\"skin\"></i><span>AM</span>\n" +
    "            </label>\n" +
    "            <label class=\"radio\" for=\"hourpickerStartMeridiem_PM_{{$id}}\">\n" +
    "                <input type=\"radio\" id=\"hourpickerStartMeridiem_PM_{{$id}}\" name=\"{{'hourpickerStartMeridiem' + $id}}\" value=\"pm\" ng-model=\"hourpickerPanelValue.startMeridiem\" /><i class=\"skin\"></i><span>PM</span>\n" +
    "            </label>\n" +
    "        </div>\n" +
    "    </div>\n" +
    "    <div class=\"row hp-dropdowns\">\n" +
    "        <div class=\"span4\">\n" +
    "            <label for=\"{{'hourpickerEndTime' + $id}}\">To</label>\n" +
    "            <select name=\"{{'hourpickerEndTime' + $parent.$id}}\" ddh-dropdown label-text=\"To\" ng-model=\"hourpickerPanelValue.endTime\">\n" +
    "                <option ddh-dropdown-list value=\"\">To</option>\n" +
    "                <option ddh-dropdown-list option-repeat=\"endTimeOption in hourpicker.endTimeOptions\" value=\"{{endTimeOption}}\">{{endTimeOption}}</option>\n" +
    "            </select>\n" +
    "        </div>\n" +
    "        <div class=\"span8 radio-buttons\" role=\"radiogroup\">\n" +
    "            <label class=\"radio\" for=\"hourpickerEndMeridiem_AM_{{$id}}\">\n" +
    "                <input type=\"radio\" id=\"hourpickerEndMeridiem_AM_{{$id}}\" name=\"{{'hourpickerEndMeridiem' + $id}}\" value=\"am\" ng-model=\"hourpickerPanelValue.endMeridiem\" /><i class=\"skin\"></i><span>AM</span>\n" +
    "            </label>\n" +
    "            <label class=\"radio\" for=\"hourpickerEndMeridiem_PM_{{$id}}\">\n" +
    "                <input type=\"radio\" id=\"hourpickerEndMeridiem_PM_{{$id}}\" name=\"{{'hourpickerEndMeridiem' + $id}}\" value=\"pm\" ng-model=\"hourpickerPanelValue.endMeridiem\" /><i class=\"skin\"></i><span>PM</span>\n" +
    "            </label>\n" +
    "        </div>\n" +
    "    </div>\n" +
    "    <div class=\"row hp-buttons\">\n" +
    "        <div class=\"span12\">\n" +
    "            <div style=\"float:right\">\n" +
    "                <button class=\"btn btn-secondary btn-small\" ng-click=\"resetHourpickerPanelValue()\">Clear</button>\n" +
    "                <button class=\"btn btn-alt btn-small\" ng-click=\"updateHourpickerValue()\">{{hourpicker.editMode > -1 ? 'Update' : 'Add'}}</button>\n" +
    "            </div>\n" +
    "        </div>\n" +
    "    </div>\n" +
    "</form>");
}]);

angular.module("template/hourPicker/b2bHourpickerValue.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/hourPicker/b2bHourpickerValue.html",
    "<div class=\"selected-days\">\n" +
    "    <span class=\"day\">{{hourpickerValue.days}} &nbsp; {{hourpickerValue.startTime}} {{hourpickerValue.startMeridiem}} - {{hourpickerValue.endTime}} {{hourpickerValue.endMeridiem}}</span>\n" +
    "    <span style=\"float:right\">\n" +
    "        <i class=\"icon-misc-penL\" role=\"button\" title=\"Edit {{hourpickerValue.days}} &nbsp; {{hourpickerValue.startTime}} {{hourpickerValue.startMeridiem}} - {{hourpickerValue.endTime}} {{hourpickerValue.endMeridiem}}\" tabindex=\"0\" ddh-accessibility-click=\"13,32\" ng-click=\"editHourpickerValue(hourpickerValue.index)\"></i>\n" +
    "        <i class=\"icon-misc-trash\" role=\"button\" title=\"Delete {{hourpickerValue.days}} &nbsp; {{hourpickerValue.startTime}} {{hourpickerValue.startMeridiem}} - {{hourpickerValue.endTime}} {{hourpickerValue.endMeridiem}}\" tabindex=\"0\" ddh-accessibility-click=\"13,32\" ng-click=\"deleteHourpickerValue(hourpickerValue.index)\"></i>\n" +
    "    </span>\n" +
    "    <div style=\"clear:both\"></div>\n" +
    "</div>");
}]);

angular.module("template/paneSelector/paneSelector.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/paneSelector/paneSelector.html",
    "<div class=\"panes\" ng-transclude></div>");
}]);

angular.module("template/paneSelector/paneSelectorPane.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/paneSelector/paneSelectorPane.html",
    "<div class=\"pane-block\" ng-transclude></div>");
}]);

angular.module("template/profileBlocks/profileBlocks.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/profileBlocks/profileBlocks.html",
    "<div class=\"b2b-profile-block-container span4\"> \n" +
    "    <div class=\"b2b-profile-block-details\"> \n" +
    "            <div ng-transclude></div>\n" +
    "        <div class=\"b2b-profile-block-footer\"> \n" +
    "            <label ng-if=\"profile.linkedProfile===true || profile.showRadioButton === true \"  class=\"radio b2b-profile-block-radio\" for=\"{{profileBlockName}}_{{index}}\"> \n" +
    "            \n" +
    "                <input type=\"radio\" id=\"{{profileBlockName}}_{{index}}\" role=\"radio\" ng-model=\"profileBlockSetScope.profileRadio\" value=\"{{profile.defaultRadioValue}}\" ng-change=\"defaultProfile(profile)\" name=\"{{profileBlockName}}\" > <i class=\"skin\"></i>\n" +
    "                <span class=\"radio-label\">{{radioLabel}}</span>    \n" +
    "            </label>\n" +
    "               <a href=\"javascript:void(0)\" ddh-accessibility-click=\"13,32\"  title=\"Unlink Profile\" b2b-link-type=\"unlink\" b2b-profile-block-click ng-if=\"(profile.linkedProfile !== undefined || profile.linkedProfile !== null ) && profile.linkedProfile===true \" class=\"b2b-profile-link\">Unlink</a> \n" +
    "\n" +
    "                <a href=\"javascript:void(0)\" class=\"link-profile\" ddh-accessibility-click=\"13,32\" title=\"Link Profile\"  b2b-link-type=\"link\" b2b-profile-block-click  ng-if=\"(profile.linkedProfile !== undefined || profile.linkedProfile !== null ) && profile.linkedProfile===false\" class=\"b2b-profile-link\">Link</a> \n" +
    "        </div>  \n" +
    "    \n" +
    "    </div> \n" +
    "</div>           ");
}]);

angular.module("template/profileCard/profileCard-addUser.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/profileCard/profileCard-addUser.html",
    "<div  class=\"span3 b2b-profile-card b2b-add-user\">\n" +
    "    <div class=\"atcenter\">\n" +
    "        <div class=\"circle\"><i class=\"icon-primary-add-maximize\"></i></div>\n" +
    "        <div>Create new user</div>\n" +
    "    </div>\n" +
    "</div>");
}]);

angular.module("template/profileCard/profileCard.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/profileCard/profileCard.html",
    "<div class=\"span3 b2b-profile-card\">\n" +
    "    <div class=\"top-block\">\n" +
    "       <div class=\"profile-image\">\n" +
    "            <img ng-if=\"image\" profile-name=\"{{profile.name}}\" ng-src=\"{{profile.img}}\" alt=\"{{profile.name}}\">\n" +
    "            <span ng-if=\"!image\" class=\"default-img\">{{initials}}</span>\n" +
    "\n" +
    "            <h4 class=\"name\">{{profile.name}}</h4>\n" +
    "\n" +
    "            <p class=\"status\">\n" +
    "                <span class=\"status-icon\" ng-class=\"{'status-green':colorIcon==='green','status-red':colorIcon==='red','status-blue':colorIcon==='blue','status-yellow':colorIcon==='yellow'}\">   \n" +
    "                </span>\n" +
    "                <span>{{profile.state}}<span ng-if=\"badge\" class=\"status-badge\">Admin</span></span>\n" +
    "            </p>\n" +
    "        </div>\n" +
    "    </div>\n" +
    "    <div class=\"bottom-block\">\n" +
    "         <div class=\"profile-details\">\n" +
    "            <label>Username</label>\n" +
    "            <div ng-if=\"shouldClip(profile.userName)\" ng-mouseover=\"showUserNameTooltip = true;\" ng-mouseleave=\"showUserNameTooltip = false;\">\n" +
    "                <div ng-if=\"shouldClip(profile.userName)\" class=\"tooltip\" ddh-tooltip show-tooltip=\"showUserNameTooltip\">\n" +
    "                    {{profile.userName.slice(0, 25)+'...'}}\n" +
    "                    <div class=\"arrow\"></div>\n" +
    "                    <div class=\"tooltip-wrapper\" role=\"tooltip\" aria-live=\"polite\" aria-atomic=\"false\" style=\"z-index:1111\">\n" +
    "                        <div class=\"tooltip-size-control\">\n" +
    "                            <div class=\"helpertext\" tabindex=\"-1\" role=\"tooltip\">\n" +
    "                                {{profile.userName}}\n" +
    "                            </div>\n" +
    "                        </div>\n" +
    "                    </div>\n" +
    "                </div>\n" +
    "            </div>\n" +
    "            <div ng-if=\"!shouldClip(profile.userName)\">\n" +
    "                {{profile.userName}}\n" +
    "            </div>\n" +
    "            <label>Email</label>\n" +
    "            <div ng-if=\"shouldClip(profile.email)\" ng-mouseover=\"showEmailTooltip = true;\" ng-mouseleave=\"showEmailTooltip = false;\">\n" +
    "                <div ng-if=\"shouldClip(profile.email)\" class=\"tooltip\" data-placement=\"bottom\" ddh-tooltip show-tooltip=\"showEmailTooltip\">\n" +
    "                    {{profile.email.slice(0, 25)+'...'}}\n" +
    "                    <div class=\"arrow\"></div>\n" +
    "                    <div class=\"tooltip-wrapper\" role=\"tooltip\" aria-live=\"polite\" aria-atomic=\"false\" style=\"z-index:1111\">\n" +
    "                        <div class=\"tooltip-size-control\">\n" +
    "                            <div class=\"helpertext\" tabindex=\"-1\" role=\"tooltip\">\n" +
    "                                {{profile.email}}\n" +
    "                            </div>\n" +
    "                        </div>\n" +
    "                    </div>\n" +
    "                </div>\n" +
    "            </div>\n" +
    "            <div ng-if=\"!shouldClip(profile.email)\">\n" +
    "                {{profile.email}}\n" +
    "            </div>\n" +
    "            <label>Role</label>\n" +
    "            <div ng-if=\"shouldClip(profile.role)\" ng-mouseover=\"showRoleTooltip = true;\" ng-mouseleave=\"showRoleTooltip = false;\">\n" +
    "                <div ng-if=\"shouldClip(profile.role)\" class=\"tooltip\" ddh-tooltip show-tooltip=\"showRoleTooltip\">\n" +
    "                    {{profile.role.slice(0, 25)+'...'}}\n" +
    "                    <div class=\"tooltip-wrapper\" role=\"tooltip\" aria-live=\"polite\" aria-atomic=\"false\" style=\"z-index:1111\">\n" +
    "                        <div class=\"tooltip-size-control\">\n" +
    "                            <div class=\"helpertext\" tabindex=\"-1\" role=\"tooltip\">\n" +
    "                                {{profile.role}}\n" +
    "                            </div>\n" +
    "                        </div>\n" +
    "                    </div>\n" +
    "                </div>\n" +
    "            </div>\n" +
    "            <div ng-if=\"!shouldClip(profile.role)\">\n" +
    "                {{profile.role}}\n" +
    "            </div>\n" +
    "            <label>Last login</label>\n" +
    "            <div ng-if=\"shouldClip(profile.lastLogin)\" ng-mouseover=\"showLastLoginTooltip = true;\" ng-mouseleave=\"showLastLoginTooltip = false;\">\n" +
    "                <div ng-if=\"shouldClip(profile.lastLogin)\" class=\"tooltip\" ddh-tooltip show-tooltip=\"showLastLoginTooltip\">\n" +
    "                    {{profile.lastLogin.slice(0, 25)+'...'}}\n" +
    "                    <div class=\"tooltip-wrapper\" role=\"tooltip\" aria-live=\"polite\" aria-atomic=\"false\" style=\"z-index:1111\">\n" +
    "                        <div class=\"tooltip-size-control\">\n" +
    "                            <div class=\"helpertext\" tabindex=\"-1\" role=\"tooltip\">\n" +
    "                                {{profile.lastLogin}}\n" +
    "                            </div>\n" +
    "                        </div>\n" +
    "                    </div>\n" +
    "                </div>\n" +
    "            </div>\n" +
    "            <div ng-if=\"!shouldClip(profile.lastLogin)\">\n" +
    "                {{profile.lastLogin}}\n" +
    "            </div>\n" +
    "         </div>\n" +
    "    </div>\n" +
    "</div>");
}]);

angular.module("template/seekBar/seekBar.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/seekBar/seekBar.html",
    "<div class=\"b2b-seek-bar-container\" ng-class=\"{vertical:verticalSeekBar}\">\n" +
    "    <div class=\"b2b-seek-bar-track-container\">\n" +
    "        <div class=\"b2b-seek-bar-track\"></div>\n" +
    "        <div class=\"b2b-seek-bar-track-fill\"></div>\n" +
    "    </div>\n" +
    "    <div class=\"b2b-seek-bar-knob-container\" role=\"menu\"  >\n" +
    "        <div class=\"b2b-seek-bar-knob\" tabindex=\"0\" role=\"menuitem\"></div>\n" +
    "    </div>\n" +
    "</div>");
}]);

angular.module("template/slider/slider.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/slider/slider.html",
    "<div class=\"b2b-slider-container\" ng-class=\"{'vertical':verticalSlider}\">\n" +
    "    <div class=\"slider-track-container\">\n" +
    "        <div class=\"slider-track\"></div>\n" +
    "        <div class=\"slider-track-fill\" ng-style=\"{backgroundColor:trackFillColor}\"></div>\n" +
    "    </div>\n" +
    "    <div class=\"slider-knob-container\" ng-class=\"{'slider-knob-hidden':hideKnob}\">\n" +
    "        <div class=\"slider-knob\" role=\"slider\" aria-valuemin=\"{{min}}\" aria-valuemax=\"{{max}}\" aria-labelledby=\"{{labelId}}\" aria-valuenow=\"{{currentModelValue}}\" aria-valuetext=\"{{currentModelValue}}{{postAriaLabel}}\" aria-orientation=\"{{verticalSlider ? 'vertical' : 'horizontal'}}\"></div>\n" +
    "    </div>\n" +
    "</div>");
}]);

angular.module("template/statusTracker/statusTracker.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/statusTracker/statusTracker.html",
    "<div class=\"b2b-status-tracker row\">\n" +
    "	<div ng-repeat=\"status in statuses\" class=\"b2b-status-tracker-step\" ng-class=\"{ 'complete' : status.complete }\">\n" +
    "	    <p class=\"b2b-status-tracker-heading\">{{status.heading}}</p>\n" +
    "	    <div class=\"progress\">\n" +
    "	        <div class=\"progress-bar\">\n" +
    "	        	<span class=\"hidden-spoken\">\n" +
    "	            	{{status.complete ? 'Complete' : 'Incomplete'}}\n" +
    "	        	</span>\n" +
    "	        </div>\n" +
    "	    </div>\n" +
    "	    <div ng-show=\"status.estimate !== '' && status.estimate !== undefined\" class=\"b2b-status-tracker-estimate\">\n" +
    "	    	<i class=\"icon-misc-time\"></i> {{status.estimate}}\n" +
    "	    </div>\n" +
    "	    <div ng-show=\"status.estimate !== '' && status.estimate !== undefined\" class=\"b2b-status-tracker-description\">\n" +
    "	    	{{status.description}}\n" +
    "	    </div>\n" +
    "	</div>\n" +
    "</div>");
}]);

angular.module("template/tableMessages/tableMessage.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/tableMessages/tableMessage.html",
    "<div class=\"b2b-table-message\">\n" +
    "    <div class=\"b2b-message\" ng-if=\"msgType === 'noMatchingResults'\">\n" +
    "        <div class=\"b2b-magnify-glass\"></div>\n" +
    "        <div>\n" +
    "            <div ng-transclude></div>\n" +
    "        </div>\n" +
    "    </div>\n" +
    "    <div class=\"b2b-message\" ng-if=\"msgType == 'infoCouldNotLoad'\">\n" +
    "        <div class=\"icon-primary-alert b2b-alert\" aria-label=\"Oops! The information could not load at this time. Please click link to refresh the page.\"></div>\n" +
    "        <div>Oops!</div>\n" +
    "        <div>The information could not load at this time.</div>\n" +
    "        <div>Please <a href=\"javascript:void(0)\" title=\"Refresh the page\" ng-click=\"refreshAction($event)\">refresh the page</a>\n" +
    "        </div>\n" +
    "    </div>\n" +
    "    <div class=\"b2b-message\" ng-if=\"msgType == 'magnifySearch'\">\n" +
    "        <div class=\"b2b-magnify-glass\"></div>\n" +
    "        <div>\n" +
    "            <p class=\"b2b-message-title\">Please input values to\n" +
    "                <br/> begin your search.</p>\n" +
    "        </div>\n" +
    "    </div>\n" +
    "    <div class=\"b2b-message\" ng-if=\"msgType === 'loadingTable'\">\n" +
    "        <div class=\"icon-primary-spinner b2b-loading-dots\"></div>\n" +
    "        <div ng-transclude></div>\n" +
    "    </div>\n" +
    "</div>\n" +
    "");
}]);

angular.module("template/tableScrollbar/tableScrollbar.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/tableScrollbar/tableScrollbar.html",
    "<div class=\"b2b-table-scrollbar\">\n" +
    "    <div class=\"b2b-scrollbar-arrows\">\n" +
    "        <button class=\"btn-arrow  b2b-scrollbar-arrow-left\" type=\"button\" ng-attr-aria-label=\"{{disableLeft ? 'Scroll Left Disabled' : 'Scroll Left'}}\" ng-click=\"scrollLeft()\" ng-disabled=\"disableLeft\"><div class=\"btn btn-alt\"><i class=\"icon-primary-left\"></i></div></button>\n" +
    "        <button class=\"btn-arrow b2b-scrollbar-arrow-right\" ng-attr-aria-label=\"{{disableRight ? 'Scroll Right Disabled' : 'Scroll Right'}}\" ng-click=\"scrollRight()\" ng-disabled=\"disableRight\" type=\"button\"><div class=\"btn btn-alt\"><i class=\"icon-primary-right\"></i></div></button>\n" +
    "    </div>\n" +
    "    <div class=\"b2b-table-inner-container\">\n" +
    "        <span ng-transclude></span>\n" +
    "    </div>\n" +
    "</div>");
}]);

angular.module("template/treeNav/groupedTree.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/treeNav/groupedTree.html",
    "<ul role=\"group\">\n" +
    "    <li aria-expanded=\"false\" role=\"treeitem\" aria-label=\"{{key}}\" ng-repeat='(key,value) in collection | groupBy : \"grpChild\"' b2b-tree-link><a class=\"grp\" tabindex=\"-1\" href='javascript:void(0);'>{{(key)?key:''}}<span><i class=\"icon-primary-collapsed\"></i></span></a>\n" +
    "        <ul role=\"group\">\n" +
    "            <b2b-member ng-repeat='member in value' member='member' divide-in='divideIn' group-it='groupIt'></b2b-member>\n" +
    "        </ul>\n" +
    "    </li>\n" +
    "</ul>");
}]);

angular.module("template/treeNav/treeMember.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/treeNav/treeMember.html",
    "<li role=\"treeitem\" aria-expanded=\"false\" aria-label=\"{{member.name}}\" ng-click=\"member.job();showChild($event);\" b2b-tree-link>\n" +
    "    <a tabindex=\"-1\" title=\"{{member.name}}\" href=\"javascript:void(0)\">{{member.name}}\n" +
    "        <span class=\"{{!member.child?'end':''}}\">\n" +
    "            <i class=\"{{!member.child?'icon-primary-circle':'icon-primary-collapsed'}}\"></i>\n" +
    "        </span>\n" +
    "    </a>\n" +
    "</li>");
}]);

angular.module("template/treeNav/ungroupedTree.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/treeNav/ungroupedTree.html",
    "<ul role=\"{{setRole}}\"><b2b-member ng-repeat='member in collection' member='member' divide-in='divideIn' group-it='groupIt'></b2b-member></ul>");
}]);

angular.module("template/widget/b2bWidgetContainer.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/widget/b2bWidgetContainer.html",
    "<div class=\"b2b-widget-container\">    \n" +
    "    <div ng-transclude></div>\n" +
    "</div>");
}]);

angular.module("template/widget/b2bWidgetContent.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/widget/b2bWidgetContent.html",
    "<div class=\"b2b-widget-content\" ng-show=\"isOpen\">\n" +
    "    <div ng-transclude></div>\n" +
    "</div> ");
}]);

angular.module("template/widget/b2bWidgetHeader.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/widget/b2bWidgetHeader.html",
    "<div class=\"b2b-widget-header\">\n" +
    "    <span class=\"header\">{{heading}}</span>\n" +
    "    <span class=\"pull-right b2b-widget-header-icons\">\n" +
    "        <button title=\"{{heading}} Settings\" class=\"icoControls-gear\" ng-click=\"toggleSetting();\"></button>        \n" +
    "        <button title=\"Close {{heading}} Widget\" class=\"icon-primary-close\" ng-click=\"toggleContent();\"></button>\n" +
    "    </span>\n" +
    "    <div class=\"b2b-widget-window arrow_box\" ng-show=\"showSettings\">\n" +
    "    	<div ng-transclude></div>\n" +
    "    </div>    \n" +
    "</div>            ");
}]);
